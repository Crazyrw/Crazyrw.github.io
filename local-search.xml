<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>IDEA TomcatæŠ¥é”™</title>
    <link href="/2020/12/11/IDEA%20Tomcat%E6%8A%A5%E9%94%99/"/>
    <url>/2020/12/11/IDEA%20Tomcat%E6%8A%A5%E9%94%99/</url>
    
    <content type="html"><![CDATA[<p>å…·ä½“æƒ…å†µï¼š</p><p>åœ¨IDEAä¸­åˆ›å»ºMavené¡¹ç›®ï¼Œé…ç½®Tomcat,å¯åŠ¨ä¹‹åï¼Œå‡ºç°å¦‚ä¸‹æƒ…å†µï¼š</p><img src="/images/IDEA TomcatæŠ¥é”™/image-20201211204015327.png" alt="image-20201211204015327" style="zoom:50%;" /><p>è§£å†³æ–¹æ³•ï¼š</p><p>åœ¨è®¾ç½®TomcatæœåŠ¡æ—¶ï¼Œè¦å°†ä¸‹é¢æ ‡æ³¨çš„å†…å®¹è®¾ä¸ºç©ºï¼š</p><img src="/images/IDEA TomcatæŠ¥é”™/image-20201211204203434.png" alt="image-20201211204203434" style="zoom:50%;" /><img src="/images/IDEA TomcatæŠ¥é”™/image-20201211204223664.png" alt="image-20201211204223664" style="zoom:50%;" /><img src="/images/IDEA TomcatæŠ¥é”™/image-20201211204203434.png" alt="image-20201211204203434" style="zoom:50%;" /><img src="/images/IDEA TomcatæŠ¥é”™/image-20201211204223664.png" alt="image-20201211204223664" style="zoom:50%;" />]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>è§£å†³idea mavenä¸­æ–°å»ºæ–‡ä»¶æ²¡æœ‰JSPé€‰é¡¹</title>
    <link href="/2020/12/11/%E8%A7%A3%E5%86%B3idea%20maven%E9%A1%B9%E7%9B%AE%E6%96%B0%E5%BB%BA%E6%96%87%E4%BB%B6%E4%B8%AD%E6%B2%A1%E6%9C%89JSP%E6%96%87%E4%BB%B6/"/>
    <url>/2020/12/11/%E8%A7%A3%E5%86%B3idea%20maven%E9%A1%B9%E7%9B%AE%E6%96%B0%E5%BB%BA%E6%96%87%E4%BB%B6%E4%B8%AD%E6%B2%A1%E6%9C%89JSP%E6%96%87%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<p>è¿™æ˜¯æˆ‘é¡¹ç›®çš„åŸºæœ¬ç»“æ„ï¼š</p><img src="/images/è§£å†³idea mavené¡¹ç›®æ–°å»ºæ–‡ä»¶ä¸­æ²¡æœ‰JSPæ–‡ä»¶/image-20201211201148763.png" alt="image-20201211201148763" style="zoom:50%;" /><p>æˆ‘çš„éœ€æ±‚æ˜¯åœ¨SpringMVC-02-servletæ¨¡å—ä¸­å‡ºç°æ–°å»ºJSPé€‰é¡¹ã€‚</p><p>è§£å†³æ–¹æ³•ï¼š</p><img src="/images/è§£å†³idea mavené¡¹ç›®æ–°å»ºæ–‡ä»¶ä¸­æ²¡æœ‰JSPæ–‡ä»¶/image-20201211201326337.png" alt="image-20201211201326337" style="zoom:50%;" /><p>ç‚¹å‡»ä½ éœ€è¦çš„æ¨¡å—æˆ–è€…æ•´ä¸ªé¡¹ç›®ï¼Œç„¶åç‚¹å‡»+å·ã€‚</p><img src="/images/è§£å†³idea mavené¡¹ç›®æ–°å»ºæ–‡ä»¶ä¸­æ²¡æœ‰JSPæ–‡ä»¶/image-20201211201405506.png" alt="image-20201211201405506" style="zoom:50%;" /><img src="/images/è§£å†³idea mavené¡¹ç›®æ–°å»ºæ–‡ä»¶ä¸­æ²¡æœ‰JSPæ–‡ä»¶/image-20201211201507175.png" alt="image-20201211201507175" style="zoom:50%;" /><p>é€‰æ‹©éœ€è¦æ·»åŠ çš„ç›®å½•ã€‚</p><img src="/images/è§£å†³idea mavené¡¹ç›®æ–°å»ºæ–‡ä»¶ä¸­æ²¡æœ‰JSPæ–‡ä»¶/image-20201211201542190.png" alt="image-20201211201542190" style="zoom:50%;" /><img src="/images/è§£å†³idea mavené¡¹ç›®æ–°å»ºæ–‡ä»¶ä¸­æ²¡æœ‰JSPæ–‡ä»¶/image-20201211201638306.png" alt="image-20201211201638306" style="zoom:50%;" /><img src="/images/è§£å†³idea mavené¡¹ç›®æ–°å»ºæ–‡ä»¶ä¸­æ²¡æœ‰JSPæ–‡ä»¶/image-20201211201542190.png" alt="image-20201211201542190" style="zoom:50%;" /><p>OK, æˆåŠŸè§£å†³ã€‚</p><img src="/images/è§£å†³idea mavené¡¹ç›®æ–°å»ºæ–‡ä»¶ä¸­æ²¡æœ‰JSPæ–‡ä»¶/image-20201211201638306.png" alt="image-20201211201638306" style="zoom:50%;" />]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>SpringMVCï¼ˆæŒç»­æ›´æ–°ä¸­ï¼‰</title>
    <link href="/2020/12/11/SpringMVC/"/>
    <url>/2020/12/11/SpringMVC/</url>
    
    <content type="html"><![CDATA[<p>ï¼ˆï¼šå¦‚æœæœ‰éœ€è¦ï¼Œå¤§å®¶å¯ä»¥å…³æ³¨ç‹‚ç¥è¯´å…¬ä¼—å·ï¼Œæˆ‘ä¹Ÿæ˜¯ç‹‚ç²‰å“ˆå“ˆï¼‰</p><p>ssm = mybatis + Spring + SpringMVC <strong>MVCä¸‰å±‚æ¶æ„</strong></p><p>ä¹‹åçš„å­¦ä¹ è®¡åˆ’ï¼šSpringMVC + Vue + SpringBoot + SpringCloud + Linux</p><p>Spring: IOC AOP(æ¯”è¾ƒé‡è¦)</p><p>SpringMVC: SpringMVCçš„æ‰§è¡Œæµç¨‹(æ¯”è¾ƒé‡è¦)</p><h2 id="1-å›é¡¾MVC"><a href="#1-å›é¡¾MVC" class="headerlink" title="1. å›é¡¾MVC"></a>1. å›é¡¾MVC</h2><h3 id="1-1-ä»€ä¹ˆæ˜¯MVC"><a href="#1-1-ä»€ä¹ˆæ˜¯MVC" class="headerlink" title="1.1 ä»€ä¹ˆæ˜¯MVC"></a>1.1 ä»€ä¹ˆæ˜¯MVC</h3><ul><li>MVCæ˜¯æ¨¡å‹(Model)ã€è§†å›¾(View)ã€æ§åˆ¶å™¨(Controller)çš„ç®€å†™ï¼Œæ˜¯ä¸€ç§è½¯ä»¶è®¾è®¡è§„èŒƒã€‚</li><li>æ˜¯å°†<strong>ä¸šåŠ¡é€»è¾‘</strong>ã€<strong>æ•°æ®</strong>ã€<strong>æ˜¾ç¤º</strong>åˆ†ç¦»çš„æ–¹æ³•æ¥ç»„ç»‡ä»£ç ã€‚</li><li>MVCä¸»è¦ä½œç”¨æ˜¯<strong>é™ä½äº†è§†å›¾ä¸ä¸šåŠ¡é€»è¾‘é—´çš„åŒå‘å¶åˆ</strong>ã€‚</li><li>MVCä¸æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œ<strong>MVCæ˜¯ä¸€ç§æ¶æ„æ¨¡å¼</strong>ã€‚ä¸åŒçš„MVCå­˜åœ¨å·®å¼‚ã€‚</li></ul><p><strong>Modelï¼ˆæ¨¡å‹ï¼‰ï¼š</strong>æ•°æ®æ¨¡å‹ï¼Œæä¾›è¦å±•ç¤ºçš„æ•°æ®ï¼Œå› æ­¤åŒ…å«==æ•°æ®å’Œè¡Œä¸º==ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯é¢†åŸŸæ¨¡å‹æˆ–JavaBeanç»„ä»¶ï¼ˆåŒ…å«æ•°æ®å’Œè¡Œä¸ºï¼‰ï¼Œä¸è¿‡ç°åœ¨ä¸€èˆ¬éƒ½åˆ†ç¦»å¼€æ¥ï¼šValue Objectï¼ˆæ•°æ®==<strong>Dao</strong>==ï¼‰å’ŒæœåŠ¡å±‚ï¼ˆè¡Œä¸º==<strong>Service</strong>==ï¼‰ã€‚ä¹Ÿå°±æ˜¯æ¨¡å‹æä¾›äº†æ¨¡å‹æ•°æ®æŸ¥è¯¢å’Œæ¨¡å‹æ•°æ®çš„çŠ¶æ€æ›´æ–°ç­‰åŠŸèƒ½ï¼ŒåŒ…æ‹¬==<strong>æ•°æ®å’Œä¸šåŠ¡</strong>==ã€‚</p><p><strong>Viewï¼ˆè§†å›¾ï¼‰ï¼š</strong>è´Ÿè´£è¿›è¡Œæ¨¡å‹çš„å±•ç¤ºï¼Œä¸€èˆ¬å°±æ˜¯æˆ‘ä»¬è§åˆ°çš„ç”¨æˆ·ç•Œé¢ï¼Œå®¢æˆ·æƒ³çœ‹åˆ°çš„ä¸œè¥¿ã€‚</p><p>==<strong>Controller</strong>==ï¼ˆæ§åˆ¶å™¨ï¼‰ï¼š**æ¥æ”¶ç”¨æˆ·è¯·æ±‚ï¼Œå§”æ‰˜ç»™æ¨¡å‹è¿›è¡Œå¤„ç†ï¼ˆçŠ¶æ€æ”¹å˜ï¼‰ï¼Œå¤„ç†å®Œæ¯•åæŠŠè¿”å›çš„æ¨¡å‹æ•°æ®è¿”å›ç»™è§†å›¾ï¼Œç”±è§†å›¾è´Ÿè´£å±•ç¤ºã€‚ä¹Ÿå°±æ˜¯è¯´æ§åˆ¶å™¨åšäº†ä¸ªè°ƒåº¦å‘˜çš„å·¥ä½œã€‚</p><p><strong>æœ€å…¸å‹çš„MVCå°±æ˜¯JSP + servlet + javabeançš„æ¨¡å¼ã€‚</strong></p><img src="/images/SpringMVC/image-20201211191701719.png" alt="image-20201211191701719" style="zoom:80%;" /><h3 id="1-2-Model1"><a href="#1-2-Model1" class="headerlink" title="1.2 Model1"></a>1.2 Model1</h3><ul><li>åœ¨webæ—©æœŸçš„å¼€å‘ä¸­ï¼Œé€šå¸¸é‡‡ç”¨çš„éƒ½æ˜¯Model1ã€‚</li><li>Model1ä¸­ï¼Œä¸»è¦åˆ†ä¸ºä¸¤å±‚ï¼Œ==è§†å›¾å±‚å’Œæ¨¡å‹å±‚ã€‚==</li></ul><img src="/images/SpringMVC/image-20201211192206489.png" alt="image-20201211192206489" style="zoom:80%;" /><p>Model1ä¼˜ç‚¹ï¼šæ¶æ„ç®€å•ï¼Œæ¯”è¾ƒé€‚åˆå°å‹é¡¹ç›®å¼€å‘ï¼›</p><p>Model1ç¼ºç‚¹ï¼šJSPèŒè´£ä¸å•ä¸€ï¼ŒèŒè´£è¿‡é‡ï¼Œä¸ä¾¿äºç»´æŠ¤ï¼›</p><h3 id="1-3-Model2"><a href="#1-3-Model2" class="headerlink" title="1.3 Model2"></a>1.3 Model2</h3><p>Model2æŠŠä¸€ä¸ªé¡¹ç›®åˆ†æˆä¸‰éƒ¨åˆ†ï¼ŒåŒ…æ‹¬==<strong>è§†å›¾ã€æ§åˆ¶ã€æ¨¡å‹ã€‚</strong>==</p><p><img src="/images/SpringMVC/image-20201212192537382.png" alt="image-20201212192537382"></p><ol><li>ç”¨æˆ·å‘è¯·æ±‚</li><li>Servletæ¥æ”¶è¯·æ±‚æ•°æ®ï¼Œå¹¶è°ƒç”¨å¯¹åº”çš„ä¸šåŠ¡é€»è¾‘æ–¹æ³•</li><li>ä¸šåŠ¡å¤„ç†å®Œæ¯•ï¼Œè¿”å›æ›´æ–°åçš„æ•°æ®ç»™servlet</li><li>servletè½¬å‘åˆ°JSPï¼Œç”±JSPæ¥æ¸²æŸ“é¡µé¢</li><li>å“åº”ç»™å‰ç«¯æ›´æ–°åçš„é¡µé¢</li></ol><p><strong>èŒè´£åˆ†æï¼š</strong></p><p><strong>Controllerï¼šæ§åˆ¶å™¨</strong></p><ol><li>å–å¾—è¡¨å•æ•°æ®</li><li>è°ƒç”¨ä¸šåŠ¡é€»è¾‘</li><li>è½¬å‘æŒ‡å®šçš„é¡µé¢</li></ol><p><strong>Modelï¼šæ¨¡å‹</strong></p><ol><li>ä¸šåŠ¡é€»è¾‘</li><li>ä¿å­˜æ•°æ®çš„çŠ¶æ€</li></ol><p><strong>Viewï¼šè§†å›¾</strong></p><ol><li>æ˜¾ç¤ºé¡µé¢</li></ol><p>Model2è¿™æ ·ä¸ä»…æé«˜çš„ä»£ç çš„å¤ç”¨ç‡ä¸é¡¹ç›®çš„æ‰©å±•æ€§ï¼Œä¸”å¤§å¤§é™ä½äº†é¡¹ç›®çš„ç»´æŠ¤æˆæœ¬ã€‚Model1æ¨¡å¼çš„å®ç°æ¯”è¾ƒç®€å•ï¼Œé€‚ç”¨äºå¿«é€Ÿå¼€å‘å°è§„æ¨¡é¡¹ç›®ï¼Œ==Model1ä¸­JSPé¡µé¢èº«å…¼Viewå’ŒControllerä¸¤ç§è§’è‰²ï¼Œå°†æ§åˆ¶é€»è¾‘å’Œè¡¨ç°é€»è¾‘æ··æ‚åœ¨ä¸€èµ·==ï¼Œä»è€Œå¯¼è‡´ä»£ç çš„é‡ç”¨æ€§éå¸¸ä½ï¼Œå¢åŠ äº†åº”ç”¨çš„æ‰©å±•æ€§å’Œç»´æŠ¤çš„éš¾åº¦ã€‚Model2æ¶ˆé™¤äº†Model1çš„ç¼ºç‚¹ã€‚</p><h3 id="1-4-å›é¡¾Servlet"><a href="#1-4-å›é¡¾Servlet" class="headerlink" title="1.4 å›é¡¾Servlet"></a>1.4 å›é¡¾Servlet</h3><ol><li>æ–°å»ºä¸€ä¸ªMavenå·¥ç¨‹å½“ä½œçˆ¶å·¥ç¨‹ï¼pomä¾èµ–ï¼</li></ol><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.13<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-webmvc<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.3.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>javax.servlet<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>servlet-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.5<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>jstl<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jstl<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span></code></pre><ol start="2"><li><p>æ–°å»ºä¸€ä¸ªMoudle:SpringMVC-02-servlet,æ·»åŠ WebAPPçš„æ”¯æŒï¼</p></li><li><p>å¯¼å…¥servletå’Œjspçš„jarä¾èµ–</p></li></ol><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.11<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>javax.servlet<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>servlet-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.5<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>javax.servlet.jsp<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jsp-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span></code></pre><ol start="4"><li>ç¼–å†™ä¸€ä¸ªServletç±»ï¼Œç”¨æ¥å¤„ç†ç”¨æˆ·çš„è¯·æ±‚</li></ol><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.wen.servlet;<span class="hljs-keyword">import</span> javax.servlet.ServletException;<span class="hljs-keyword">import</span> javax.servlet.http.HttpServlet;<span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;<span class="hljs-keyword">import</span> javax.servlet.http.HttpServletResponse;<span class="hljs-keyword">import</span> java.io.IOException;<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HelloServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>&#123;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">HelloServlet</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-keyword">super</span>();    &#125;    <span class="hljs-meta">@Override</span>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;        <span class="hljs-comment">//å–å¾—å‚æ•°</span>        String method = req.getParameter(<span class="hljs-string">&quot;method&quot;</span>);        <span class="hljs-keyword">if</span> (method.equals(<span class="hljs-string">&quot;add&quot;</span>))&#123;            req.getSession().setAttribute(<span class="hljs-string">&quot;msg&quot;</span>,<span class="hljs-string">&quot;æ‰§è¡Œäº†addæ–¹æ³•&quot;</span>);        &#125;        <span class="hljs-keyword">if</span> (method.equals(<span class="hljs-string">&quot;delete&quot;</span>))&#123;            req.getSession().setAttribute(<span class="hljs-string">&quot;msg&quot;</span>,<span class="hljs-string">&quot;æ‰§è¡Œäº†deleteæ–¹æ³•&quot;</span>);        &#125;        <span class="hljs-comment">//ä¸šåŠ¡é€»è¾‘</span>        <span class="hljs-comment">//è§†å›¾è·³è½¬</span>        req.getRequestDispatcher(<span class="hljs-string">&quot;/WEB-INF/jsp/hello.jsp&quot;</span>).forward(req,resp);    &#125;    <span class="hljs-meta">@Override</span>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doPost</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;        doGet(req,resp);    &#125;&#125;</code></pre><ol start="5"><li>ç¼–å†™hello.jspï¼Œåœ¨WEB-INFç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªjspçš„æ–‡ä»¶å¤¹ï¼Œæ–°å»ºhello.jsp</li></ol><pre><code class="hljs jsp">&lt;%@ page contentType=<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="hljs-string">&quot;java&quot;</span> %&gt;&lt;html&gt;&lt;head&gt;    &lt;title&gt;Kuangshen&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;%--è·å–msg--%&gt;&lt;%=session.getAttribute(<span class="hljs-string">&quot;msg&quot;</span>)%&gt;&lt;/body&gt;&lt;/html&gt;</code></pre><ol start="6"><li>åœ¨web.xmlä¸­æ³¨å†ŒServlet</li></ol><pre><code class="hljs xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">web-app</span> <span class="hljs-meta-keyword">PUBLIC</span></span><span class="hljs-meta"> <span class="hljs-meta-string">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span></span><span class="hljs-meta"> <span class="hljs-meta-string">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> &gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">web-app</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">display-name</span>&gt;</span>Archetype Created Web Application<span class="hljs-tag">&lt;/<span class="hljs-name">display-name</span>&gt;</span><span class="hljs-comment">&lt;!--åœ¨web.xmlä¸­æ³¨å†Œservlet--&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>HelloServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>com.wen.servlet.HelloServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span>  <span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>HelloServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/user<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span>  <span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">welcome-file-list</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">welcome-file</span>&gt;</span>index.jsp<span class="hljs-tag">&lt;/<span class="hljs-name">welcome-file</span>&gt;</span>  <span class="hljs-tag">&lt;/<span class="hljs-name">welcome-file-list</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">web-app</span>&gt;</span></code></pre><ol start="7"><li>é…ç½®Tomcatï¼Œå¹¶å¯åŠ¨æµ‹è¯•</li></ol><img src="/images/SpringMVC/image-20201211223600205.png" alt="image-20201211223600205" style="zoom:50%;" /><h2 id="2-ä»€ä¹ˆæ˜¯SpringMVC"><a href="#2-ä»€ä¹ˆæ˜¯SpringMVC" class="headerlink" title="2. ä»€ä¹ˆæ˜¯SpringMVC"></a>2. ä»€ä¹ˆæ˜¯SpringMVC</h2><h3 id="2-1-æ¦‚è¿°"><a href="#2-1-æ¦‚è¿°" class="headerlink" title="2.1 æ¦‚è¿°"></a>2.1 æ¦‚è¿°</h3><p>SpringMVCæ˜¯Spring Frameworkçš„ä¸€éƒ¨åˆ†ï¼Œæ˜¯åŸºäºJavaå®ç°MVCçš„è½»é‡çº§Webæ¡†æ¶ã€‚</p><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#spring-web">https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#spring-web</a></p><p> Spring MVCçš„ç‰¹ç‚¹ï¼š</p><ul><li>è½»é‡çº§ï¼Œç®€å•æ˜“å­¦</li><li>é«˜æ•ˆ , åŸºäºè¯·æ±‚å“åº”çš„MVCæ¡†æ¶</li><li>ä¸Springå…¼å®¹æ€§å¥½ï¼Œæ— ç¼ç»“åˆ</li><li>çº¦å®šä¼˜äºé…ç½®</li><li>åŠŸèƒ½å¼ºå¤§ï¼šRESTfulã€æ•°æ®éªŒè¯ã€æ ¼å¼åŒ–ã€æœ¬åœ°åŒ–ã€ä¸»é¢˜ç­‰</li><li>ç®€æ´çµæ´»</li></ul><p>Springçš„webæ¡†æ¶å›´ç»•<strong>DispatcherServlet</strong> [è°ƒåº¦Servlet] è®¾è®¡ã€‚</p><p>==DispatcherServletçš„ä½œç”¨æ˜¯å°†è¯·æ±‚åˆ†å‘åˆ°ä¸åŒçš„å¤„ç†å™¨ã€‚==ä»Spring 2.5å¼€å§‹ï¼Œä½¿ç”¨Java 5æˆ–è€…ä»¥ä¸Šç‰ˆæœ¬çš„ç”¨æˆ·å¯ä»¥é‡‡ç”¨åŸºäºæ³¨è§£å½¢å¼è¿›è¡Œå¼€å‘ï¼Œååˆ†ç®€æ´ï¼›</p><p>æ­£å› ä¸ºSpringMVCå¥½ï¼Œç®€å•ï¼Œä¾¿æ·ï¼Œæ˜“å­¦ï¼Œå¤©ç”Ÿå’ŒSpringæ— ç¼é›†æˆ(ä½¿ç”¨SpringIoCå’ŒAop) ï¼Œä½¿ç”¨çº¦å®šä¼˜äºé…ç½®ã€‚èƒ½å¤Ÿè¿›è¡Œç®€å•çš„junitæµ‹è¯•ã€‚æ”¯æŒRestfulé£æ ¼ã€‚å¼‚å¸¸å¤„ç†ï¼Œæœ¬åœ°åŒ–ï¼Œå›½é™…åŒ–ï¼Œæ•°æ®éªŒè¯ï¼Œç±»å‹è½¬æ¢ï¼Œæ‹¦æˆªå™¨ç­‰ç­‰â€¦â€¦æ‰€ä»¥æˆ‘ä»¬è¦å­¦ä¹ ã€‚<strong>æœ€é‡è¦çš„ä¸€ç‚¹è¿˜æ˜¯ç”¨çš„äººå¤š , ä½¿ç”¨çš„å…¬å¸å¤š .</strong> </p><h3 id="2-2-ä¸­å¿ƒæ§åˆ¶å™¨"><a href="#2-2-ä¸­å¿ƒæ§åˆ¶å™¨" class="headerlink" title="2.2 ä¸­å¿ƒæ§åˆ¶å™¨"></a>2.2 ä¸­å¿ƒæ§åˆ¶å™¨</h3><p>Springçš„webæ¡†æ¶å›´ç»•DispatcherServletè®¾è®¡ã€‚DispatcherServletçš„ä½œç”¨æ˜¯å°†è¯·æ±‚åˆ†å‘åˆ°ä¸åŒçš„å¤„ç†å™¨ã€‚ä»Spring 2.5å¼€å§‹ï¼Œä½¿ç”¨Java 5æˆ–è€…ä»¥ä¸Šç‰ˆæœ¬çš„ç”¨æˆ·å¯ä»¥é‡‡ç”¨åŸºäºæ³¨è§£çš„controllerå£°æ˜æ–¹å¼ã€‚</p><p>Spring MVCæ¡†æ¶åƒå…¶ä»–çš„MVCæ¡†æ¶ä¸€æ ·ï¼Œä»¥è¯·æ±‚ä¸ºé©±åŠ¨ï¼Œå›´ç»•ä¸€ä¸ªä¸­å¿ƒServletåˆ†é…è¯·æ±‚åŠæä¾›å…¶ä»–åŠŸèƒ½ï¼ŒDispatcherServletæ˜¯ä¸€ä¸ªå®é™…çš„Servlet,å®ƒç»§æ‰¿HttpServletåŸºç±»ã€‚</p><p><img src="/images/SpringMVC/image-20201212191843914.png" alt="image-20201212191843914"></p><p><strong>SpringMVCçš„åŸç†ï¼š</strong></p><p><img src="/images/SpringMVC/640" alt="å›¾ç‰‡"></p><p>å‘èµ·è¯·æ±‚ï¼Œå½“è¯·æ±‚è¢«å‰ç½®çš„æ§åˆ¶å™¨æ‹¦æˆªåˆ°æ—¶ï¼Œæ ¹æ®è¯·æ±‚å‚æ•°ç”Ÿæˆä»£ç†è¯·æ±‚ï¼Œæ‰¾åˆ°è¯·æ±‚å¯¹åº”çš„å®é™…æ§åˆ¶å™¨ï¼Œã€æ§åˆ¶å™¨å¤„ç†è¯·æ±‚ï¼Œè°ƒç”¨ä¸šåŠ¡å¯¹è±¡ï¼Œåˆ›å»ºæ•°æ®æ¨¡å‹ï¼Œè®¿é—®æ•°æ®åº“ï¼Œå°†æ¨¡å‹å“åº”ç»™ä¸­å¿ƒæ§åˆ¶å™¨ï¼Œã€‘æ§åˆ¶å™¨ä½¿ç”¨æ¨¡å‹ä¸è§†å›¾æ¸²æŸ“è§†å›¾ç»“æœï¼Œå°†ç»“æœè¿”å›ç»™ä¸­å¿ƒæ§åˆ¶å™¨ï¼Œå†å°†ç»“æœè¿”å›ç»™è¯·æ±‚è€…ã€‚</p><h3 id="2-3-SpringMVCæ‰§è¡ŒåŸç†"><a href="#2-3-SpringMVCæ‰§è¡ŒåŸç†" class="headerlink" title="2.3 SpringMVCæ‰§è¡ŒåŸç†"></a>2.3 SpringMVCæ‰§è¡ŒåŸç†</h3><p><img src="/images/SpringMVC/image-20201212192824766.png" alt="image-20201212192824766"></p><p>å›¾ä¸ºSpringMVCçš„ä¸€ä¸ªè¾ƒå®Œæ•´çš„æµç¨‹å›¾ï¼Œå®çº¿è¡¨ç¤ºSpringMVCæ¡†æ¶æä¾›çš„æŠ€æœ¯ï¼Œä¸éœ€è¦å¼€å‘è€…å®ç°ï¼Œè™šçº¿è¡¨ç¤ºéœ€è¦å¼€å‘è€…å®ç°ã€‚</p><p><strong>åˆ†ææµç¨‹ï¼š</strong></p><ol><li><p>DispatcherServletè¡¨ç¤ºå‰ç½®æ§åˆ¶å™¨ï¼Œæ˜¯æ•´ä¸ªSpringMVCçš„æ§åˆ¶ä¸­å¿ƒã€‚</p><p>ç”¨æˆ·å‘å‡ºè¯·æ±‚ï¼ŒDispatcherServletæ¥å—è¯·æ±‚å¹¶æ‹¦æˆªè¯·æ±‚ã€‚</p><p>æˆ‘ä»¬å‡è®¾è¯·æ±‚çš„urlä¸º : <a href="http://localhost:8080/SpringMVC/hello">http://localhost:8080/SpringMVC/hello</a></p><p>urlåˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼š</p><p> <a href="http://localhost:8080ï¼šæœåŠ¡å™¨åŸŸå">http://localhost:8080ï¼šæœåŠ¡å™¨åŸŸå</a></p><p>SpringMVC: éƒ¨ç½²åœ¨æœåŠ¡å™¨ä¸Šçš„webç«™ç‚¹</p><p>helloï¼šè¡¨ç¤ºæ§åˆ¶å™¨</p><p>é€šè¿‡åˆ†æï¼Œå¦‚ä¸Šurlè¡¨ç¤ºä¸ºï¼šè¯·æ±‚ä½äºæœåŠ¡å™¨localhost:8080ä¸Šçš„SpringMVCç«™ç‚¹çš„helloæ§åˆ¶å™¨ã€‚</p></li><li><p>HandlerMappingä¸ºå¤„ç†å™¨æ˜ å°„ã€‚DispatcherServletè°ƒç”¨HandlerMappingï¼ŒHandlerMappingæ ¹æ®è¯·æ±‚urlæŸ¥æ‰¾Handlerã€‚</p></li><li><p>HandlerExecutionè¡¨ç¤ºå…·ä½“çš„Handler,å…¶ä¸»è¦ä½œç”¨æ˜¯æ ¹æ®urlæŸ¥æ‰¾æ§åˆ¶å™¨ï¼Œå¦‚ä¸Šurlè¢«æŸ¥æ‰¾æ§åˆ¶å™¨ä¸ºï¼šhelloã€‚</p></li><li><p>HandlerExecutionå°†è§£æåçš„ä¿¡æ¯ä¼ é€’ç»™==DispatcherServlet==,å¦‚è§£ææ§åˆ¶å™¨æ˜ å°„ç­‰ã€‚</p></li><li><p>HandlerAdapterè¡¨ç¤ºå¤„ç†å™¨é€‚é…å™¨ï¼Œå…¶æŒ‰ç…§ç‰¹å®šçš„è§„åˆ™å»æ‰§è¡ŒHandlerã€‚</p></li><li><p>Handlerè®©å…·ä½“çš„Controlleræ‰§è¡Œã€‚</p></li><li><p>Controllerå°†å…·ä½“çš„æ‰§è¡Œä¿¡æ¯è¿”å›ç»™HandlerAdapter,å¦‚ModelAndViewã€‚</p></li><li><p>HandlerAdapterå°†è§†å›¾é€»è¾‘åæˆ–æ¨¡å‹ä¼ é€’ç»™==DispatcherServlet==ã€‚</p></li><li><p>DispatcherServletè°ƒç”¨è§†å›¾è§£æå™¨(ViewResolver)æ¥è§£æHandlerAdapterä¼ é€’çš„é€»è¾‘è§†å›¾åã€‚</p></li><li><p>è§†å›¾è§£æå™¨å°†è§£æçš„é€»è¾‘è§†å›¾åä¼ ç»™==DispatcherServlet==ã€‚</p></li><li><p>DispatcherServletæ ¹æ®è§†å›¾è§£æå™¨è§£æçš„è§†å›¾ç»“æœï¼Œè°ƒç”¨å…·ä½“çš„è§†å›¾ã€‚</p></li><li><p>æœ€ç»ˆè§†å›¾å‘ˆç°ç»™ç”¨æˆ·ã€‚</p></li></ol><h2 id="3-ç¬¬ä¸€ä¸ªMVCç¨‹åº"><a href="#3-ç¬¬ä¸€ä¸ªMVCç¨‹åº" class="headerlink" title="3. ç¬¬ä¸€ä¸ªMVCç¨‹åº"></a>3. ç¬¬ä¸€ä¸ªMVCç¨‹åº</h2><p>//to be continued</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Typoraæ•°å­¦ç¬¦å·å¤§å…¨</title>
    <link href="/2020/12/08/Typora%E6%95%B0%E5%AD%A6%E7%AC%A6%E5%8F%B7/"/>
    <url>/2020/12/08/Typora%E6%95%B0%E5%AD%A6%E7%AC%A6%E5%8F%B7/</url>
    
    <content type="html"><![CDATA[<p><img src="/images/Typora%E6%95%B0%E5%AD%A6%E7%AC%A6%E5%8F%B7/image-20201208090455419.png" alt="image-20201208090455419"></p><p><img src="/images/Typora%E6%95%B0%E5%AD%A6%E7%AC%A6%E5%8F%B7/image-20201208090509897.png" alt="image-20201208090509897"></p><p><img src="/images/Typora%E6%95%B0%E5%AD%A6%E7%AC%A6%E5%8F%B7/image-20201208090536704.png" alt="image-20201208090536704"></p><p><img src="/images/Typora%E6%95%B0%E5%AD%A6%E7%AC%A6%E5%8F%B7/image-20201208090736722.png" alt="image-20201208090736722"></p><p><img src="/images/Typora%E6%95%B0%E5%AD%A6%E7%AC%A6%E5%8F%B7/image-20201208090749373.png" alt="image-20201208090749373"></p><p><img src="/images/Typora%E6%95%B0%E5%AD%A6%E7%AC%A6%E5%8F%B7/image-20201208090804451.png" alt="image-20201208090804451"></p><p><img src="/images/Typora%E6%95%B0%E5%AD%A6%E7%AC%A6%E5%8F%B7/image-20201208090823996.png" alt="image-20201208090823996"></p><p><img src="/images/Typora%E6%95%B0%E5%AD%A6%E7%AC%A6%E5%8F%B7/image-20201208090836949.png" alt="image-20201208090836949"></p><p><img src="/images/Typora%E6%95%B0%E5%AD%A6%E7%AC%A6%E5%8F%B7/image-20201208090855679.png" alt="image-20201208090855679"></p><p><img src="/images/Typora%E6%95%B0%E5%AD%A6%E7%AC%A6%E5%8F%B7/image-20201208090907095.png" alt="image-20201208090907095"></p><p><img src="/images/Typora%E6%95%B0%E5%AD%A6%E7%AC%A6%E5%8F%B7/image-20201208090915377.png" alt="image-20201208090915377"></p><p><img src="/images/Typora%E6%95%B0%E5%AD%A6%E7%AC%A6%E5%8F%B7/image-20201208090927563.png" alt="image-20201208090927563"></p><p><img src="/images/Typora%E6%95%B0%E5%AD%A6%E7%AC%A6%E5%8F%B7/image-20201208090936528.png" alt="image-20201208090936528"></p><p><img src="/images/Typora%E6%95%B0%E5%AD%A6%E7%AC%A6%E5%8F%B7/image-20201208090949159.png" alt="image-20201208090949159"></p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Hexoæ·»åŠ ä¸€è¨€æˆ–Rainbow</title>
    <link href="/2020/11/28/Hexo%E6%B7%BB%E5%8A%A0%E4%B8%80%E8%A8%80%E6%88%96Rainbow/"/>
    <url>/2020/11/28/Hexo%E6%B7%BB%E5%8A%A0%E4%B8%80%E8%A8%80%E6%88%96Rainbow/</url>
    
    <content type="html"><![CDATA[<h2 id="1-æ·»åŠ ä¸€è¨€"><a href="#1-æ·»åŠ ä¸€è¨€" class="headerlink" title="1. æ·»åŠ ä¸€è¨€"></a>1. æ·»åŠ ä¸€è¨€</h2><p>æ·»åŠ ä¸€è¨€å¯ä»¥å‚è€ƒå¦ä¸€ç¯‡æ–‡ç« ã€‚</p><p>åœ°å€ï¼š<a href="https://pxxyyz.com/posts/30454/">https://pxxyyz.com/posts/30454/</a></p><h2 id="2-æ·»åŠ Rainbow"><a href="#2-æ·»åŠ Rainbow" class="headerlink" title="2.æ·»åŠ Rainbow"></a>2.æ·»åŠ Rainbow</h2><p>å‚è€ƒæ–‡æ¡£ï¼š<a href="https://rainbow.eatrice.top/About">https://rainbow.eatrice.top/About</a></p><p>é¦–å…ˆï¼Œè¿›è¡Œå¦‚ä¸‹é…ç½®ï¼šè¿™ä¸ªæ˜¯blogç›®å½•ä¸‹çš„_config.ymlæ–‡ä»¶</p><p><img src="/images/Hexo%E6%B7%BB%E5%8A%A0%E4%B8%80%E8%A8%80%E6%88%96Rainbow/image-20201128153713586.png" alt="image-20201128153713586"></p><p>ç„¶åï¼Œä¿®æ”¹layout.ejs</p><p><img src="/images/Hexo%E6%B7%BB%E5%8A%A0%E4%B8%80%E8%A8%80%E6%88%96Rainbow/image-20201128153849837.png" alt="image-20201128153849837"></p><p>åœ¨<span>ä¸‹é¢æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</p><p><img src="/images/Hexo%E6%B7%BB%E5%8A%A0%E4%B8%80%E8%A8%80%E6%88%96Rainbow/image-20201128153936020.png" alt="image-20201128153936020"></p><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;rainbow&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&#x27;&#x27;</span>&gt;</span>ğŸŒˆ è·å–ä¸­...<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></code></pre><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">fetch(<span class="hljs-string">&#x27;https://api.eatrice.top&#x27;</span>)</span><span class="javascript">  .then(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> response.json())</span><span class="javascript">  .then(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> &#123;</span><span class="javascript">    <span class="hljs-keyword">var</span> rainbow = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;rainbow&#x27;</span>);</span>    rainbow.innerHTML = data.Content;<span class="javascript">    rainbow.href = <span class="hljs-string">&quot;https://rainbow.eatrice.top/?ID=&quot;</span> + data.ID;</span>  &#125;)<span class="javascript">  .catch(<span class="hljs-built_in">console</span>.error)</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre><p>æœ€åï¼Œæäº¤åˆ°githubï¼Œå°±å¯ä»¥çœ‹åˆ°æ•ˆæœå•¦ï¼</p><p><img src="/images/Hexo%E6%B7%BB%E5%8A%A0%E4%B8%80%E8%A8%80%E6%88%96Rainbow/image-20201128154045441.png" alt="image-20201128154045441"></p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Hexoå’ŒTyporaçš„ç»“åˆä½¿ç”¨</title>
    <link href="/2020/11/28/Hexo%E5%92%8CTypora%E7%9A%84%E7%BB%93%E5%90%88%E4%BD%BF%E7%94%A8/"/>
    <url>/2020/11/28/Hexo%E5%92%8CTypora%E7%9A%84%E7%BB%93%E5%90%88%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p>æ­å»ºå¥½Hexoåšå®¢ä¹‹åï¼Œè¯¥æ€ä¹ˆå†™åšå®¢å‘¢ï¼Ÿè¿™æ—¶å€™ï¼ŒTyporaç™»åœºäº†ï¼Œè¿™æ˜¯ä¸€æ¬¾å…è´¹ç®€æ˜“æ²¡å¹¿å‘Šçš„markdownç¼–è¾‘å™¨äº†ã€‚</p><p>å…¶å®ï¼Œä¸¤è€…ç»“åˆä½¿ç”¨åªéœ€è¦è®¾ç½®å¥½å›¾ç‰‡çš„ä¿å­˜è·¯å¾„å°±å¯ä»¥äº†ã€‚</p><p>æˆ‘ä»¬éƒ½çŸ¥é“æ‰€æœ‰çš„åšå®¢æ–‡ä»¶éƒ½ä¿å­˜åœ¨/_post/æ–‡ä»¶å¤¹ä¸‹ã€‚</p><p><img src="/images/Hexo%E5%92%8CTypora%E7%9A%84%E7%BB%93%E5%90%88%E4%BD%BF%E7%94%A8/image-20201128152214573.png" alt="image-20201128152214573"></p><p>æˆ‘ä»¬éœ€è¦åœ¨blog/sourceä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªä¸_poståŒçº§çš„æ–‡ä»¶å¤¹imagesæ–‡ä»¶å¤¹ï¼Œç”¨äºå­˜æ”¾åšå®¢å¯¹åº”çš„å›¾ç‰‡ã€‚</p><p><img src="/images/Hexo%E5%92%8CTypora%E7%9A%84%E7%BB%93%E5%90%88%E4%BD%BF%E7%94%A8/image-20201128152343888.png" alt="image-20201128152343888"></p><p>ä¸‹é¢æ¥å¯¹Typoraè¿›è¡Œè®¾ç½®ã€‚</p><p>æ‰“å¼€Typoraçš„æ–‡ä»¶&gt;åå¥½é…ç½®ã€‚</p><p><img src="/images/Hexo%E5%92%8CTypora%E7%9A%84%E7%BB%93%E5%90%88%E4%BD%BF%E7%94%A8/image-20201128152545253.png" alt="image-20201128152545253"></p><p>è¿™æ ·çš„è¯æ‰€æœ‰çš„åšå®¢ä¸­çš„å›¾ç‰‡éƒ½å°†ä¼šä¿å­˜åˆ° <code>/source/images/è¯¥åšå®¢mdæ–‡ä»¶å/å›¾ç‰‡åç§°</code>ã€‚</p><p>ä½†æ˜¯ä»…ä»…è¿™æ ·è®¾ç½®è¿˜ä¸å¤Ÿï¼Œè¿™æ ·è®¾ç½®åœ¨typoraä¸­å€’æ˜¯èƒ½çœ‹å›¾ç‰‡äº†ï¼Œä½†æ˜¯ä½¿ç”¨çš„å´æ˜¯ç›¸å¯¹äºå½“å‰mdæ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„ï¼Œå¯æ˜¯å¦‚æœå¯åŠ¨hexoï¼Œæ˜¯è¦ç”¨æœåŠ¡å™¨è®¿é—®çš„ï¼Œè€ŒæœåŠ¡å™¨æ˜¾ç„¶æ— æ³•æ ¹æ®è¿™ä¸ªç›¸å¯¹è·¯å¾„æ­£ç¡®è®¿é—®åˆ°å›¾ç‰‡ï¼Œå› æ­¤è¿˜éœ€è¦åœ¨typoraä¸­è¿›è¡Œè¿›ä¸€æ­¥è®¾ç½®ã€‚</p><p>æ¯æ¬¡ç¼–å†™åšå®¢æ—¶ï¼Œéœ€è¦è¿›è¡Œè®¾ç½®ã€‚åœ¨typoraèœå•æ ç‚¹å‡» <code>æ ¼å¼-&gt;å›¾åƒ-&gt;è®¾ç½®å›¾ç‰‡æ ¹ç›®å½•</code>ï¼Œå°†<code>blog/source</code>ä½œä¸ºå…¶æ ¹ç›®å½•å³å¯ã€‚</p><p><strong>ä¸€å®šè¦å…ˆè®¾ç½®äº†å›¾ç‰‡æ ¹ç›®å½•åå†æ’å…¥å›¾ç‰‡ï¼Œå¦åˆ™å›¾ç‰‡è·¯å¾„ä¼šä¸æ­£ç¡®ï¼</strong></p><p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜éœ€è¦è®¾ç½®ä¸‹é¢ä¸¤ä¸ªé€‰é¡¹ï¼š</p><p><img src="/images/Hexo%E5%92%8CTypora%E7%9A%84%E7%BB%93%E5%90%88%E4%BD%BF%E7%94%A8/image-20201128152748662.png" alt="image-20201128152748662"></p><p><strong>titleæ—¶å¿…é¡»è®¾ç½®çš„ï¼Œä¸ç„¶hexoæ²¡åŠæ³•è¯†åˆ«åšå®¢çš„åç§°ï¼ï¼</strong></p><p>å†™å®Œåšå®¢ä¹‹åï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä¸‰ä¸ªå‘½ä»¤è¿›è¡Œæäº¤åˆ°githubã€‚</p><pre><code class="hljs bash">hexo chexo ghexo d</code></pre>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>æ­å»ºHexoåšå®¢</title>
    <link href="/2020/11/28/%E6%90%AD%E5%BB%BAHexo%E5%8D%9A%E5%AE%A2/"/>
    <url>/2020/11/28/%E6%90%AD%E5%BB%BAHexo%E5%8D%9A%E5%AE%A2/</url>
    
    <content type="html"><![CDATA[<p>è½¬è½½äºï¼šè½¬è½½ï¼š<a href="https://www.bilibili.com/video/BV1Yb411a7ty?from=search&amp;seid=929421542723130144">https://www.bilibili.com/video/BV1Yb411a7ty?from=search&amp;seid=929421542723130144</a></p><h2 id="1-å®‰è£…node-js"><a href="#1-å®‰è£…node-js" class="headerlink" title="1. å®‰è£…node.js"></a>1. å®‰è£…node.js</h2><p>é¦–å…ˆå®‰è£…Node.jsï¼Œå¯ä»¥è‡ªè¡Œç™¾åº¦æœç´¢</p><p>e.g.</p><p>ä¸‹è½½åœ°å€ï¼š<a href="https://nodejs.org/zh-cn/download/">https://nodejs.org/zh-cn/download/</a></p><p>æ ¹æ®è‡ªå·±ç”µè„‘ç³»ç»ŸåŠä½æ•°é€‰æ‹©ï¼Œæˆ‘è¿™é‡Œé€‰æ‹©<code>windows64ä½.msi</code>æ ¼å¼å®‰è£…åŒ…ã€‚</p><p><code>.msi</code>å’Œ<code>.zip</code>æ ¼å¼åŒºåˆ«ï¼š</p><ul><li><code>.msi</code>æ˜¯Windows installerå¼€å‘å‡ºæ¥çš„ç¨‹åºå®‰è£…æ–‡ä»¶ï¼Œå®ƒå¯ä»¥è®©ä½ å®‰è£…ï¼Œä¿®æ”¹ï¼Œå¸è½½ä½ æ‰€å®‰è£…çš„ç¨‹åºã€‚è¯´ç™½äº†.msiå°±æ˜¯Windows installerçš„æ•°æ®åŒ…ï¼ŒæŠŠæ‰€æœ‰å’Œå®‰è£…æ–‡ä»¶ç›¸å…³çš„å†…å®¹å°è£…åœ¨ä¸€ä¸ªåŒ…é‡Œã€‚</li><li><code>.zip</code>æ˜¯ä¸€ä¸ªå‹ç¼©åŒ…ï¼Œè§£å‹ä¹‹åå³å¯ï¼Œä¸éœ€è¦å®‰è£…ã€‚ä½†æ˜¯ç¼ºç‚¹æ˜¯éœ€è¦è‡ªå·±é…ç½®ç¯å¢ƒå˜é‡ã€‚</li></ul><img src="/images/%E6%90%AD%E5%BB%BAHexo%E5%8D%9A%E5%AE%A2/image-20201128143905680.png" alt="image-20201128143905680" style="zoom:50%;" /><p>ä¸‹è½½å®Œæˆåï¼ŒåŒå‡»å®‰è£…åŒ…ï¼Œå¼€å§‹å®‰è£…ï¼Œä¸€ç›´ç‚¹<code>next</code>å³å¯ï¼Œå®‰è£…è·¯å¾„é»˜è®¤åœ¨<code>C:\Program Files</code>ä¸‹ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰ä¿®æ”¹ã€‚</p><p><img src="/images/%E6%90%AD%E5%BB%BAHexo%E5%8D%9A%E5%AE%A2/14070366-a969da838224343f" alt="img"></p><p>ï¼ˆç½‘å›¾ï¼‰</p><p><img src="/images/%E6%90%AD%E5%BB%BAHexo%E5%8D%9A%E5%AE%A2/14070366-ce5dd1d718fca7d9" alt="img"></p><p>ï¼ˆç½‘å›¾ï¼‰</p><p>ç›´æ¥ä¸€ç›´nextï¼ŒçŸ¥é“ç»“æŸå°±å¯ä»¥ã€‚</p><h2 id="2-å®‰è£…gitå¹¶éƒ¨ç½²åˆ°github"><a href="#2-å®‰è£…gitå¹¶éƒ¨ç½²åˆ°github" class="headerlink" title="2.å®‰è£…gitå¹¶éƒ¨ç½²åˆ°github"></a>2.å®‰è£…gitå¹¶éƒ¨ç½²åˆ°github</h2><ol><li><strong>æŸ¥çœ‹nodeåŠnpmç‰ˆæœ¬ã€‚</strong></li></ol><p><img src="/images/%E6%90%AD%E5%BB%BAHexo%E5%8D%9A%E5%AE%A2/image-20201128144241089.png" alt="image-20201128144241089"></p><p>ç°åœ¨æ˜¯å…¼å®¹çš„ã€‚å®¹æ˜“å‡ºçš„é—®é¢˜æ˜¯ï¼šnpmä¸nodeç‰ˆæœ¬ä¸ç›¸å®¹ã€‚</p><p>ä¸ç›¸å®¹çš„è¯ï¼Œè¯»è€…å¯ä»¥å…ˆä»ç½‘ä¸Šæœç´¢ç›¸å…³çš„è§£å†³æ–¹æ³•ï¼Œæœ‰å¤§é‡çš„è§£å†³æ–¹æ³•ã€‚</p><p>æˆ‘è¿™é‡Œå‡ºç°çš„é—®é¢˜æ¯”è¾ƒéš¾æ‰¾ï¼Œå•ç‹¬æ‹¿å‡ºæ¥è¯´æ˜ä¸€ä¸‹<img src="/images/%E6%90%AD%E5%BB%BAHexo%E5%8D%9A%E5%AE%A2/image-20201128144505044.png" alt="image-20201128144505044"></p><p><strong>é—®é¢˜ï¼š</strong></p><p>åœ¨è¿è¡Œnpmå‘½ä»¤æ—¶æ€»ä¼šå‡ºç°å¦‚ä¸‹æŠ¥é”™ï¼š</p><p><img src="/images/%E6%90%AD%E5%BB%BAHexo%E5%8D%9A%E5%AE%A2/2020060910034833.PNG" alt="img"></p><p>å‘ç°æ˜¯nodeç‰ˆæœ¬å’Œnpmç‰ˆæœ¬ä¸åŒ¹é…é€ æˆçš„ï¼Œäºæ˜¯æƒ³ä½¿ç”¨npm uninstall -g npmåˆ é™¤ä¹‹åé‡æ–°å®‰è£…å¯¹åº”ç‰ˆæœ¬çš„npmã€‚ä½†æ˜¯è®©äººå¤´ç–¼çš„æ˜¯ï¼š</p><p><img src="/images/%E6%90%AD%E5%BB%BAHexo%E5%8D%9A%E5%AE%A2/20200609102006627.PNG" alt="img"></p><p>å¹¶ä¸”åœ¨æ‰§è¡Œå…¶ä»–npmå‘½ä»¤æ—¶ä¸€ç›´æŠ¥npm does not support Node.js v12.18.0çš„é”™è¯¯ï¼Œå³ä½¿æ˜¯åœ¨æ§åˆ¶é¢ç‰ˆåˆ é™¤äº†nodeä¹‹åå†ä»å®˜ç½‘ä¸‹è½½åŒ…å«åŒ¹é…ç‰ˆæœ¬çš„nodeï¼Œnpmçš„ç‰ˆæœ¬ä¹Ÿè¿˜æ˜¯ä¸ä¼šåŒ¹é…ã€‚</p><p><strong>è§£å†³æ–¹æ³•ï¼š</strong></p><p>æˆ‘å‘ç°æˆ‘ä¹‹å‰å®‰è£…è¿‡nodeï¼Œå¸è½½ä¹‹åï¼ŒåŸæ¥çš„npmç¯å¢ƒå¹¶æ²¡æœ‰åˆ é™¤ï¼Œæ‰€ä»¥åªéœ€è¦å°†ä¸‹é¢çš„ä¸¤ä¸ªæ–‡ä»¶åˆ é™¤å°±å¯ä»¥äº†ã€‚</p><p><img src="/images/%E6%90%AD%E5%BB%BAHexo%E5%8D%9A%E5%AE%A2/8DI2VH%7D@_L%5D%60Q65IJM%60VDJ.png" alt="img"></p><ol start="2"><li>å®‰è£…æ·˜å®çš„cnpmç®¡ç†å™¨</li></ol><p>è¿™æ ·è¿è¡Œé€Ÿåº¦æ¯”è¾ƒå¿«ã€‚</p><pre><code class="hljs bash">npm install -g cnpm --registry=http://registry.npm.taobao.org</code></pre><p>æŸ¥çœ‹cnpmç‰ˆæœ¬ï¼š</p><pre><code class="hljs bash">cnpm -v</code></pre><ol start="3"><li>å®‰è£…hexoæ¡†æ¶</li></ol><pre><code class="hljs bash">cnpm install -g hexo-cli</code></pre><p>æŸ¥çœ‹hexoç‰ˆæœ¬</p><pre><code class="hljs bash">hexo -v</code></pre><ol start="4"><li>æ­å»ºåšå®¢</li></ol><p>å¯ä»¥è‡ªå·±é€‰æ‹©è¯¥æ–‡ä»¶å¤¹æ‰€åœ¨çš„ç›˜ï¼Œä¹‹åæœ‰å…³åšå®¢æ‰€æœ‰çš„ä¸œè¥¿ï¼Œéƒ½ä¼šå­˜æ”¾åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ã€‚</p><pre><code class="hljs bash">mkdir blog</code></pre><p>è¿›å…¥ç›®å½•ï¼š</p><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> blog</code></pre><p>åˆå§‹åŒ–åšå®¢ï¼š</p><pre><code class="hljs bash">hexo init</code></pre><p>å¯åŠ¨æœ¬åœ°åšå®¢æœåŠ¡ï¼š</p><pre><code class="hljs bash">hexo s</code></pre><p>æ­¤æ—¶æœ¬åœ°çš„è®¿é—®åœ°å€ä¸ºï¼š<a href="http://localhost:4000/">http://localhost:4000/</a></p><p>åˆ›å»ºåšå®¢ï¼Œå¯ä»¥ç»“åˆTyporaè¿›è¡Œç¼–å†™ã€åˆ›å»ºï¼Œè¿™é‡Œå…ˆä¸è¿›è¡Œè®ºè¿°ï¼Œæœ‰éœ€è¦å¯ä»¥æŸ¥é˜…å¦ä¸€ç¯‡åšå®¢**<em>Hexoå’ŒTyporaçš„ç»“åˆä½¿ç”¨**</em>ã€‚</p><ol start="5"><li>éƒ¨ç½²åˆ°github</li></ol><p>åœ¨githubä¸Šåˆ›å»ºä¸€ä¸ªä»“åº“ã€‚å‘½åä¸ºrepoName.github.io</p><p><img src="/images/%E6%90%AD%E5%BB%BAHexo%E5%8D%9A%E5%AE%A2/image-20201128145550669.png" alt="image-20201128145550669"></p><p>åœ¨blogç›®å½•ä¸‹å®‰è£…gitéƒ¨ç½²æ’ä»¶ã€‚</p><pre><code class="hljs bash">cnpm install --save hexo-deployer-git</code></pre><p>ä¿®æ”¹hexoæ ¹ç›®å½•ä¸‹çš„_config.ymlæ–‡ä»¶ï¼ˆä¿®æ”¹å†…å®¹åœ¨æœ€åº•éƒ¨ï¼‰</p><p><img src="/images/%E6%90%AD%E5%BB%BAHexo%E5%8D%9A%E5%AE%A2/image-20201128145724021.png" alt="image-20201128145724021"></p><p>éƒ¨ç½²åˆ°githubä»“åº“</p><pre><code class="hljs bash">hexo d<span class="hljs-comment">#éƒ¨ç½²åˆ°Githubä»“åº“é‡Œ</span></code></pre><p>å¯ä»¥äº†ï¼Œç°åœ¨å¯ä»¥é€šè¿‡<a href="https://yourgithubname.github.io/">https://YourGithubName.github.io/</a>  æ¥æŸ¥çœ‹æˆ‘ä»¬çš„åšå®¢äº†ã€‚</p><p><img src="/images/%E6%90%AD%E5%BB%BAHexo%E5%8D%9A%E5%AE%A2/image-20201128145940182.png" alt="image-20201128145940182"></p><h2 id="3-æ›´æ¢Hexoä¸»é¢˜"><a href="#3-æ›´æ¢Hexoä¸»é¢˜" class="headerlink" title="3. æ›´æ¢Hexoä¸»é¢˜"></a>3. æ›´æ¢Hexoä¸»é¢˜</h2><p>æˆ‘é€‰ç”¨çš„æ˜¯Fluidè¿™ä¸ªä¸»é¢˜ã€‚</p><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://hexo.fluid-dev.com/docs/">https://hexo.fluid-dev.com/docs/</a></p><p>githubåœ°å€ï¼š<a href="https://github.com/fluid-dev/hexo-theme-fluid">https://github.com/fluid-dev/hexo-theme-fluid</a></p><p><strong>æ­¥éª¤ï¼š</strong></p><ol><li>ä¸‹è½½ä¸»é¢˜</li></ol><p>é¦–å…ˆè¿›å…¥æœ¬åœ°åšå®¢ç›®å½•ä¸‹çš„themesç›®å½•ä¸‹ï¼Œç„¶åå…‹éš†é€‰æ‹©çš„ä¸»é¢˜çš„githubä»“åº“åˆ°æœ¬åœ°ã€‚</p><pre><code class="hljs bash">git <span class="hljs-built_in">clone</span> https://github.com/fluid-dev/hexo-theme-fluid.git</code></pre><p><img src="/images/%E6%90%AD%E5%BB%BAHexo%E5%8D%9A%E5%AE%A2/image-20201128150425602.png" alt="image-20201128150425602"></p><p><img src="/images/%E6%90%AD%E5%BB%BAHexo%E5%8D%9A%E5%AE%A2/image-20201128150536270.png" alt="image-20201128150536270"></p><ol start="2"><li>ä¿®æ”¹_config.yml</li></ol><p>ä¿®æ”¹blogç›®å½•ä¸‹çš„_config.yml</p><p><img src="/images/%E6%90%AD%E5%BB%BAHexo%E5%8D%9A%E5%AE%A2/image-20201128150628711.png" alt="image-20201128150628711"></p><ol start="3"><li>commitåˆ°github</li></ol><pre><code class="hljs bash">hexo chexo ghexo d</code></pre><p>å¥½äº†ï¼ŒåŸºæœ¬å¤§åŠŸå‘Šæˆäº†ï¼ï¼</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Spring5</title>
    <link href="/2020/11/27/Spring5/"/>
    <url>/2020/11/27/Spring5/</url>
    
    <content type="html"><![CDATA[<h2 id="1-Spring"><a href="#1-Spring" class="headerlink" title="1. Spring"></a>1. Spring</h2><h3 id="1-1-ç®€ä»‹"><a href="#1-1-ç®€ä»‹" class="headerlink" title="1.1 ç®€ä»‹"></a>1.1 ç®€ä»‹</h3><ul><li><p>Spring:æ˜¥å¤©-&gt;ç»™è½¯ä»¶è¡Œä¸šå¸¦æ¥äº†æ˜¥å¤©</p></li><li><p>2002ï¼Œé¦–æ¬¡æ¨å‡ºäº†springæ¡†æ¶çš„é›å½¢:interface21æ¡†æ¶</p></li><li><p>Springæ¡†æ¶å³ä»¥interface21æ¡†æ¶ä¸ºåŸºç¡€ï¼Œç»è¿‡é‡æ–°è®¾è®¡ï¼Œå¹¶ä¸æ–­ä¸°å¯Œå…¶å†…æ¶µï¼Œäº2004å¹´3æœˆ24 å‘å¸ƒäº†1.0æ­£å¼ç‰ˆæœ¬ã€‚</p></li><li><p><strong><em>Rod Johnson</em></strong>   SpringFrameworkåˆ›å§‹äººï¼Œè‘—åä½œè€…ã€‚ä»–æ˜¯<a href="https://baike.baidu.com/item/%E6%82%89%E5%B0%BC%E5%A4%A7%E5%AD%A6">æ‚‰å°¼å¤§å­¦</a>çš„åšå£«ï¼Œç„¶è€Œä»–çš„ä¸“ä¸šä¸æ˜¯è®¡ç®—æœºï¼Œè€Œæ˜¯éŸ³ä¹å­¦ã€‚</p></li><li><p>Springç†å¿µï¼šä½¿ç°æœ‰çš„æŠ€æœ¯æ›´åŠ å®¹æ˜“ä½¿ç”¨ï¼Œæœ¬èº«æ˜¯ä¸€ä¸ª<strong>å¤§æ‚çƒ©</strong>ï¼Œæ•´åˆäº†ç°æœ‰çš„æŠ€æœ¯æ¡†æ¶ã€‚</p></li></ul><ul><li>SSHï¼šStruct2 + Spring + Hinernateï¼ˆå…¨è‡ªåŠ¨åŒ–ï¼‰</li><li>SSMï¼šSpringMVC + Spring + MyBatisï¼ˆåŠè‡ªåŠ¨åŒ–ï¼‰</li></ul><p>å®˜ç½‘åœ°å€ï¼š<a href="https://spring.io/projects/spring-framework#learn">https://spring.io/projects/spring-framework#learn</a></p><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://docs.spring.io/spring-framework/docs/current/reference/html/overview.html#overview">https://docs.spring.io/spring-framework/docs/current/reference/html/overview.html#overview</a></p><p>ä¸‹è½½zipåœ°å€ï¼š<a href="https://repo.spring.io/release/org/springframework/spring/">https://repo.spring.io/release/org/springframework/spring/</a></p><p>GitHubï¼š<a href="https://github.com/spring-projects/spring-framework">https://github.com/spring-projects/spring-framework</a></p><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-webmvc<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.3.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre><h3 id="1-2-ä¼˜ç‚¹"><a href="#1-2-ä¼˜ç‚¹" class="headerlink" title="1.2 ä¼˜ç‚¹"></a>1.2 ä¼˜ç‚¹</h3><ul><li>Springæ˜¯ä¸€ä¸ªå¼€æºçš„å…è´¹çš„æ¡†æ¶ï¼ˆå®¹å™¨ï¼‰ï¼</li><li>Springæ˜¯ä¸€ä¸ªè½»é‡çº§çš„ã€éå…¥ä¾µå¼çš„æ¡†æ¶ï¼ï¼ˆéå…¥ä¾µå¼ï¼šå¼•å…¥ä¸å¯¹é¡¹ç›®çš„å…¶ä»–ä¸œè¥¿é€ æˆå½±å“ï¼‰</li><li>æ§åˆ¶åè½¬ï¼ˆIOCï¼‰ã€é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼‰ï¼</li><li>æ”¯æŒäº‹åŠ¡çš„å¤„ç†ï¼Œå¯¹æ¡†æ¶æ•´åˆçš„æ”¯æŒï¼</li></ul><p>==<strong>æ€»ç»“ï¼š</strong> Springå°±æ˜¯ä¸€ä¸ªè½»é‡çº§çš„æ§åˆ¶åè½¬ï¼ˆIOCï¼‰å’Œé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼‰çš„æ¡†æ¶ï¼==</p><h3 id="1-3-ç»„æˆ"><a href="#1-3-ç»„æˆ" class="headerlink" title="1.3 ç»„æˆ"></a>1.3 ç»„æˆ</h3><p><img src="/images/Spring5/1078856-20170205160357354-490660449.gif" alt="img"></p><h3 id="1-4-æ‰©å±•"><a href="#1-4-æ‰©å±•" class="headerlink" title="1.4 æ‰©å±•"></a>1.4 æ‰©å±•</h3><p><img src="/images/Spring5/image-20201114221151976.png" alt="image-20201114221151976"></p><p>Spring:ç°ä»£åŒ–çš„å¼€å‘!è¯´ç™½äº†å°±æ˜¯åŸºäºSpringçš„å¼€å‘ï¼</p><ul><li>Build Anything æ„å»ºä¸€åˆ‡</li><li>Coordinate Anything åè°ƒä¸€åˆ‡</li><li>Connect Everything è¿æ¥ä¸€åˆ‡</li></ul><ol><li><strong>Spring Boot</strong></li></ol><ul><li>ä¸€ä¸ªå¿«é€Ÿå¼€å‘çš„è„šæ‰‹æ¶</li><li>åŸºäºSpringBootå¯ä»¥å¿«é€Ÿçš„å¼€å‘å•ä¸ªå¾®æœåŠ¡ã€‚</li><li>çº¦å®šå¤§äºé…ç½®</li></ul><ol start="2"><li><strong>Spring Cloud</strong></li></ol><ul><li>SpringCloudæ˜¯åŸºäºSpringBootå®ç°çš„</li></ul><p>å› ä¸ºç°åœ¨å¤§å¤šæ•°å…¬å¸éƒ½åœ¨ä½¿ç”¨SpringBootè¿›è¡Œå¿«é€Ÿå¼€å‘ï¼Œå­¦ä¹ SpringBootçš„å‰æï¼Œéœ€è¦å®Œå…¨æŒæ¡Springä»¥åŠSpringMVCã€‚æ‰¿ä¸Šå¯ä¸‹çš„ä½œç”¨ï¼</p><p><strong>å¼Šç«¯ï¼šå‘å±•äº†å¤ªä¹…ä¹‹åï¼Œè¿èƒŒäº†åŸæ¥çš„ç†å¿µï¼é…ç½®ååˆ†ç¹çï¼Œäººç§°â€œé…ç½®åœ°ç‹±â€ã€‚</strong></p><h2 id="2-IOCç†è®ºæ¨å¯¼"><a href="#2-IOCç†è®ºæ¨å¯¼" class="headerlink" title="2. IOCç†è®ºæ¨å¯¼"></a>2. IOCç†è®ºæ¨å¯¼</h2><p><strong>å¼•å…¥èƒŒæ™¯ï¼š</strong></p><p>åœ¨ä¹‹å‰çš„æ¡†æ¶ä¸­ï¼Œæˆ‘ä»¬å®ç°ä¸šåŠ¡ï¼Œä¸€èˆ¬åˆ†ä¸ºDaoæ¥å£ã€Daoæ¥å£å®ç°ç±»ã€Serviceæ¥å£ã€Serviceå®ç°ç±»ã€‚</p><p>å‡è®¾UserDao.javaã€UserDaoImpl.javaã€UserService.javaã€UserServiceImpl.java</p><p>å¦‚æœUserDaoæ¥å£å¯¹åº”ä¸€ä¸ªå®ç°ç±»ï¼Œé‚£ä¹ˆUserServiceä¸­ä¸€èˆ¬ä¼šå†™ï¼š</p><pre><code class="hljs java">UserDao userDao = <span class="hljs-keyword">new</span> UserDaoImpl()</code></pre><p>ç”¨æˆ·ä½¿ç”¨æ—¶ç›´æ¥è°ƒç”¨serviceï¼Œæ˜¯è°ƒç”¨ä¸åˆ°daoå±‚çš„ã€‚å› æ­¤ï¼Œç¨‹åºä¼šä¸€ç›´é»˜è®¤éƒ½æ˜¯è°ƒç”¨çš„UserDaoImplå®ç°ç±»ã€‚</p><p>é‚£ä¹ˆï¼Œå¦‚æœUserDaoæœ‰å¤šä¸ªå®ç°ç±»å‘¢ï¼Ÿä¾‹å¦‚ï¼ŒUserDaoImplã€UserDaoMySqlImplã€UserDaoOracleImpç­‰ã€‚</p><p>å¦‚æœç¨‹åºå‘˜æ ¹æ®éœ€æ±‚æ”¹åŠ¨serviceä»£ç ï¼Œå°±ä¼šæ˜¾å¾—éå¸¸çš„ä¸çµæ´»ï¼š</p><pre><code class="hljs java">UserDao userDao = <span class="hljs-keyword">new</span> UserDaoMySqlImpl();</code></pre><img src="/images/Spring5/image-20201115105127424.png" alt="image-20201115105127424" style="zoom:50%;" /><hr><p><strong>åŸºäºè¿™ï¼Œæˆ‘ä»¬æƒ³åˆ°ï¼Œå¯ä»¥ä½¿ç”¨setè¿›è¡ŒåŠ¨æ€å®ç°å€¼çš„æ³¨å…¥ï¼<img src="/images/Spring5/image-20201115103836967.png" alt="image-20201115103836967"></strong></p><pre><code class="hljs java"><span class="hljs-keyword">private</span> UserDao userDao;<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setUserDao</span><span class="hljs-params">(UserDao userDao)</span></span>&#123;<span class="hljs-keyword">this</span>.userDao = userDao;&#125;</code></pre><img src="/images/Spring5/image-20201115105233723.png" alt="image-20201115105233723" style="zoom:50%;" /><hr><p>åœ¨ä¹‹å‰çš„ä¸šåŠ¡ä¸­ï¼Œç”¨æˆ·çš„éœ€æ±‚å¯èƒ½ä¼šå½±å“æˆ‘ä»¬åŸæ¥çš„ä»£ç ï¼Œæˆ‘ä»¬æ ¹æ®ç”¨æˆ·çš„éœ€æ±‚å»ä¿®æ”¹æºä»£ç ã€‚å¦‚æœç¨‹åºä»£ç é‡ååˆ†å¤§ï¼Œä¿®æ”¹ä¸€æ¬¡çš„æˆæœ¬ä»£ä»·ååˆ†æ˜‚è´µï¼</p><p>ä½¿ç”¨setä¹‹åï¼Œå‘ç”Ÿäº†é©å‘½æ€§çš„å˜åŒ–ï¼</p><ul><li>ä¹‹å‰ï¼Œç¨‹åºæ˜¯ä¸»åŠ¨åˆ›å»ºå¯¹è±¡ï¼Œæ§åˆ¶æƒåœ¨ç¨‹åºå‘˜èº«ä¸Šï¼</li><li>ä½¿ç”¨setæ³¨å…¥ä¹‹åï¼Œç¨‹åºä¸å†å…·æœ‰ä¸»åŠ¨æ€§ï¼Œè€Œæ˜¯å˜æˆäº†è¢«åŠ¨çš„æ¥å—å¯¹è±¡ï¼</li></ul><hr><p>è¿™ç§æ€æƒ³ä»æœ¬è´¨ä¸Šè§£å†³äº†é—®é¢˜ï¼Œæˆ‘ä»¬ç¨‹åºå‘˜ä¸ç”¨å†å»ç®¡ç†å¯¹è±¡çš„åˆ›å»ºã€‚ç³»ç»Ÿçš„è€¦åˆæ€§å¤§å¤§é™ä½ï¼Œå¯ä»¥æ›´åŠ ä¸“æ³¨çš„åœ¨ä¸šåŠ¡çš„å®ç°ä¸Šï¼</p><p>è¿™æ˜¯IOCçš„åŸå‹ï¼ï¼ˆIOCï¼šæ§åˆ¶åè½¬ï¼‰</p><h2 id="3-IOCæœ¬è´¨"><a href="#3-IOCæœ¬è´¨" class="headerlink" title="3. IOCæœ¬è´¨"></a>3. IOCæœ¬è´¨</h2><p><strong>æ§åˆ¶åè½¬IOCï¼ˆInversion of Controlï¼‰ï¼Œæ˜¯ä¸€ç§è®¾è®¡æ€æƒ³ï¼ŒDIï¼ˆä¾èµ–æ³¨å…¥ï¼‰æ˜¯å®ç°IOCçš„ä¸€ç§æ–¹æ³•ã€‚</strong></p><p>åœ¨æ²¡æœ‰IOCçš„ç¨‹åºä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œå¯¹è±¡çš„åˆ›å»ºä¸å¯¹è±¡é—´çš„ä¾èµ–å…³ç³»å®Œå…¨ç¡¬ç¼–ç åœ¨ç¨‹åºä¸­ï¼Œå¯¹è±¡çš„åˆ›å»ºç”±ç¨‹åºè‡ªå·±æ§åˆ¶ï¼Œæ§åˆ¶åè½¬åå°†å¯¹è±¡çš„åˆ›å»ºè½¬ç§»ç»™ç¬¬ä¸‰æ–¹ï¼Œä¸ªäººè®¤ä¸ºæ‰€è°“æ§åˆ¶åè½¬å°±æ˜¯ï¼šè·å¾—ä¾èµ–å¯¹è±¡çš„æ–¹å¼åè½¬äº†ã€‚</p><img src="/images/Spring5/6a63f6246b600c337b73ab94174c510fd9f9a160" alt="img" style="zoom:50%;" /><p><strong>IOCæ˜¯Springæ¡†æ¶çš„æ ¸å¿ƒå†…å®¹ï¼Œ</strong>ä½¿ç”¨å¾ˆå¤šæ–¹å¼å®Œç¾çš„å®ç°äº†IOCï¼Œå¯ä»¥ä½¿ç”¨XMLé…ç½®ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ³¨è§£ï¼Œæ–°ç‰ˆæœ¬çš„Springä¹Ÿå¯ä»¥é›¶é…ç½®å®ç°IOCã€‚</p><p>Springå®¹å™¨åœ¨åˆå§‹åŒ–æ—¶å…ˆè¯»å–é…ç½®æ–‡ä»¶ï¼Œæ ¹æ®é…ç½®æ–‡ä»¶æˆ–å…ƒæ•°æ®åˆ›å»ºä¸ç»„ç»‡å¯¹è±¡å­˜å…¥å®¹å™¨ä¸­ï¼Œç¨‹åºä½¿ç”¨æ—¶å†ä»IOCå®¹å™¨ä¸­å–å‡ºéœ€è¦çš„å¯¹è±¡ã€‚</p><img src="/images/Spring5/image-20201115111043907.png" alt="image-20201115111043907" style="zoom:50%;" /><p>é‡‡ç”¨XMLæ–¹å¼é…ç½®Beançš„æ—¶å€™ï¼ŒBeançš„å®šä¹‰ä¿¡æ¯æ˜¯å’Œå®ç°åˆ†ç¦»çš„ï¼Œè€Œé‡‡ç”¨æ³¨è§£çš„æ–¹å¼å¯ä»¥æŠŠä¸¤è€…åˆä¸ºä¸€ä½“ï¼ŒBeançš„å®šä¹‰ä¿¡æ¯ç›´æ¥ä»¥æ³¨è§£çš„å½¢å¼å®šä¹‰åœ¨å®ç°ç±»ä¸­ï¼Œä»è€Œè¾¾åˆ°é›¶é…ç½®çš„ç›®çš„ã€‚</p><p><strong>æ§åˆ¶åè½¬æ˜¯é€šè¿‡æè¿°ï¼ˆXMLæˆ–æ³¨è§£ï¼‰å¹¶é€šè¿‡ç¬¬ä¸‰æ–¹å»ç”Ÿäº§æˆ–è·å–ç‰¹å®šå¯¹è±¡çš„æ–¹å¼ã€‚åœ¨Springä¸­å®ç°æ§åˆ¶åè½¬çš„æ˜¯IOCå®¹å™¨ï¼Œå…¶å®ç°æ–¹æ³•æ˜¯ä¾èµ–æ³¨å…¥DIï¼ˆDependency Injection, DIï¼‰</strong></p><h4 id="4-HelloSpring"><a href="#4-HelloSpring" class="headerlink" title="4. HelloSpring"></a>4. HelloSpring</h4><p>æˆ‘ä»¬ç†è§£äº†IOCçš„åŸºæœ¬æ€æƒ³ï¼Œæˆ‘ä»¬ç°åœ¨æ¥çœ‹ä¸‹Springçš„åº”ç”¨ï¼š</p><ol><li>å¯¼å…¥jaråŒ…</li></ol><blockquote><p>æ³¨ : spring éœ€è¦å¯¼å…¥commons-loggingè¿›è¡Œæ—¥å¿—è®°å½• . æˆ‘ä»¬åˆ©ç”¨maven , ä»–ä¼šè‡ªåŠ¨ä¸‹è½½å¯¹åº”çš„ä¾èµ–é¡¹ .</p></blockquote><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-webmvc --&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-webmvc<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.3.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre><ol start="2"><li>ç¼–å†™Helloå®ä½“ç±»</li></ol><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Hello</span> </span>&#123;    <span class="hljs-keyword">private</span> String name;    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getName</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-keyword">return</span> name;    &#125;  <span class="hljs-comment">//ä¸€å®šè¦æœ‰setæ–¹æ³•ï¼Œä¸ç„¶beans.xmlä¸­æ— æ³•å®ç°èµ‹å€¼</span>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setName</span><span class="hljs-params">(String name)</span> </span>&#123;        <span class="hljs-keyword">this</span>.name = name;    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">show</span><span class="hljs-params">()</span></span>&#123;        System.out.println(<span class="hljs-string">&quot;Hello,&quot;</span>+ name );    &#125;&#125;</code></pre><ol start="3"><li>ç¼–å†™beans.xml</li></ol><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><span class="hljs-tag"><span class="hljs-string">        https://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span>    <span class="hljs-comment">&lt;!--ä½¿ç”¨Springæ¥åˆ›å»ºå¯¹è±¡ï¼Œåœ¨Springä¸­è¿™äº›éƒ½å«åšBean--&gt;</span>    <span class="hljs-comment">&lt;!--</span><span class="hljs-comment">        idï¼šç›¸å½“äºå˜é‡åï¼Œclassåˆ™æ˜¯æƒ³è¦åˆ›å»ºçš„å¯¹è±¡çš„ç±»å‹</span><span class="hljs-comment">        property : å¯¹è±¡çš„å±æ€§ï¼Œvalueè®¾ç½®å…·ä½“çš„å€¼ï¼Œ</span><span class="hljs-comment">å¦‚æœæ˜¯ä¸€ä¸ªå¯¹è±¡åˆ™ä½¿ç”¨refæ¥è®¾ç½®ï¼ŒrefæŒ‡å‘çš„æ˜¯beans.xmlä¸­å·²ç»å®šä¹‰å¥½çš„å¯¹è±¡ã€‚</span><span class="hljs-comment">    --&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;hello&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.wen.pojo.Hello&quot;</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;Spring&quot;</span>/&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span></code></pre><ol start="4"><li>æµ‹è¯•ï¼š</li></ol><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;        <span class="hljs-comment">//è·å–ApplicationContextï¼šæ‹¿åˆ°Springå®¹å™¨</span>        ApplicationContext applicationContext = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">&quot;beans.xml&quot;</span>);        <span class="hljs-comment">//getBean : å‚æ•°å³ä¸ºspringé…ç½®æ–‡ä»¶ä¸­beançš„id .</span>        Hello hello = (Hello) applicationContext.getBean(<span class="hljs-string">&quot;hello&quot;</span>);        System.out.println(hello.toString());    &#125;</code></pre><img src="/images/Spring5/image-20201115132219497.png" alt="image-20201115132219497" style="zoom:50%;" /><hr><p><strong>æ€è€ƒï¼š</strong></p><ul><li>Hello å¯¹è±¡æ˜¯è°åˆ›å»ºçš„ ?             hello å¯¹è±¡æ˜¯ç”±Springåˆ›å»ºçš„</li><li>Hello å¯¹è±¡çš„å±æ€§æ˜¯æ€ä¹ˆè®¾ç½®çš„ ?     hello å¯¹è±¡çš„å±æ€§æ˜¯ç”±Springå®¹å™¨è®¾ç½®çš„</li></ul><p>è¿™ä¸ªè¿‡ç¨‹å°±å«æ§åˆ¶åè½¬ :</p><ul><li><strong>æ§åˆ¶</strong> : è°æ¥æ§åˆ¶å¯¹è±¡çš„åˆ›å»º , ä¼ ç»Ÿåº”ç”¨ç¨‹åºçš„å¯¹è±¡æ˜¯ç”±ç¨‹åºæœ¬èº«æ§åˆ¶åˆ›å»ºçš„ , ä½¿ç”¨Springå , å¯¹è±¡æ˜¯ç”±Springæ¥åˆ›å»ºçš„</li><li><strong>åè½¬</strong> : ç¨‹åºæœ¬èº«ä¸åˆ›å»ºå¯¹è±¡ , è€Œå˜æˆè¢«åŠ¨çš„æ¥æ”¶å¯¹è±¡ .</li></ul><p><strong>ä¾èµ–æ³¨å…¥</strong> : å°±æ˜¯åˆ©ç”¨setæ–¹æ³•æ¥è¿›è¡Œæ³¨å…¥çš„.</p><p> <strong>IOCæ˜¯ä¸€ç§ç¼–ç¨‹æ€æƒ³ï¼Œç”±ä¸»åŠ¨çš„ç¼–ç¨‹å˜æˆè¢«åŠ¨çš„æ¥æ”¶ã€‚</strong></p><p>å¯ä»¥é€šè¿‡newClassPathXmlApplicationContextå»æµè§ˆä¸€ä¸‹åº•å±‚æºç  ã€‚</p><p>==ä¹‹å‰è¯´æ˜¯ç”±ç”¨æˆ·ä¸»åŠ¨è¿›è¡Œè®¾ç½®å¯¹è±¡ï¼Œå…¶å®é…ç½®æ–‡ä»¶å°±æ˜¯ç›¸å½“äºç”¨æˆ·çš„ä¸€ä¸ªè§’è‰²ï¼Œè®©ç”¨æˆ·å»ä¿®æ”¹ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œè¿œè¿œæ¯”ä¿®æ”¹æºä»£ç æ›´ç®€å•ï¼ï¼==</p><p><strong>OKï¼Œåˆ°äº†ç°åœ¨ï¼Œæˆ‘ä»¬å½»åº•ä¸ç”¨åœ¨ç¨‹åºä¸­ä¿®æ”¹ä»£ç å»å®ç°ä¸åŒçš„æ“ä½œï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨xmlé…ç½®æ–‡ä»¶ä¸­è¿›è¡Œä¿®æ”¹ï¼Œæ‰€è°“çš„IOCï¼Œä¸€å¥è¯ï¼šå¯¹è±¡ç”±Springåˆ›å»ºã€ç®¡ç†ã€è£…é…ã€‚</strong></p><h2 id="4-IOCåˆ›å»ºå¯¹è±¡æ–¹å¼"><a href="#4-IOCåˆ›å»ºå¯¹è±¡æ–¹å¼" class="headerlink" title="4. IOCåˆ›å»ºå¯¹è±¡æ–¹å¼"></a>4. IOCåˆ›å»ºå¯¹è±¡æ–¹å¼</h2><h3 id="4-1-é€šè¿‡æ— å‚æ„é€ æ–¹æ³•æ¥åˆ›å»º"><a href="#4-1-é€šè¿‡æ— å‚æ„é€ æ–¹æ³•æ¥åˆ›å»º" class="headerlink" title="4.1 é€šè¿‡æ— å‚æ„é€ æ–¹æ³•æ¥åˆ›å»º"></a>4.1 é€šè¿‡æ— å‚æ„é€ æ–¹æ³•æ¥åˆ›å»º</h3><p><strong>æ— å‚æ„é€ æ˜¯é»˜è®¤çš„ï¼</strong></p><ol><li>å®ä½“ç±»</li></ol><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Hello</span> </span>&#123;    <span class="hljs-keyword">private</span> String name;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Hello</span><span class="hljs-params">()</span></span>&#123;        System.out.println(<span class="hljs-string">&quot;æ— å‚æ„é€ &quot;</span>);    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getName</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-keyword">return</span> name;    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setName</span><span class="hljs-params">(String name)</span> </span>&#123;        <span class="hljs-keyword">this</span>.name = name;    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">show</span><span class="hljs-params">()</span></span>&#123;        System.out.println(<span class="hljs-string">&quot;Hello,&quot;</span>+ name );    &#125;&#125;</code></pre><ol start="2"><li>beans.xml</li></ol><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;hello&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.wen.pojo.Hello&quot;</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;Spring&quot;</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span></code></pre><ol start="3"><li>æµ‹è¯•</li></ol><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;        <span class="hljs-comment">//è·å–ApplicationContextï¼šæ‹¿åˆ°Springå®¹å™¨</span>        ApplicationContext applicationContext = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">&quot;beans.xml&quot;</span>);        <span class="hljs-comment">//getBean : å‚æ•°å³ä¸ºspringé…ç½®æ–‡ä»¶ä¸­beançš„id .</span>        Hello hello = (Hello) applicationContext.getBean(<span class="hljs-string">&quot;hello&quot;</span>);        <span class="hljs-comment">//System.out.println(hello.toString());</span>    &#125;</code></pre><img src="/images/Spring5/image-20201115163212571.png" alt="image-20201115163212571" style="zoom:50%;" /><img src="/images/Spring5/image-20201115163454860.png" alt="image-20201115163454860" style="zoom:50%;" /><p>é€šè¿‡ç»“æœå‘ç°ï¼Œåœ¨è°ƒç”¨show()æ–¹æ³•ä¹‹å‰ï¼ŒHelloå¯¹è±¡åœ¨getBean()æ—¶å·²ç»é€šè¿‡æ— å‚æ„é€ åˆå§‹åŒ–äº†ï¼</p><h3 id="4-2-é€šè¿‡æœ‰å‚æ„é€ æ–¹æ³•æ¥åˆ›å»º"><a href="#4-2-é€šè¿‡æœ‰å‚æ„é€ æ–¹æ³•æ¥åˆ›å»º" class="headerlink" title="4.2 é€šè¿‡æœ‰å‚æ„é€ æ–¹æ³•æ¥åˆ›å»º"></a>4.2 é€šè¿‡æœ‰å‚æ„é€ æ–¹æ³•æ¥åˆ›å»º</h3><ol><li>å®ä½“ç±»</li></ol><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Hello</span> </span>&#123;    <span class="hljs-keyword">private</span> String name;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Hello</span><span class="hljs-params">(String name)</span></span>&#123;        <span class="hljs-keyword">this</span>.name = name;        System.out.println(<span class="hljs-string">&quot;æœ‰å‚æ„é€ ï¼šname= &quot;</span>+<span class="hljs-keyword">this</span>.name);    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getName</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-keyword">return</span> name;    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setName</span><span class="hljs-params">(String name)</span> </span>&#123;        <span class="hljs-keyword">this</span>.name = name;    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">show</span><span class="hljs-params">()</span></span>&#123;        System.out.println(<span class="hljs-string">&quot;Hello,&quot;</span>+ name );    &#125;&#125;</code></pre><ol start="2"><li>beans.xmlï¼ˆæœ‰ä¸‰ç§ç¼–å†™æ–¹å¼ï¼‰</li></ol><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;hello&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.wen.pojo.Hello&quot;</span>&gt;</span>  <span class="hljs-comment">&lt;!-- ç¬¬ä¸€ç§æ ¹æ®indexå‚æ•°ä¸‹æ ‡è®¾ç½® --&gt;</span>  <span class="hljs-comment">&lt;!-- indexæŒ‡æ„é€ æ–¹æ³• , ä¸‹æ ‡ä»0å¼€å§‹ --&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">index</span>=<span class="hljs-string">&quot;0&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;spring1&quot;</span>/&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;Spring&quot;</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span></code></pre><ol start="3"><li>æµ‹è¯•</li></ol><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;  <span class="hljs-comment">//è·å–ApplicationContextï¼šæ‹¿åˆ°Springå®¹å™¨</span>  ApplicationContext applicationContext = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">&quot;beans.xml&quot;</span>);  <span class="hljs-comment">//getBean : å‚æ•°å³ä¸ºspringé…ç½®æ–‡ä»¶ä¸­beançš„id .</span>  Hello hello = (Hello) applicationContext.getBean(<span class="hljs-string">&quot;hello&quot;</span>);  hello.show();&#125;</code></pre><img src="/images/Spring5/image-20201115164314916.png" alt="image-20201115164314916" style="zoom:50%;" /><p>å¦å¤–ä¸¤ç§ç¼–å†™æ–¹å¼ï¼š</p><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;hello&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.wen.pojo.Hello&quot;</span>&gt;</span>  <span class="hljs-comment">&lt;!-- ç¬¬äºŒç§æ ¹æ®å‚æ•°åå­—è®¾ç½® --&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;spring2&quot;</span>/&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;Spring&quot;</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span></code></pre><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;hello&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.wen.pojo.Hello&quot;</span>&gt;</span>  <span class="hljs-comment">&lt;!-- ç¬¬ä¸‰ç§æ ¹æ®å‚æ•°ç±»å‹è®¾ç½® --&gt;</span>  <span class="hljs-comment">&lt;!--ä¸å»ºè®®ä½¿ç”¨ï¼Œå¦‚æœä¸¤ä¸ªéƒ½æ˜¯Stringç±»å‹å°±ä¸å¥½äº†--&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;java.lang.String&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;spring3&quot;</span>/&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;Spring&quot;</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span></code></pre><hr><p>ç°åœ¨æˆ‘ä»¬æµ‹è¯•ä¸€ä¸ªæ¯”è¾ƒæœ‰æ„æ€çš„ä¸œè¥¿ï¼Œ<img src="/images/Spring5/image-20201115165603497.png" alt="image-20201115165603497"></p><ol><li>æˆ‘ä»¬å†åˆ›å»ºä¸€ä¸ªå®ä½“ç±»User.java</li></ol><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>&#123;    <span class="hljs-keyword">private</span> String name;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">User</span><span class="hljs-params">()</span></span>&#123;        System.out.println(<span class="hljs-string">&quot;Useræ— å‚æ„é€ &quot;</span>);    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getName</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-keyword">return</span> name;    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setName</span><span class="hljs-params">(String name)</span> </span>&#123;        <span class="hljs-keyword">this</span>.name = name;    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">show</span><span class="hljs-params">()</span></span>&#123;        System.out.println(<span class="hljs-string">&quot;Hello,&quot;</span>+ name );    &#125;&#125;</code></pre><ol start="2"><li>åœ¨beans.xmlä¸­æ³¨å…¥</li></ol><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;hello&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.wen.pojo.Hello&quot;</span>&gt;</span>  <span class="hljs-comment">&lt;!-- ç¬¬ä¸‰ç§æ ¹æ®å‚æ•°ç±»å‹è®¾ç½® --&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;java.lang.String&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;spring3&quot;</span>/&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;Spring&quot;</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;user&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.wen.pojo.User&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span></code></pre><ol start="3"><li>æµ‹è¯•</li></ol><p>æµ‹è¯•ï¼Œæˆ‘ä»¬åªget Helloå¯¹è±¡ï¼Œçœ‹ä¸€ä¸‹ç»“æœ</p><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;        <span class="hljs-comment">//è·å–ApplicationContextï¼šæ‹¿åˆ°Springå®¹å™¨</span>        ApplicationContext applicationContext = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">&quot;beans.xml&quot;</span>);        <span class="hljs-comment">//getBean : å‚æ•°å³ä¸ºspringé…ç½®æ–‡ä»¶ä¸­beançš„id .</span>        Hello hello = (Hello) applicationContext.getBean(<span class="hljs-string">&quot;hello&quot;</span>);        hello.show();    &#125;</code></pre><img src="/images/Spring5/image-20201115165819922.png" alt="image-20201115165819922" style="zoom:50%;" /><p>Userç«Ÿç„¶ä¹Ÿè¢«å®ä¾‹åŒ–äº†ï¼Ÿï¼ï¼</p><p>==åŸæ¥ï¼Œ<strong>åœ¨é…ç½®æ–‡ä»¶åŠ è½½çš„æ—¶å€™ã€‚å…¶ä¸­ç®¡ç†çš„å¯¹è±¡éƒ½å·²ç»åˆå§‹åŒ–äº†ï¼</strong> ä¹Ÿå°±æ˜¯è¯´ï¼Œé…ç½®æ–‡ä»¶åœ¨åŠ è½½çš„æ—¶å€™ï¼Œæ‰€æœ‰æ³¨å†Œåˆ°é‡Œé¢çš„å¯¹è±¡éƒ½è¢«å®ä¾‹åŒ–å¥½äº†ï¼Œå°±ç­‰ç€getBean()è°ƒç”¨äº†ï¼ï¼==<img src="/images/Spring5/image-20201115171224430.png" alt="image-20201115171224430"></p><h2 id="5-Springé…ç½®è¯´æ˜"><a href="#5-Springé…ç½®è¯´æ˜" class="headerlink" title="5. Springé…ç½®è¯´æ˜"></a>5. Springé…ç½®è¯´æ˜</h2><h3 id="5-1-åˆ«å"><a href="#5-1-åˆ«å" class="headerlink" title="5.1 åˆ«å"></a>5.1 åˆ«å</h3><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;hello&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.wen.pojo.Hello&quot;</span>&gt;</span>  <span class="hljs-comment">&lt;!-- ç¬¬ä¸‰ç§æ ¹æ®å‚æ•°ç±»å‹è®¾ç½® --&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;java.lang.String&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;spring3&quot;</span>/&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;Spring&quot;</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">alias</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;hello&quot;</span> <span class="hljs-attr">alias</span>=<span class="hljs-string">&quot;hello2&quot;</span>/&gt;</span></code></pre><p>èµ·åˆ«åä¹‹åï¼Œä¸¤ä¸ªåå­—éƒ½å¯ä»¥ç”¨ï¼Œéƒ½å¯ä»¥é€šè¿‡getBean()è·å–åˆ°Beanã€‚</p><h3 id="5-2-Beançš„é…ç½®"><a href="#5-2-Beançš„é…ç½®" class="headerlink" title="5.2 Beançš„é…ç½®"></a>5.2 Beançš„é…ç½®</h3><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;user&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.wen.pojo.User&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;user2,user3 user4;user5&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><span class="hljs-comment">&lt;!--</span><span class="hljs-comment">         id æ˜¯beançš„æ ‡è¯†ç¬¦,è¦å”¯ä¸€,å¦‚æœæ²¡æœ‰é…ç½®id,nameå°±æ˜¯é»˜è®¤æ ‡è¯†ç¬¦</span><span class="hljs-comment">            nameå°±æ˜¯åˆ«åï¼Œæ‰€ä»¥è¯´aliasæ ‡ç­¾å°±æ²¡å•¥ç”¨äº†ï¼Œnameä¸­å¯ä»¥æœ‰å¾ˆå¤šåˆ«åï¼Œç©ºæ ¼ã€é€—å·ã€åˆ†å·  åˆ†éš”éƒ½å¯ä»¥</span><span class="hljs-comment">         classæ˜¯beançš„å…¨é™å®šå=åŒ…å+ç±»å</span><span class="hljs-comment">    --&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">alias</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;hello&quot;</span> <span class="hljs-attr">alias</span>=<span class="hljs-string">&quot;hello2&quot;</span>/&gt;</span></code></pre><h3 id="5-3-import"><a href="#5-3-import" class="headerlink" title="5.3 import"></a>5.3 import</h3><p>importï¼Œä¸€èˆ¬ç”¨äºå›¢é˜Ÿå¼€å‘ä½¿ç”¨ï¼Œå®ƒå¯ä»¥å°†å¤šä¸ªé…ç½®æ–‡ä»¶ï¼Œå¯¼å…¥åˆå¹¶ä¸ºä¸€ä¸ªã€‚</p><img src="/images/Spring5/image-20201115174123736.png" alt="image-20201115174123736" style="zoom:50%;" /><p>å°†beans.xmlå¯¼å…¥åˆ°æ€»çš„é…ç½®æ–‡ä»¶ä¸­ï¼ŒapplicationContext.xmlã€‚</p><p>ä½¿ç”¨çš„æ—¶å€™ï¼Œç›´æ¥ä½¿ç”¨æ€»çš„æ˜¯applicationContext.xml</p><img src="/images/Spring5/image-20201115174337377.png" alt="image-20201115174337377" style="zoom:50%;" /><h2 id="6-DIä¾èµ–æ³¨å…¥"><a href="#6-DIä¾èµ–æ³¨å…¥" class="headerlink" title="6. DIä¾èµ–æ³¨å…¥"></a>6. DIä¾èµ–æ³¨å…¥</h2><h3 id="6-1-æ„é€ å™¨æ³¨å…¥"><a href="#6-1-æ„é€ å™¨æ³¨å…¥" class="headerlink" title="6.1 æ„é€ å™¨æ³¨å…¥"></a>6.1 æ„é€ å™¨æ³¨å…¥</h3><p>å‰é¢å·²ç»è¯´è¿‡</p><img src="/images/Spring5/image-20201116140844471.png" alt="image-20201116140844471" style="zoom:50%;" /><h3 id="6-2-Setteræ³¨å…¥â€”å±æ€§æ³¨å…¥ã€é‡ç‚¹ã€‘"><a href="#6-2-Setteræ³¨å…¥â€”å±æ€§æ³¨å…¥ã€é‡ç‚¹ã€‘" class="headerlink" title="6.2 Setteræ³¨å…¥â€”å±æ€§æ³¨å…¥ã€é‡ç‚¹ã€‘"></a>6.2 Setteræ³¨å…¥â€”å±æ€§æ³¨å…¥ã€é‡ç‚¹ã€‘</h3><ul><li>ä¾èµ–ï¼šæŒ‡Beanå¯¹è±¡çš„åˆ›å»ºä¾èµ–äºå®¹å™¨ . Beanå¯¹è±¡çš„ä¾èµ–èµ„æº .</li><li>æ³¨å…¥ï¼šBeanå¯¹è±¡ä¸­çš„æ‰€æœ‰å±æ€§ï¼Œç”±å®¹å™¨æ¥æ³¨å…¥ã€‚</li></ul><p>è¦æ±‚è¢«æ³¨å…¥çš„å±æ€§ï¼Œå¿…é¡»æœ‰setæ–¹æ³• ï¼Œsetæ–¹æ³•çš„æ–¹æ³•åç”±set + å±æ€§é¦–å­—æ¯å¤§å†™ ï¼Œå¦‚æœå±æ€§æ˜¯booleanç±»å‹ ï¼Œæ²¡æœ‰setæ–¹æ³• ï¼Œæ˜¯ is ã€‚</p><p>æµ‹è¯•POJOç±»ï¼š</p><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Address</span> </span>&#123;    <span class="hljs-keyword">private</span> String address;    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getAddress</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-keyword">return</span> address;    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setAddress</span><span class="hljs-params">(String address)</span> </span>&#123;        <span class="hljs-keyword">this</span>.address = address;    &#125;&#125;</code></pre><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.wen.pojo;<span class="hljs-keyword">import</span> java.util.List;<span class="hljs-keyword">import</span> java.util.Map;<span class="hljs-keyword">import</span> java.util.Properties;<span class="hljs-keyword">import</span> java.util.Set;<span class="hljs-comment">//ä½¿ç”¨æ³¨è§£æ¥ä»£æ›¿æ‰€æœ‰çš„getter setter</span><span class="hljs-meta">@Data</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Student</span> </span>&#123;    <span class="hljs-keyword">private</span> String name;    <span class="hljs-keyword">private</span> Address address;    <span class="hljs-keyword">private</span> String[] books;    <span class="hljs-keyword">private</span> List&lt;String&gt; hobbys;    <span class="hljs-keyword">private</span> Map&lt;String,String&gt; card;    <span class="hljs-keyword">private</span> Set&lt;String&gt; games;<span class="hljs-comment">//é›†åˆ</span>    <span class="hljs-keyword">private</span> String wife;<span class="hljs-comment">//ç©ºæŒ‡é’ˆ</span>    <span class="hljs-keyword">private</span> Properties info;<span class="hljs-comment">//é…ç½®ç±»</span>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">show</span><span class="hljs-params">()</span></span>&#123;        System.out.println(<span class="hljs-string">&quot;name=&quot;</span>+ name                + <span class="hljs-string">&quot;,address=&quot;</span>+ address.getAddress()                + <span class="hljs-string">&quot;,books=&quot;</span>        );        <span class="hljs-keyword">for</span> (String book:books)&#123;            System.out.print(<span class="hljs-string">&quot;&lt;&lt;&quot;</span>+book+<span class="hljs-string">&quot;&gt;&gt;\t&quot;</span>);        &#125;        System.out.println(<span class="hljs-string">&quot;\nçˆ±å¥½:&quot;</span>+hobbys);        System.out.println(<span class="hljs-string">&quot;card:&quot;</span>+card);        System.out.println(<span class="hljs-string">&quot;games:&quot;</span>+games);        System.out.println(<span class="hljs-string">&quot;wife:&quot;</span>+wife);        System.out.println(<span class="hljs-string">&quot;info:&quot;</span>+info);    &#125;&#125;</code></pre><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><span class="hljs-tag"><span class="hljs-string">        https://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span></code></pre><h4 id="6-2-1-å¸¸é‡æ³¨å…¥"><a href="#6-2-1-å¸¸é‡æ³¨å…¥" class="headerlink" title="6.2.1 å¸¸é‡æ³¨å…¥"></a>6.2.1 å¸¸é‡æ³¨å…¥</h4><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;student&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.wen.pojo.Student&quot;</span>&gt;</span>  <span class="hljs-comment">&lt;!--1.æ™®é€šå€¼æ³¨å…¥--&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;ä»»æ–‡&quot;</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span></code></pre><p>æµ‹è¯•ç±»ï¼š</p><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;  <span class="hljs-comment">//è·å–ApplicationContextï¼šæ‹¿åˆ°Springå®¹å™¨</span>  ApplicationContext applicationContext = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">&quot;applicationContext.xml&quot;</span>);  <span class="hljs-comment">//getBean : å‚æ•°å³ä¸ºspringé…ç½®æ–‡ä»¶ä¸­beançš„id .</span>  Student student = (Student) applicationContext.getBean(<span class="hljs-string">&quot;student&quot;</span>);  System.out.println(student.getName());&#125;</code></pre><p>//output: ä»»æ–‡</p><h4 id="6-2-2-Beanæ³¨å…¥"><a href="#6-2-2-Beanæ³¨å…¥" class="headerlink" title="6.2.2 Beanæ³¨å…¥"></a>6.2.2 <strong>Beanæ³¨å…¥</strong></h4><p>(Address)</p><p><strong>æ³¨æ„ç‚¹ï¼šè¿™é‡Œçš„å€¼æ˜¯ä¸€ä¸ªå¼•ç”¨ï¼Œref</strong></p><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;address&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.wen.pojo.Address&quot;</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;address&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;é’å²›&quot;</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;student&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.wen.pojo.Student&quot;</span>&gt;</span>  <span class="hljs-comment">&lt;!--1.æ™®é€šå€¼æ³¨å…¥--&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;ä»»æ–‡&quot;</span>/&gt;</span>  <span class="hljs-comment">&lt;!--2. Beanæ³¨å…¥--&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;address&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;address&quot;</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span></code></pre><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;  <span class="hljs-comment">//è·å–ApplicationContextï¼šæ‹¿åˆ°Springå®¹å™¨</span>  ApplicationContext applicationContext = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">&quot;applicationContext.xml&quot;</span>);  <span class="hljs-comment">//getBean : å‚æ•°å³ä¸ºspringé…ç½®æ–‡ä»¶ä¸­beançš„id .</span>  Student student = (Student) applicationContext.getBean(<span class="hljs-string">&quot;student&quot;</span>);  System.out.println(student.getAddress().getAddress());&#125;</code></pre><p>//output: é’å²›</p><h4 id="6-2-3-æ•°ç»„æ³¨å…¥"><a href="#6-2-3-æ•°ç»„æ³¨å…¥" class="headerlink" title="6.2.3 æ•°ç»„æ³¨å…¥"></a>6.2.3 æ•°ç»„æ³¨å…¥</h4><pre><code class="hljs java"><span class="hljs-keyword">private</span> String[] books;</code></pre><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;student&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.wen.pojo.Student&quot;</span>&gt;</span>    <span class="hljs-comment">&lt;!--1.æ™®é€šå€¼æ³¨å…¥--&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;ä»»æ–‡&quot;</span>/&gt;</span>    <span class="hljs-comment">&lt;!--2. Beanæ³¨å…¥--&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;address&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;address&quot;</span>/&gt;</span>    <span class="hljs-comment">&lt;!--3.String[] æ•°ç»„æ³¨å…¥--&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;books&quot;</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">array</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>book1<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>book2<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>book3<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>        <span class="hljs-tag">&lt;/<span class="hljs-name">array</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span></code></pre><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;    <span class="hljs-comment">//è·å–ApplicationContextï¼šæ‹¿åˆ°Springå®¹å™¨</span>    ApplicationContext applicationContext = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">&quot;applicationContext.xml&quot;</span>);    <span class="hljs-comment">//getBean : å‚æ•°å³ä¸ºspringé…ç½®æ–‡ä»¶ä¸­beançš„id .</span>    Student student = (Student) applicationContext.getBean(<span class="hljs-string">&quot;student&quot;</span>);    System.out.println(Arrays.toString(student.getBooks()));&#125;</code></pre><p>//output: [book1, book2, book3]</p><h4 id="6-2-4-Listæ³¨å…¥"><a href="#6-2-4-Listæ³¨å…¥" class="headerlink" title="6.2.4 Listæ³¨å…¥"></a>6.2.4 Listæ³¨å…¥</h4><pre><code class="hljs java"><span class="hljs-keyword">private</span> List&lt;String&gt; hobbys;</code></pre><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;student&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.wen.pojo.Student&quot;</span>&gt;</span>    <span class="hljs-comment">&lt;!--1.æ™®é€šå€¼æ³¨å…¥--&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;ä»»æ–‡&quot;</span>/&gt;</span>    <span class="hljs-comment">&lt;!--2. Beanæ³¨å…¥--&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;address&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;address&quot;</span>/&gt;</span>    <span class="hljs-comment">&lt;!--3.String[] æ•°ç»„æ³¨å…¥--&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;books&quot;</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">array</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>book1<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>book2<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>book3<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>        <span class="hljs-tag">&lt;/<span class="hljs-name">array</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;hobbys&quot;</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">list</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>å”±æ­Œ<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>ç”»ç”»<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>è·‘æ­¥<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>        <span class="hljs-tag">&lt;/<span class="hljs-name">list</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span></code></pre><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;    <span class="hljs-comment">//è·å–ApplicationContextï¼šæ‹¿åˆ°Springå®¹å™¨</span>    ApplicationContext applicationContext = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">&quot;applicationContext.xml&quot;</span>);    <span class="hljs-comment">//getBean : å‚æ•°å³ä¸ºspringé…ç½®æ–‡ä»¶ä¸­beançš„id .</span>    Student student = (Student) applicationContext.getBean(<span class="hljs-string">&quot;student&quot;</span>);    System.out.println(student.getHobbys().toString());&#125;</code></pre><p>//output: [å”±æ­Œ, ç”»ç”», è·‘æ­¥]</p><h4 id="6-2-5-Mapæ³¨å…¥"><a href="#6-2-5-Mapæ³¨å…¥" class="headerlink" title="6.2.5 Mapæ³¨å…¥"></a>6.2.5 Mapæ³¨å…¥</h4><pre><code class="hljs java"><span class="hljs-keyword">private</span> Map&lt;String,String&gt; card;</code></pre><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;card&quot;</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">map</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">entry</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;é‚®æ”¿&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;111&quot;</span>/&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">entry</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;å»ºè¡Œ&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;222&quot;</span>/&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">map</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span></code></pre><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;    <span class="hljs-comment">//è·å–ApplicationContextï¼šæ‹¿åˆ°Springå®¹å™¨</span>    ApplicationContext applicationContext = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">&quot;applicationContext.xml&quot;</span>);    <span class="hljs-comment">//getBean : å‚æ•°å³ä¸ºspringé…ç½®æ–‡ä»¶ä¸­beançš„id .</span>    Student student = (Student) applicationContext.getBean(<span class="hljs-string">&quot;student&quot;</span>);    System.out.println(student.getCard().toString());&#125;</code></pre><p>//output: {é‚®æ”¿=111, å»ºè¡Œ=222}</p><h4 id="6-2-6-setæ³¨å…¥"><a href="#6-2-6-setæ³¨å…¥" class="headerlink" title="6.2.6 setæ³¨å…¥"></a>6.2.6 setæ³¨å…¥</h4><pre><code class="hljs java"><span class="hljs-keyword">private</span> Set&lt;String&gt; games;<span class="hljs-comment">//é›†åˆ</span></code></pre><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;games&quot;</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">set</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>bbb<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>ccc<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>aaa<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">set</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span></code></pre><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;    <span class="hljs-comment">//è·å–ApplicationContextï¼šæ‹¿åˆ°Springå®¹å™¨</span>    ApplicationContext applicationContext = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">&quot;applicationContext.xml&quot;</span>);    <span class="hljs-comment">//getBean : å‚æ•°å³ä¸ºspringé…ç½®æ–‡ä»¶ä¸­beançš„id .</span>    Student student = (Student) applicationContext.getBean(<span class="hljs-string">&quot;student&quot;</span>);    System.out.println(student.getGames().toString());&#125;</code></pre><p>output: [bbb, ccc, aaa]</p><h4 id="6-2-7-Nullæ³¨å…¥"><a href="#6-2-7-Nullæ³¨å…¥" class="headerlink" title="6.2.7 Nullæ³¨å…¥"></a>6.2.7 Nullæ³¨å…¥</h4><pre><code class="hljs java"><span class="hljs-keyword">private</span> String wife;<span class="hljs-comment">//ç©ºæŒ‡é’ˆ</span></code></pre><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;wife&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">null</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span></code></pre><pre><code class="hljs java">System.out.println(student.getWife());</code></pre><p>//outputï¼šnull</p><blockquote><p>å…¶å®ç»è¿‡æµ‹è¯•ï¼Œå‘ç°æ— è®ºè¿›ä¸è¿›è¡ŒNULLçš„æ³¨å…¥ï¼Œè¾“å‡ºçš„ç»“æœéƒ½æ˜¯null</p></blockquote><h4 id="6-2-8-Propertiesæ³¨å…¥"><a href="#6-2-8-Propertiesæ³¨å…¥" class="headerlink" title="6.2.8 Propertiesæ³¨å…¥"></a>6.2.8 Propertiesæ³¨å…¥</h4><pre><code class="hljs java"><span class="hljs-keyword">private</span> Properties info;</code></pre><p>Propertiesï¼šè¡¨ç¤ºä¸€ä¸ªæŒä¹…çš„å±æ€§é›†.å±æ€§åˆ—è¡¨ä¸­æ¯ä¸ªé”®åŠå…¶å¯¹åº”å€¼éƒ½æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</p><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;info&quot;</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">props</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">prop</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;name&quot;</span>&gt;</span>222<span class="hljs-tag">&lt;/<span class="hljs-name">prop</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">prop</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;sex&quot;</span>&gt;</span>555<span class="hljs-tag">&lt;/<span class="hljs-name">prop</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">props</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span></code></pre><pre><code class="hljs java">System.out.println(student.getInfo());</code></pre><p>æ€»ä½“æµ‹è¯•ï¼š</p><pre><code class="hljs java">student.show();</code></pre><img src="/images/Spring5/image-20201115192239414.png" alt="image-20201115192239414" style="zoom:50%;" /><h4 id="6-2-9-på‘½åå’Œcå‘½åæ³¨å…¥"><a href="#6-2-9-på‘½åå’Œcå‘½åæ³¨å…¥" class="headerlink" title="6.2.9 på‘½åå’Œcå‘½åæ³¨å…¥"></a>6.2.9 på‘½åå’Œcå‘½åæ³¨å…¥</h4><p>User.java ï¼šã€æ³¨æ„ï¼šè¿™é‡Œæ²¡æœ‰æœ‰å‚æ„é€ å™¨ï¼ã€‘</p><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>&#123;    <span class="hljs-keyword">private</span> String name;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> age;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setName</span><span class="hljs-params">(String name)</span> </span>&#123;        <span class="hljs-keyword">this</span>.name = name;    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setAge</span><span class="hljs-params">(<span class="hljs-keyword">int</span> age)</span> </span>&#123;        <span class="hljs-keyword">this</span>.age = age;    &#125;    <span class="hljs-meta">@Override</span>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">toString</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;User&#123;&quot;</span> +                <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +                <span class="hljs-string">&quot;, age=&quot;</span> + age +                <span class="hljs-string">&#x27;&#125;&#x27;</span>;    &#125;&#125;</code></pre><ol><li><strong>På‘½åç©ºé—´æ³¨å…¥</strong></li></ol><p>éœ€è¦åœ¨å¤´æ–‡ä»¶ä¸­åŠ å…¥çº¦æŸæ–‡ä»¶:</p><pre><code class="hljs xml">xmlns:p=&quot;http://www.springframework.org/schema/p&quot;<span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><span class="hljs-tag"><span class="hljs-string">        https://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span></span><span class="hljs-tag">       <span class="hljs-attr">xmlns:p</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/p&quot;</span>&gt;</span>     <span class="hljs-comment">&lt;!--P(å±æ€§: properties)å‘½åç©ºé—´ , å±æ€§ä¾ç„¶è¦è®¾ç½®setæ–¹æ³•  éœ€è¦æœ‰æ— å‚æ„é€ å™¨å’Œsetæ–¹æ³•--&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;user&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.wen.pojo.User&quot;</span> <span class="hljs-attr">p:name</span>=<span class="hljs-string">&quot;ä»»æ–‡&quot;</span> <span class="hljs-attr">p:age</span>=<span class="hljs-string">&quot;100&quot;</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span></code></pre><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;    <span class="hljs-comment">//è·å–ApplicationContextï¼šæ‹¿åˆ°Springå®¹å™¨</span>    ApplicationContext applicationContext = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">&quot;applicationContext.xml&quot;</span>);    <span class="hljs-comment">//getBean : å‚æ•°å³ä¸ºspringé…ç½®æ–‡ä»¶ä¸­beançš„id .</span>    User user = (User) applicationContext.getBean(<span class="hljs-string">&quot;user&quot;</span>);    System.out.println(user.toString());&#125;</code></pre><img src="/images/Spring5/image-20201115214244836.png" alt="image-20201115214244836" style="zoom:50%;" /><ol start="2"><li><strong>c å‘½åç©ºé—´æ³¨å…¥</strong></li></ol><p>éœ€è¦åœ¨å¤´æ–‡ä»¶ä¸­åŠ å…¥çº¦æŸæ–‡ä»¶</p><pre><code class="hljs xml">xmlns:c=&quot;http://www.springframework.org/schema/c&quot;<span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;user2&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.wen.pojo.User&quot;</span> <span class="hljs-attr">c:name</span>=<span class="hljs-string">&quot;renwen&quot;</span> <span class="hljs-attr">c:age</span>=<span class="hljs-string">&quot;101&quot;</span>/&gt;</span><span class="hljs-comment">&lt;!--è¿™ä¸ªéœ€è¦Userå®ä½“ç±»ä¸­æœ‰å…¨å‚çš„æ„é€ å™¨ï¼ï¼å±æ€§ä¾ç„¶è¦è®¾ç½®setæ–¹æ³•--&gt;</span></code></pre><img src="/images/Spring5/image-20201115214800388.png" alt="image-20201115214800388" style="zoom:50%;" /><p>æ³¨æ„ç‚¹ï¼š</p><ul><li>på‘½åæ³¨å…¥å’Œcå‘½åæ³¨å…¥éƒ½éœ€è¦å¯¼å…¥çº¦æŸï¼</li></ul><pre><code class="hljs xml">xmlns:p=&quot;http://www.springframework.org/schema/p&quot;xmlns:c=&quot;http://www.springframework.org/schema/c&quot;</code></pre><h3 id="6-3-Bean-Scopesï¼ˆBeançš„ä½œç”¨åŸŸï¼‰"><a href="#6-3-Bean-Scopesï¼ˆBeançš„ä½œç”¨åŸŸï¼‰" class="headerlink" title="6.3 Bean Scopesï¼ˆBeançš„ä½œç”¨åŸŸï¼‰"></a>6.3 Bean Scopesï¼ˆBeançš„ä½œç”¨åŸŸï¼‰</h3><img src="/images/Spring5/image-20201115215212779.png" alt="image-20201115215212779" style="zoom:50%;" /><ul><li><strong>Singleton</strong> </li></ul><p>åœ¨Spring IOCå®¹å™¨ä¸­ä»…å­˜åœ¨ä¸€ä¸ªBeanå®ä¾‹ï¼ŒBeanä»¥å•ä¾‹æ–¹å¼å­˜åœ¨ï¼Œé»˜è®¤å€¼ã€‚</p><ul><li><h4 id="Prototype"><a href="#Prototype" class="headerlink" title="Prototype"></a>Prototype</h4></li></ul><p>æ¯æ¬¡ä»å®¹å™¨ä¸­è°ƒç”¨Beanæ—¶ï¼Œéƒ½è¿”å›ä¸€ä¸ªæ–°çš„å®ä¾‹ï¼Œå³æ¯æ¬¡è°ƒç”¨getBeanæ—¶ï¼Œç›¸å½“äºæ‰§è¡Œnew xxBean()</p><ul><li><strong>Request</strong></li></ul><p>æ¯æ¬¡HTTPè¯·æ±‚éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„Beanï¼Œè¯¥ä½œç”¨åŸŸä»…é€‚ç”¨äºWebApplicationContextç¯å¢ƒã€‚</p><ul><li><strong>Session</strong></li></ul><p>åŒä¸€ä¸ªHTTP Sessionå…±äº«ä¸€ä¸ªBeanï¼Œä¸åŒçš„Sessionä½¿ç”¨ä¸åŒBeanï¼Œä»…é€‚ç”¨äºWebApplicationContextç¯å¢ƒ</p><h4 id="6-3-1-The-Singleton-Scope"><a href="#6-3-1-The-Singleton-Scope" class="headerlink" title="6.3.1 The Singleton Scope"></a>6.3.1 The Singleton Scope</h4><p>å•ä¾‹æ¨¡å¼</p><img src="/images/Spring5/image-20201115215615293.png" alt="image-20201115215615293" style="zoom:50%;" /><p>å½“ä¸€ä¸ªbeançš„ä½œç”¨åŸŸä¸ºSingletonï¼Œé‚£ä¹ˆSpring IoCå®¹å™¨ä¸­<strong>åªä¼šå­˜åœ¨ä¸€ä¸ªå…±äº«çš„beanå®ä¾‹</strong>ï¼Œå¹¶ä¸”æ‰€æœ‰å¯¹beançš„è¯·æ±‚ï¼Œåªè¦idä¸è¯¥beanå®šä¹‰ç›¸åŒ¹é…ï¼Œåˆ™åªä¼šè¿”å›beançš„åŒä¸€å®ä¾‹ã€‚Singletonæ˜¯å•ä¾‹ç±»å‹ï¼Œå°±æ˜¯åœ¨åˆ›å»ºèµ·å®¹å™¨æ—¶å°±åŒæ—¶è‡ªåŠ¨åˆ›å»ºäº†ä¸€ä¸ªbeançš„å¯¹è±¡ï¼Œä¸ç®¡ä½ æ˜¯å¦ä½¿ç”¨ï¼Œä»–éƒ½å­˜åœ¨äº†ï¼Œæ¯æ¬¡è·å–åˆ°çš„å¯¹è±¡éƒ½æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚æ³¨æ„ï¼ŒSingletonä½œç”¨åŸŸæ˜¯Springä¸­çš„ç¼ºçœä½œç”¨åŸŸã€‚è¦åœ¨XMLä¸­å°†beanå®šä¹‰æˆsingletonï¼Œå¯ä»¥è¿™æ ·é…ç½®(Springé»˜è®¤æœºåˆ¶):</p><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;accountService&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.something.DefaultAccountService&quot;</span> <span class="hljs-attr">scope</span>=<span class="hljs-string">&quot;singleton&quot;</span>/&gt;</span></code></pre><h4 id="6-3-2-The-Prototype-Scope"><a href="#6-3-2-The-Prototype-Scope" class="headerlink" title="6.3.2 The Prototype Scope"></a>6.3.2 The Prototype Scope</h4><p>åŸå‹æ¨¡å¼</p><p>å½“ä¸€ä¸ªbeançš„ä½œç”¨åŸŸä¸ºPrototypeï¼Œè¡¨ç¤ºä¸€ä¸ªbeanå®šä¹‰å¯¹åº”å¤šä¸ªå¯¹è±¡å®ä¾‹ã€‚Prototypeä½œç”¨åŸŸçš„beanä¼šå¯¼è‡´åœ¨æ¯æ¬¡å¯¹è¯¥beanè¯·æ±‚ï¼ˆå°†å…¶æ³¨å…¥åˆ°å¦ä¸€ä¸ªbeanä¸­ï¼Œæˆ–è€…ä»¥ç¨‹åºçš„æ–¹å¼è°ƒç”¨å®¹å™¨çš„getBean()æ–¹æ³•ï¼‰æ—¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„beanå®ä¾‹ã€‚Prototypeæ˜¯åŸå‹ç±»å‹ï¼Œå®ƒåœ¨æˆ‘ä»¬åˆ›å»ºå®¹å™¨çš„æ—¶å€™å¹¶æ²¡æœ‰å®ä¾‹åŒ–ï¼Œè€Œæ˜¯å½“æˆ‘ä»¬è·å–beançš„æ—¶å€™æ‰ä¼šå»åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œè€Œä¸”æˆ‘ä»¬æ¯æ¬¡è·å–åˆ°çš„å¯¹è±¡éƒ½ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚æ ¹æ®ç»éªŒï¼Œå¯¹æœ‰çŠ¶æ€çš„beanåº”è¯¥ä½¿ç”¨prototypeä½œç”¨åŸŸï¼Œè€Œå¯¹æ— çŠ¶æ€çš„beanåˆ™åº”è¯¥ä½¿ç”¨singletonä½œç”¨åŸŸã€‚åœ¨XMLä¸­å°†beanå®šä¹‰æˆprototypeï¼Œå¯ä»¥è¿™æ ·é…ç½®ï¼š</p><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;account&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.foo.DefaultAccount&quot;</span><span class="hljs-attr">scope</span>=<span class="hljs-string">&quot;prototype&quot;</span>/&gt;</span>    æˆ–è€… <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;account&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.foo.DefaultAccount&quot;</span><span class="hljs-attr">singleton</span>=<span class="hljs-string">&quot;false&quot;</span>/&gt;</span></code></pre><h4 id="6-3-3-Request"><a href="#6-3-3-Request" class="headerlink" title="6.3.3 Request"></a>6.3.3 Request</h4><p>å½“ä¸€ä¸ªbeançš„ä½œç”¨åŸŸä¸ºRequestï¼Œè¡¨ç¤ºåœ¨ä¸€æ¬¡HTTPè¯·æ±‚ä¸­ï¼Œä¸€ä¸ªbeanå®šä¹‰å¯¹åº”ä¸€ä¸ªå®ä¾‹ï¼›å³æ¯ä¸ªHTTPè¯·æ±‚éƒ½ä¼šæœ‰å„è‡ªçš„beanå®ä¾‹ï¼Œå®ƒä»¬ä¾æ®æŸä¸ªbeanå®šä¹‰åˆ›å»ºè€Œæˆã€‚è¯¥ä½œç”¨åŸŸä»…åœ¨åŸºäºwebçš„Spring ApplicationContextæƒ…å½¢ä¸‹æœ‰æ•ˆã€‚è€ƒè™‘ä¸‹é¢beanå®šä¹‰ï¼š</p><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;loginAction&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">cn.csdn.LoginAction</span>&quot; <span class="hljs-attr">scope</span>=<span class="hljs-string">&quot;request&quot;</span>/&gt;</span></code></pre><p>é’ˆå¯¹æ¯æ¬¡HTTPè¯·æ±‚ï¼ŒSpringå®¹å™¨ä¼šæ ¹æ®loginAction beançš„å®šä¹‰åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„LoginAction beanå®ä¾‹ï¼Œä¸”è¯¥loginAction beanå®ä¾‹ä»…åœ¨å½“å‰HTTP requestå†…æœ‰æ•ˆï¼Œå› æ­¤å¯ä»¥æ ¹æ®éœ€è¦æ”¾å¿ƒçš„æ›´æ”¹æ‰€å»ºå®ä¾‹çš„å†…éƒ¨çŠ¶æ€ï¼Œè€Œå…¶ä»–è¯·æ±‚ä¸­æ ¹æ®loginAction beanå®šä¹‰åˆ›å»ºçš„å®ä¾‹ï¼Œå°†ä¸ä¼šçœ‹åˆ°è¿™äº›ç‰¹å®šäºæŸä¸ªè¯·æ±‚çš„çŠ¶æ€å˜åŒ–ã€‚å½“å¤„ç†è¯·æ±‚ç»“æŸï¼Œrequestä½œç”¨åŸŸçš„beanå®ä¾‹å°†è¢«é”€æ¯ã€‚</p><h4 id="6-3-4-Session"><a href="#6-3-4-Session" class="headerlink" title="6.3.4 Session"></a>6.3.4 Session</h4><p>å½“ä¸€ä¸ªbeançš„ä½œç”¨åŸŸä¸ºSessionï¼Œè¡¨ç¤ºåœ¨ä¸€ä¸ªHTTP Sessionä¸­ï¼Œä¸€ä¸ªbeanå®šä¹‰å¯¹åº”ä¸€ä¸ªå®ä¾‹ã€‚è¯¥ä½œç”¨åŸŸä»…åœ¨åŸºäºwebçš„Spring ApplicationContextæƒ…å½¢ä¸‹æœ‰æ•ˆã€‚è€ƒè™‘ä¸‹é¢beanå®šä¹‰ï¼š</p><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userPreferences&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.foo.UserPreferences&quot;</span> <span class="hljs-attr">scope</span>=<span class="hljs-string">&quot;session&quot;</span>/&gt;</span></code></pre><p>é’ˆå¯¹æŸä¸ªHTTP Sessionï¼ŒSpringå®¹å™¨ä¼šæ ¹æ®userPreferences beanå®šä¹‰åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„userPreferences beanå®ä¾‹ï¼Œä¸”è¯¥userPreferences beanä»…åœ¨å½“å‰HTTP Sessionå†…æœ‰æ•ˆã€‚ä¸requestä½œç”¨åŸŸä¸€æ ·ï¼Œå¯ä»¥æ ¹æ®éœ€è¦æ”¾å¿ƒçš„æ›´æ”¹æ‰€åˆ›å»ºå®ä¾‹çš„å†…éƒ¨çŠ¶æ€ï¼Œè€Œåˆ«çš„HTTP Sessionä¸­æ ¹æ®userPreferencesåˆ›å»ºçš„å®ä¾‹ï¼Œå°†ä¸ä¼šçœ‹åˆ°è¿™äº›ç‰¹å®šäºæŸä¸ªHTTP Sessionçš„çŠ¶æ€å˜åŒ–ã€‚å½“HTTP Sessionæœ€ç»ˆè¢«åºŸå¼ƒçš„æ—¶å€™ï¼Œåœ¨è¯¥HTTP Sessionä½œç”¨åŸŸå†…çš„beanä¹Ÿä¼šè¢«åºŸå¼ƒæ‰ã€‚</p><h4 id="6-3-5-å°ç»“"><a href="#6-3-5-å°ç»“" class="headerlink" title="6.3.5 å°ç»“"></a>6.3.5 å°ç»“</h4><p>requestã€sessionã€applicationï¼Œè¿™äº›åªèƒ½åœ¨webå¼€å‘ä¸­ä½¿ç”¨ã€‚</p><h2 id="7-Beançš„è‡ªåŠ¨è£…é…"><a href="#7-Beançš„è‡ªåŠ¨è£…é…" class="headerlink" title="7. Beançš„è‡ªåŠ¨è£…é…"></a>7. Beançš„è‡ªåŠ¨è£…é…</h2><img src="/images/Spring5/image-20201115221023159.png" alt="image-20201115221023159" style="zoom:50%;" /><p>ä»¥ä¸Šæ‰€æœ‰beançš„å±æ€§éƒ½æ˜¯æ‰‹åŠ¨è®¾ç½®çš„ã€‚</p><p>å› æ­¤å¼•å…¥äº†è‡ªåŠ¨è£…é…çš„æ¦‚å¿µã€‚</p><ul><li>è‡ªåŠ¨è£…é…æ—¶Springæ»¡è¶³beanä¾èµ–çš„ä¸€ç§æ–¹å¼ï¼</li><li>Springä¼šåœ¨ä¸Šä¸‹æ–‡ä¸­è‡ªåŠ¨å¯»æ‰¾ï¼Œå¹¶è‡ªåŠ¨ç»™beanè£…é…å±æ€§ã€‚</li></ul><p>Springä¸­beanæœ‰ä¸‰ç§è£…é…æœºåˆ¶ï¼Œåˆ†åˆ«æ˜¯ï¼š</p><ul><li>åœ¨xmlä¸­æ˜¾ç¤ºé…ç½®ï¼›</li><li>åœ¨javaä¸­æ˜¾ç¤ºé…ç½®ï¼›</li><li>éšå¼çš„beanå‘ç°æœºåˆ¶å’Œè‡ªåŠ¨è£…é…ï¼›ã€é‡è¦ã€‘</li></ul><p>Springçš„è‡ªåŠ¨è£…é…éœ€è¦ä»ä¸¤ä¸ªè§’åº¦å®ç°ï¼Œæˆ–è€…è¯´æ˜¯ä¸¤ä¸ªæ“ä½œï¼š</p><ol><li>ç»„ä»¶æ‰«æï¼ˆcomponent scanningï¼‰:<strong>Springä¼šè‡ªåŠ¨å‘ç°åº”ç”¨ä¸Šä¸‹æ–‡ä¸­æ‰€åˆ›å»ºçš„beanï¼›</strong></li><li>è‡ªåŠ¨è£…é…(autowriting)ï¼š<strong>Springè‡ªåŠ¨æ»¡è¶³beanä¹‹é—´çš„ä¾èµ–</strong>ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è¯´çš„IOC/DI</li></ol><p>ç»„ä»¶æ‰«æå’Œè‡ªåŠ¨è£…é…ç»„åˆå‘ä¼šå·¨å¤§å¨åŠ›ï¼Œä½¿å¾—æ˜¾ç¤ºçš„é…ç½®é™ä½åˆ°æœ€å°‘ã€‚</p><p>==<strong>æ¨èï¼šä¸ä½¿ç”¨è‡ªåŠ¨è£…é…xmlé…ç½®ï¼Œä½¿ç”¨æ³¨è§£ï¼</strong>==</p><hr><p>ä¸ªäººç†è§£ï¼šæ‰€è°“çš„è‡ªåŠ¨è£…é…ï¼Œå¯ä»¥ç®€å•çš„ç†è§£ä¸ºï¼Œspringä¼šè‡ªåŠ¨åœ¨springå®¹å™¨ä¸­å¯»æ‰¾æˆ‘ä»¬éœ€è¦è£…é…çš„beanå¯¹è±¡ã€‚</p><hr><h3 id="7-1-æµ‹è¯•ç¯å¢ƒæ­å»º"><a href="#7-1-æµ‹è¯•ç¯å¢ƒæ­å»º" class="headerlink" title="7.1 æµ‹è¯•ç¯å¢ƒæ­å»º"></a>7.1 æµ‹è¯•ç¯å¢ƒæ­å»º</h3><ol><li>åˆ›å»ºå®ä½“ç±»Catã€Dogã€User</li></ol><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Cat</span> </span>&#123;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">shout</span><span class="hljs-params">()</span> </span>&#123;        System.out.println(<span class="hljs-string">&quot;miao~&quot;</span>);    &#125;&#125;</code></pre><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Dog</span> </span>&#123;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">shout</span><span class="hljs-params">()</span> </span>&#123;        System.out.println(<span class="hljs-string">&quot;wang~&quot;</span>);    &#125;&#125;</code></pre><pre><code class="hljs java"><span class="hljs-meta">@Data</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>&#123;    <span class="hljs-keyword">private</span> Cat cat;    <span class="hljs-keyword">private</span> Dog dog;    <span class="hljs-keyword">private</span> String str;&#125;</code></pre><p>æµ‹è¯•ï¼š</p><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyTest</span> </span>&#123;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;        ApplicationContext applicationContext = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">&quot;applicationContext.xml&quot;</span>);        User user = applicationContext.getBean(<span class="hljs-string">&quot;user&quot;</span>, User.class);        user.getDog().shout();        user.getCat().shout();    &#125;</code></pre><img src="/images/Spring5/image-20201116140915343.png" alt="image-20201116140915343" style="zoom:50%;" /><p>æµ‹è¯•æˆåŠŸï¼ï¼</p><h3 id="7-2-autowire-â€œbyNameâ€-æŒ‰ç…§åç§°è‡ªåŠ¨è£…é…-autowriting"><a href="#7-2-autowire-â€œbyNameâ€-æŒ‰ç…§åç§°è‡ªåŠ¨è£…é…-autowriting" class="headerlink" title="7.2 autowire  â€œbyNameâ€ æŒ‰ç…§åç§°è‡ªåŠ¨è£…é…-autowriting"></a>7.2 autowire  â€œbyNameâ€ æŒ‰ç…§åç§°è‡ªåŠ¨è£…é…-autowriting</h3><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;dog&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.wen.pojo.Dog&quot;</span>/&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;cat&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.wen.pojo.Cat&quot;</span>/&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;user&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.wen.pojo.User&quot;</span> <span class="hljs-attr">autowire</span>=<span class="hljs-string">&quot;byName&quot;</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;str&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;renwen&quot;</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span></code></pre><p>å»é™¤åŸæ¥çš„åŸæ¥çš„propertyå¼•å…¥ï¼Œæ¢æˆautowireè‡ªåŠ¨è£…é…ï¼Œæµ‹è¯•ä¾ç„¶æˆåŠŸã€‚</p><hr><p>autowire-byNameçš„å·¥ä½œæœºåˆ¶ï¼š</p><p>å½“ä¸€ä¸ªbeanèŠ‚ç‚¹å¸¦æœ‰ autowire byNameçš„å±æ€§æ—¶ã€‚</p><ul><li>å…ˆæŸ¥æ‰¾è¯¥beanä¸­æ‰€æœ‰setæ–¹æ³•ï¼Œå½“æ‰¾åˆ°å…¶ä¸­ä¸€ä¸ªsetæ–¹æ³•æ—¶ï¼Œå¦‚setCatï¼Œå®ƒå°†ä¼šè‡ªåŠ¨å°†setå»é™¤ï¼Œå‰©ä½™Catï¼Œå¹¶å°†Catå¤§å†™çš„é¦–å­—æ¯è½¬æ¢æˆå°å†™cat</li><li>è½¬æ¢ä¹‹åï¼Œå»Springå®¹å™¨ä¸­å¯»æ‰¾beanidä¸ºcatçš„beanèŠ‚ç‚¹</li><li>å¦‚æœæ‰¾åˆ°ï¼Œå°±å–å‡ºæ³¨å…¥ï¼›æ²¡æœ‰æ‰¾åˆ°ï¼Œå°±æŠ¥ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼</li></ul><hr><p>å¦‚æœæˆ‘ä»¬å°†catçš„beanidæ¢æˆåˆ«çš„ï¼Œå¦‚catccï¼Œé‚£ä¹ˆå°†ä¼šæŠ¥é”™ï¼</p><img src="/images/Spring5/image-20201116142333671.png" alt="image-20201116142333671" style="zoom:50%;" /><img src="/images/Spring5/image-20201116142344885.png" alt="image-20201116142344885" style="zoom:50%;" /><img src="/images/Spring5/image-20201116142344885-1606489287311.png" alt="image-20201116142344885" style="zoom:50%;" /><h3 id="7-3-autowire-â€œbyTypeâ€-æŒ‰ç…§ç±»å‹è‡ªåŠ¨è£…é…-autowriting"><a href="#7-3-autowire-â€œbyTypeâ€-æŒ‰ç…§ç±»å‹è‡ªåŠ¨è£…é…-autowriting" class="headerlink" title="7.3 autowire â€œbyTypeâ€ æŒ‰ç…§ç±»å‹è‡ªåŠ¨è£…é…-autowriting"></a>7.3 autowire â€œbyTypeâ€ æŒ‰ç…§ç±»å‹è‡ªåŠ¨è£…é…-autowriting</h3><p>ä¸Šä¸€èŠ‚ï¼Œæˆ‘ä»¬å°†catçš„beanidæ”¹æˆäº†catccï¼Œspringæ‰¾ä¸åˆ°äº†ï¼Œå› ä¸ºåå­—ä¸ä¸€æ ·äº†ï¼Œä½†æ˜¯ï¼</p><p>æˆ‘ä»¬å¯ä»¥å°†<strong>autowireæ”¹æˆbyType</strong>ï¼Œè¯´ç™½äº†ï¼Œå°±æ˜¯<strong>é€šè¿‡æŸ¥æ‰¾springä¸­ä¸è‡ªå·±å¯¹è±¡å±æ€§ç›¸åŒçš„beanå¯¹è±¡è¿›è¡Œè£…é…</strong>ã€‚è¿™æ ·ä¸€æ¥ï¼Œä»£ç å°±èƒ½æ­£å¸¸è¿è¡Œäº†!</p><img src="/images/Spring5/image-20201116142952541.png" alt="image-20201116142952541" style="zoom:50%;" /><p><strong>ä½†æ˜¯</strong>ï¼Œè¿™ä¸ªä¹Ÿæœ‰ä¸€å®šçš„å¼Šç«¯ï¼Œå¦‚æœspringå®¹å™¨ä¸­ï¼Œè¿˜æœ‰Catç±»å‹ æ³¨å†Œçš„å¯¹è±¡ï¼Œå¦‚ä¸‹é¢çš„cat2</p><img src="/images/Spring5/image-20201116143151850.png" alt="image-20201116143151850" style="zoom:50%;" /><p>è¿™æ ·ä¸€æ¥ï¼Œå®¹å™¨ä¸­å‡ºç°ä¸¤ä¸ªç›¸åŒç±»å‹çš„beanå¯¹è±¡ï¼Œåœ¨å¯¹userè¿›è¡ŒæŒ‰ç±»å‹è‡ªåŠ¨è£…é…æ—¶å°±ä¼šæŠ¥é”™ï¼Œå‡ºç°ä¸å”¯ä¸€çš„å¼‚å¸¸ï¼å› æ­¤ï¼Œ<strong>è¦ä¿è¯åŒä¸€ç±»å‹çš„å¯¹è±¡ï¼Œåœ¨springå®¹å™¨ä¸­å”¯ä¸€ã€‚</strong></p><p>åœ¨byTypeä¸­ï¼Œå³ä½¿beanæ²¡æœ‰idï¼Œä½†æ˜¯è¦ä¿è¯å”¯ä¸€ï¼Œè¿™æ ·ä¹Ÿå¯ä»¥è‡ªåŠ¨è£…é…ï¼Œå› ä¸ºæ˜¯æŒ‰ç…§ç±»å‹è¿›è¡Œè£…é…çš„ï¼Œä¸idæ— å…³ï¼</p><h3 id="7-4-Springä¸­çš„è‡ªåŠ¨è£…é…å’ŒAutowired"><a href="#7-4-Springä¸­çš„è‡ªåŠ¨è£…é…å’ŒAutowired" class="headerlink" title="7.4 ==Springä¸­çš„è‡ªåŠ¨è£…é…å’ŒAutowired=="></a>7.4 ==Springä¸­çš„è‡ªåŠ¨è£…é…å’ŒAutowired==</h3><h4 id="1-è‡ªåŠ¨è£…é…"><a href="#1-è‡ªåŠ¨è£…é…" class="headerlink" title="1. è‡ªåŠ¨è£…é…"></a>1. è‡ªåŠ¨è£…é…</h4><p>å½“Springè£…é…Beanå±æ€§æ—¶ï¼Œåˆæ˜¯èƒ¡éå¸¸æ˜ç¡®ï¼Œå°±æ˜¯éœ€è¦å°†æŸä¸ªBeançš„å¼•ç”¨è£…é…ç»™æŒ‡å®šå±æ€§ã€‚</p><p>ä¸ºäº†åº”å¯¹è¿™ä¸ªæ˜ç¡®çš„è£…é…åœºæ™¯ï¼ŒSpringæä¾›äº†è‡ªåŠ¨è£…é…ï¼ˆautowritingï¼‰ã€‚ä¸å…¶æ˜¾å¼çš„è£…é…Beanå±æ€§ï¼Œä¸ºä½•ä¸è®©Springè¯†åˆ«å¯ä»¥è‡ªåŠ¨è£…é…çš„åœºæ™¯ã€‚</p><p>å½“æ¶‰åŠåˆ°è‡ªåŠ¨è£…é…Beançš„ä¾èµ–å…³ç³»æ—¶ï¼ŒSpringæœ‰å¤šç§å¤„ç†æ–¹å¼ã€‚å› æ­¤ï¼ŒSpringæä¾›äº†4ç§è£…é…ç­–ç•¥ã€‚</p><ol><li>byName</li></ol><p>æŠŠä¸Beançš„å±æ€§å…·æœ‰ç›¸åŒåå­—çš„å…¶ä»–Beanè‡ªåŠ¨è£…é…åˆ°Beançš„å¯¹åº”å±æ€§ä¸­ã€‚</p><ol start="2"><li><p>byType</p></li><li><p>constructor</p></li></ol><p>å®ƒæ˜¯è¯´ï¼ŒæŠŠä¸Beançš„æ„é€ å™¨å…¥å‚å…·æœ‰ç›¸åŒç±»å‹çš„å…¶ä»–Beanè‡ªåŠ¨è£…é…åˆ°Beanæ„é€ å™¨çš„å¯¹åº”å…¥å‚ä¸­ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼šå…·æœ‰ç›¸åŒç±»å‹çš„å…¶ä»–Beanè¿™å¥è¯è¯´æ˜å®ƒåœ¨æŸ¥æ‰¾å…¥å‚çš„æ—¶å€™ï¼Œè¿˜æ˜¯é€šè¿‡Beançš„ç±»å‹æ¥ç¡®å®šã€‚</p><p><strong>e.g.</strong></p><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span></span>&#123;<span class="hljs-keyword">private</span> Role role;  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">User</span><span class="hljs-params">(Role role)</span> </span>&#123;<span class="hljs-keyword">this</span>.role = role;&#125;&#125; &lt;bean id=&quot;user&quot; class=&quot;com.viewscenes.netsupervisor.entity.User&quot; autowire=&quot;constructor&quot;&gt;&lt;/bean&gt;å¤åˆ¶ä»£ç </code></pre><ol start="4"><li>autodetect</li></ol><p>è¿™ç§æ–¹æ³•è¢«æ ‡è®°ä¸ºæœå®æ–¹æ³•ï¼Œåœ¨Spring3.0ä¹‹åå·²ç»ä¸å†æ”¯æŒã€‚</p><p>å®ƒé¦–å…ˆä¼šå°è¯•ä½¿ç”¨constructorè¿›è¡Œè‡ªåŠ¨è£…é…ï¼Œå¦‚æœå¤±è´¥å†å°è¯•ä½¿ç”¨byTypeã€‚ä¸è¿‡ï¼Œå®ƒåœ¨Spring3.0ä¹‹åå·²ç»è¢«æ ‡è®°ä¸º@Deprecatedã€‚</p><ol start="5"><li>é»˜è®¤è‡ªåŠ¨è£…é…</li></ol><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œdefault-autowiredå±æ€§è¢«è®¾ç½®ä¸ºnoneï¼Œè¡¨ç¤ºæ‰€æœ‰çš„Beanéƒ½ä¸ä½¿ç”¨è‡ªåŠ¨è£…é…ï¼Œé™¤éBeanä¸Šé…ç½®äº†autowiredå±æ€§ã€‚å¦‚æœéœ€è¦ä¸ºæ‰€æœ‰çš„Beané…ç½®ç›¸åŒçš„autowiredå±æ€§ï¼Œæœ‰ä¸ªåŠæ³•å¯ä»¥ç®€åŒ–è¿™ä¸€æ“ä½œã€‚åœ¨æ ¹å…ƒç´ Beansä¸Šå¢åŠ å±æ€§default-autowired=â€ByTypeâ€.</p><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">default-autowire</span>=<span class="hljs-string">&quot;byType&quot;</span>&gt;</span></code></pre><p><strong>Springè‡ªåŠ¨è£…é…çš„ä¼˜ç‚¹ä¸è¨€è€Œå–»ï¼Œä½†æ˜¯äº‹å®ä¸Šï¼Œåœ¨Spring XMLé…ç½®æ–‡ä»¶é‡Œçš„è‡ªåŠ¨è£…é…å¹¶ä¸æ¨èä½¿ç”¨ï¼Œå…¶ä¸­æœ€å¤§çš„ç¼ºç‚¹åœ¨äºä¸ç¡®å®šæ€§ã€‚æˆ–è€…é™¤éä½ å¯¹æ•´ä¸ªSpringåº”ç”¨ä¸­çš„æ‰€æœ‰Beançš„æƒ…å†µäº†å¦‚æŒ‡æŒï¼Œä¸ç„¶è™½åˆ™Beançš„å¢å¤šå’Œå…³ç³»å¤æ‚åº¦çš„ä¸Šå‡ï¼Œæƒ…å†µå¯èƒ½ä¼šæ›´ç³Ÿç³•ã€‚</strong></p><h4 id="2-Autowired"><a href="#2-Autowired" class="headerlink" title="2. Autowired"></a>2. Autowired</h4><p>ä»spring3.5 å¼€å§‹ï¼Œå¼€å§‹æ”¯æŒä½¿ç”¨æ³¨è§£æ¥è‡ªåŠ¨è£…é…Beanå±æ€§ã€‚å®ƒå…è®¸æ›´ç»†ç²’åº¦çš„è‡ªåŠ¨è£…é…ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©æ€§çš„æ ‡æ³¨æŸä¸€ä¸ªå±æ€§æ¥å¯¹å…¶åº”ç”¨è‡ªåŠ¨è£…é…ã€‚</p><p>Springæ”¯æŒé›†ä¸­ä¸åŒçš„åº”ç”¨äºè‡ªåŠ¨è£…é…çš„æ³¨è§£ã€‚</p><ul><li>Springè‡ªå¸¦çš„@Autowiredæ³¨è§£ã€‚</li><li>JSR-330çš„Injectæ³¨è§£ã€‚</li><li>JSR-250çš„@Resourceæ³¨è§£</li></ul><p>æˆ‘ä»¬ä»Šå¤©åªé‡ç‚¹å…³æ³¨Autowiredæ³¨è§£ï¼</p><p><strong>åªéœ€è¦åœ¨éœ€è¦æ³¨å…¥çš„å±æ€§åŠ å…¥æ³¨è§£å³å¯ï¼</strong></p><pre><code class="hljs java"><span class="hljs-meta">@Autowired</span>UserService userService;</code></pre><p>ä¸è¿‡ï¼Œä½¿ç”¨å®ƒæœ‰å‡ ä¸ªç‚¹éœ€è¦æ³¨æ„ã€‚</p><ol><li>å¼ºåˆ¶æ€§</li></ol><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒå…·æœ‰å¼ºåˆ¶å¥‘çº¦ç‰¹æ€§ï¼Œå…¶æ‰€æ ‡æ³¨çš„å±æ€§å¿…é¡»æ˜¯å¯è£…é…çš„ã€‚å¦‚æœæ²¡æœ‰Beanå¯ä»¥è£…é…åˆ°Autowiredæ‰€æ ‡æ³¨çš„å±æ€§æˆ–å‚æ•°ä¸­ï¼Œé‚£ä¹ˆä½ ä¼šçœ‹åˆ°NoSuchBeanDefinitionExceptionçš„å¼‚å¸¸ä¿¡æ¯ã€‚</p><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">doResolveDependency</span><span class="hljs-params">(DependencyDescriptor descriptor, String beanName,</span></span><span class="hljs-function"><span class="hljs-params">Set&lt;String&gt; autowiredBeanNames, TypeConverter typeConverter)</span> <span class="hljs-keyword">throws</span> BeansException </span>&#123;<span class="hljs-comment">//æŸ¥æ‰¾Bean</span>Map&lt;String, Object&gt; matchingBeans = findAutowireCandidates(beanName, type, descriptor);<span class="hljs-comment">//å¦‚æœæ‹¿åˆ°çš„Beané›†åˆä¸ºç©ºï¼Œä¸”isRequiredï¼Œå°±æŠ›å‡ºå¼‚å¸¸ã€‚</span><span class="hljs-keyword">if</span> (matchingBeans.isEmpty()) &#123;<span class="hljs-keyword">if</span> (descriptor.isRequired()) &#123;raiseNoSuchBeanDefinitionException(type, <span class="hljs-string">&quot;&quot;</span>, descriptor);&#125;<span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;&#125;&#125;</code></pre><p>çœ‹åˆ°ä¸Šé¢çš„æºç ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°è¿™ä¸€ä¿¡æ¯ï¼ŒBeané›†åˆä¸ºç©ºä¸è¦ç´§ï¼Œå…³é”®æ˜¯isRequiredæ¡ä»¶ä¸èƒ½æˆç«‹ï¼Œé‚£ä¹ˆï¼Œå¦‚æœæˆ‘ä»¬ä¸ç¡®å®šå±æ€§æ˜¯å¦å¯ä»¥è£…é…ï¼Œå¯ä»¥è¿™æ ·æ¥ä½¿ç”¨Autowiredã€‚</p><pre><code class="hljs dart"><span class="hljs-meta">@Autowired</span>(<span class="hljs-keyword">required</span>=<span class="hljs-keyword">false</span>)UserService userService</code></pre><ol start="2"><li>è£…é…ç­–ç•¥</li></ol><p>æ›¾ç»æœ‰ä¸€ä¸ªé¢è¯•é¢˜ï¼š<strong>Autowiredæ˜¯æŒ‰ç…§ä»€ä¹ˆç­–ç•¥æ¥è‡ªåŠ¨è£…é…çš„å‘¢ï¼Ÿ</strong></p><p>å…³äºè¿™ä¸ªé—®é¢˜ï¼Œä¸èƒ½ä¸€æ¦‚è€Œè®ºï¼Œä½ ä¸èƒ½ç®€å•çš„è¯´æŒ‰ç…§ç±»å‹æˆ–è€…æŒ‰ç…§åç§°ã€‚ä½†æ˜¯å¯ä»¥ç¡®å®šçš„ä¸€ç‚¹æ˜¯ï¼Œ<strong>å®ƒé»˜è®¤æ˜¯æŒ‰ç…§ç±»å‹æ¥è‡ªåŠ¨è£…é…çš„ï¼Œå³byTypeã€‚</strong></p><p>å…³é”®ç‚¹findAutowireCandidatesè¿™ä¸ªæ–¹æ³•ã€‚</p><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">protected</span> Map&lt;String, Object&gt; <span class="hljs-title">findAutowireCandidates</span><span class="hljs-params">(</span></span><span class="hljs-function"><span class="hljs-params">String beanName, Class&lt;?&gt; requiredType, DependencyDescriptor descriptor)</span> </span>&#123;<span class="hljs-comment">//è·å–ç»™å®šç±»å‹çš„æ‰€æœ‰beanåç§°ï¼Œé‡Œé¢å®é™…å¾ªç¯æ‰€æœ‰çš„beanNameï¼Œè·å–å®ƒçš„å®ä¾‹</span><span class="hljs-comment">//å†é€šè¿‡isTypeMatchæ–¹æ³•æ¥ç¡®å®š</span>String[] candidateNames = BeanFactoryUtils.beanNamesForTypeIncludingAncestors(<span class="hljs-keyword">this</span>, requiredType, <span class="hljs-keyword">true</span>, descriptor.isEager());Map&lt;String, Object&gt; result = <span class="hljs-keyword">new</span> LinkedHashMap&lt;String, Object&gt;(candidateNames.length);<span class="hljs-comment">//æ ¹æ®è¿”å›çš„beanNameï¼Œè·å–å…¶å®ä¾‹è¿”å›</span><span class="hljs-keyword">for</span> (String candidateName : candidateNames) &#123;<span class="hljs-keyword">if</span> (!isSelfReference(beanName, candidateName) &amp;&amp; isAutowireCandidate(candidateName, descriptor)) &#123;result.put(candidateName, getBean(candidateName));&#125;&#125;<span class="hljs-keyword">return</span> result;&#125;</code></pre><p>final: <strong>@Autowiredé»˜è®¤ä½¿ç”¨byTypeæ¥è£…é…å±æ€§ï¼Œå¦‚æœåŒ¹é…åˆ°ç±»å‹çš„å¤šä¸ªå®ä¾‹ï¼Œå†é€šè¿‡byNameæ¥ç¡®å®šBeanã€‚</strong></p><p>å¦‚æœé€šè¿‡åç§°è¿˜æ˜¯ç¡®å®šä¸äº†ã€‚è¿˜æ˜¯determineAutowireCandidateè¿™ä¸ªæ–¹æ³•ï¼Œå®ƒè¿˜æœ‰ä¸¤ç§æ–¹å¼æ¥ç¡®å®šã€‚</p><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">protected</span> String <span class="hljs-title">determineAutowireCandidate</span><span class="hljs-params">(Map&lt;String, Object&gt; candidateBeans, </span></span><span class="hljs-function"><span class="hljs-params">DependencyDescriptor descriptor)</span> </span>&#123;Class&lt;?&gt; requiredType = descriptor.getDependencyType();<span class="hljs-comment">//é€šè¿‡@Primaryæ³¨è§£æ¥æ ‡è¯†Bean</span>String primaryCandidate = determinePrimaryCandidate(candidateBeans, requiredType);<span class="hljs-keyword">if</span> (primaryCandidate != <span class="hljs-keyword">null</span>) &#123;<span class="hljs-keyword">return</span> primaryCandidate;&#125;<span class="hljs-comment">//é€šè¿‡@Priority(value = 0)æ³¨è§£æ¥æ ‡è¯†Bean valueä¸ºä¼˜å…ˆçº§å¤§å°</span>String priorityCandidate = determineHighestPriorityCandidate(candidateBeans, requiredType);<span class="hljs-keyword">if</span> (priorityCandidate != <span class="hljs-keyword">null</span>) &#123;<span class="hljs-keyword">return</span> priorityCandidate;&#125;<span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;&#125;</code></pre><ul><li>Primary</li></ul><p>å®ƒçš„ä½œç”¨æ˜¯çœ‹Beanä¸Šæ˜¯å¦åŒ…å«@Primaryæ³¨è§£ï¼Œå¦‚æœåŒ…å«å°±è¿”å›ã€‚å½“ç„¶äº†ï¼Œä½ ä¸èƒ½æŠŠå¤šä¸ªBeanéƒ½è®¾ç½®ä¸º@Primaryï¼Œä¸ç„¶å°†ä¼šå¾—åˆ°NoUniqueBeanDefinitionExceptionå¼‚å¸¸ã€‚</p><ul><li>Priority</li></ul><p>ä½ ä¹Ÿå¯ä»¥åœ¨Beanä¸Šé…ç½®@Priorityæ³¨è§£ï¼Œå®ƒæœ‰ä¸ªintç±»å‹çš„å±æ€§valueï¼Œå¯ä»¥é…ç½®ä¼˜å…ˆçº§å¤§å°ã€‚æ•°å­—è¶Šå°çš„ï¼Œå°±ä¼šè¢«ä¼˜å…ˆåŒ¹é…ã€‚åŒæ ·çš„ï¼Œä½ ä¹Ÿä¸èƒ½æŠŠå¤šä¸ªBeançš„ä¼˜å…ˆçº§é…ç½®æˆç›¸åŒå¤§å°çš„æ•°å€¼ï¼Œå¦åˆ™NoUniqueBeanDefinitionExceptionå¼‚å¸¸ç…§æ ·ä¼šå‡ºç°ã€‚</p><p><strong>æœ€åéœ€è¦æ³¨æ„çš„æ˜¯ï¼šPriorityçš„åŒ…åœ¨javax.annotation.Priority  å¦‚æœæƒ³ä½¿ç”¨å®ƒè¿˜éœ€è¦å¼•å…¥ä¸€ä¸ªåæ ‡ã€‚</strong></p><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>javax.annotation<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>javax.annotation-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre><h4 id="3-æ€»ç»“"><a href="#3-æ€»ç»“" class="headerlink" title="3. æ€»ç»“"></a>3. æ€»ç»“</h4><p>ä¸»è¦é˜è¿°äº†Springä¸­çš„è‡ªåŠ¨è£…é…çš„é›†ä¸­ç­–ç•¥ï¼Œåˆé€šè¿‡æºç åˆ†æäº†Autowiredæ³¨è§£çš„ä½¿ç”¨æ–¹æ³•ã€‚åœ¨Spring3.0ä¹‹åï¼Œæœ‰æ•ˆçš„è‡ªåŠ¨è£…é…ç­–ç•¥åˆ†ä¸ºbyTypeã€byNameã€constructorä¸‰ç§æ–¹å¼ã€‚æ³¨è§£Autowiredé»˜è®¤ä½¿ç”¨byTypeæ¥è‡ªåŠ¨è£…é…ï¼Œå¦‚æœå­˜åœ¨ç±»å‹çš„å¤šä¸ªå®ä¾‹å°±å°è¯•ä½¿ç”¨byNameåŒ¹é…ï¼Œå¦‚æœé€šè¿‡byNameä¹Ÿç¡®å®šä¸äº†ï¼Œå¯ä»¥é€šè¿‡Primaryå’ŒPriorityæ³¨è§£æ¥ç¡®å®šã€‚</p><h3 id="7-5-è‡ªåŠ¨è£…é…Autowired"><a href="#7-5-è‡ªåŠ¨è£…é…Autowired" class="headerlink" title="7.5 è‡ªåŠ¨è£…é…Autowired"></a>7.5 è‡ªåŠ¨è£…é…Autowired</h3><ol><li>æ³¨è§£å®ç°è‡ªåŠ¨è£…é…</li></ol><p>JDK1.5å¼€å§‹æ”¯æŒæ³¨è§£ï¼ŒSpring2.5å¼€å§‹å»å…¨é¢æ”¯æŒæ³¨è§£ã€‚</p><p>å‡†å¤‡å·¥ä½œï¼š<strong>åˆ©ç”¨æ³¨è§£çš„æ–¹å¼æ³¨å…¥å±æ€§ã€‚</strong></p><ol><li>åœ¨springé…ç½®æ–‡ä»¶ä¸­å¼•å…¥contextæ–‡ä»¶å¤´çº¦æŸ</li></ol><pre><code class="hljs xml"> xmlns:context=&quot;http://www.springframework.org/schema/context&quot;http://www.springframework.org/schema/contexthttp://www.springframework.org/schema/context/spring-context.xsd</code></pre><ol start="2"><li>å¼€å¯<strong>å±æ€§</strong>æ³¨è§£æ”¯æŒ</li></ol><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">context:annotation-config</span>/&gt;</span></code></pre><hr><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><span class="hljs-tag">       <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/context&quot;</span></span><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><span class="hljs-tag"><span class="hljs-string">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span><span class="hljs-tag"><span class="hljs-string">        http://www.springframework.org/schema/context</span></span><span class="hljs-tag"><span class="hljs-string">        http://www.springframework.org/schema/context/spring-context.xsd</span></span><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">context:annotation-config</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span></code></pre><img src="/images/Spring5/image-20201120084923684.png" alt="image-20201120084923684" style="zoom:50%;" /><hr><h4 id="Autowired"><a href="#Autowired" class="headerlink" title="@Autowired"></a><strong>@Autowired</strong></h4><p>ç›´æ¥åœ¨å±æ€§ä¸Šä½¿ç”¨å³å¯ï¼ä¹Ÿå¯ä»¥ç›´æ¥åœ¨setteræ–¹æ³•ä¸Šä½¿ç”¨ã€‚</p><p><strong>ä½¿ç”¨Autowired æˆ‘ä»¬å¯ä»¥ä¸ç”¨ç¼–å†™setteræ–¹æ³•ï¼Œä½†æ˜¯å‰ææ˜¯è¿™ä¸ªè‡ªåŠ¨é…ç½®çš„å±æ€§åœ¨IOC(Spring)å®¹å™¨ä¸­å­˜åœ¨ï¼Œä¸”ç¬¦åˆåå­—byNameã€‚</strong></p><p><strong>æµ‹è¯•ï¼š</strong></p><ol><li>å°†å°†Userç±»ä¸­çš„setteræ–¹æ³•å»æ‰ï¼Œä½¿ç”¨@Autowiredæ³¨è§£ã€‚</li></ol><pre><code class="hljs java"><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>&#123;  <span class="hljs-meta">@Autowired</span>  <span class="hljs-keyword">private</span> Cat cat;  <span class="hljs-meta">@Autowired</span>  <span class="hljs-keyword">private</span> Dog dog;  <span class="hljs-keyword">private</span> String str;  <span class="hljs-function"><span class="hljs-keyword">public</span> Cat <span class="hljs-title">getCat</span><span class="hljs-params">()</span> </span>&#123;    <span class="hljs-keyword">return</span> cat;  &#125;  <span class="hljs-function"><span class="hljs-keyword">public</span> Dog <span class="hljs-title">getDog</span><span class="hljs-params">()</span> </span>&#123;    <span class="hljs-keyword">return</span> dog;  &#125;  <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getStr</span><span class="hljs-params">()</span> </span>&#123;    <span class="hljs-keyword">return</span> str;  &#125;&#125;</code></pre><ol start="2"><li>æ­¤æ—¶é…ç½®æ–‡ä»¶ä¸­çš„å†…å®¹</li></ol><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><span class="hljs-tag">       <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/context&quot;</span></span><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><span class="hljs-tag"><span class="hljs-string">                           https://www.springframework.org/schema/beans/spring-beans.xsd</span></span><span class="hljs-tag"><span class="hljs-string">                           http://www.springframework.org/schema/context</span></span><span class="hljs-tag"><span class="hljs-string">                           http://www.springframework.org/schema/context/spring-context.xsd</span></span><span class="hljs-tag"><span class="hljs-string">                           &quot;</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">context:annotation-config</span>/&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;user&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.wen.pojo.User&quot;</span>/&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;cat&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.wen.pojo.Cat&quot;</span>/&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;dog&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.wen.pojo.Dog&quot;</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span></code></pre><ol start="3"><li>æµ‹è¯•æˆåŠŸï¼Œè¾“å‡ºç»“æœï¼</li></ol><p><strong>ç§‘æ™®ï¼š</strong></p><ul><li>@Nullable  å­—æ®µæ ‡è®°äº†è¿™ä¸ªæ³¨è§£ï¼Œè¯´æ˜è¿™ä¸ªå­—æ®µå¯ä»¥ä¸ºnull</li><li>@Autowired(required = false)</li></ul><p>å¦‚æœæ˜¾å¼å®šä¹‰äº†Autowiredçš„requiredå±æ€§ä¸ºfalseï¼Œè¯´æ˜è¿™ä¸ªå¯¹è±¡å¯ä»¥ä¸ºnullï¼Œå¦åˆ™ä¸å…è®¸ã€‚å› ä¸ºrequiredçš„å€¼é»˜è®¤ä¸ºtrueã€‚</p><h4 id="Qualifer"><a href="#Qualifer" class="headerlink" title="@Qualifer"></a>@Qualifer</h4><p><strong>@Autowired + @Qualifier</strong></p><ul><li><p>@Autowiredæ˜¯æ ¹æ®ç±»å‹è‡ªåŠ¨è£…é…çš„ï¼Œ<strong>åŠ ä¸Š</strong>@Qualifieråˆ™æ ¹æ®byNameçš„æ–¹å¼è‡ªåŠ¨è£…é…ã€‚</p></li><li><p><strong>@Qualifierä¸èƒ½å•ç‹¬ä½¿ç”¨ã€‚</strong></p></li></ul><p>æµ‹è¯•å®éªŒæ­¥éª¤ï¼š</p><pre><code class="hljs java"><span class="hljs-meta">@Data</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>&#123;    <span class="hljs-meta">@Autowired</span>    <span class="hljs-keyword">private</span> Cat cat;    <span class="hljs-meta">@Autowired</span>    <span class="hljs-keyword">private</span> Dog dog;    <span class="hljs-keyword">private</span> String str;&#125;</code></pre><p>é…ç½®æ–‡ä»¶ä¿®æ”¹å†…å®¹ï¼Œä¿è¯ç±»å‹å­˜åœ¨å¯¹è±¡ã€‚ä¸”åå­—ä¸ä¸ºç±»çš„é»˜è®¤åå­—ï¼</p><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><span class="hljs-tag">       <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/context&quot;</span></span><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><span class="hljs-tag"><span class="hljs-string">                           https://www.springframework.org/schema/beans/spring-beans.xsd</span></span><span class="hljs-tag"><span class="hljs-string">                           http://www.springframework.org/schema/context</span></span><span class="hljs-tag"><span class="hljs-string">                           http://www.springframework.org/schema/context/spring-context.xsd</span></span><span class="hljs-tag"><span class="hljs-string">                           &quot;</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">context:annotation-config</span>/&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;user&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.wen.pojo.User&quot;</span>/&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;cat1&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.wen.pojo.Cat&quot;</span>/&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;cat2&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.wen.pojo.Cat&quot;</span>/&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;dog1&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.wen.pojo.Dog&quot;</span>/&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;dog2&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.wen.pojo.Dog&quot;</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span></code></pre><ol start="2"><li>æ²¡æœ‰åŠ Qualifieræµ‹è¯•ï¼Œç›´æ¥æŠ¥é”™</li></ol><img src="/images/Spring5/image-20201120104904576.png" alt="image-20201120104904576" style="zoom:50%;" /><p>å› ä¸ºæ˜¾ç¤ºæŒ‰ç…§ç±»å‹æ‰¾å¯»ï¼Œå‘ç°æœ‰ä¸¤ä¸ªï¼Œä¹‹åæŒ‰ç…§nameå¯»æ‰¾ï¼Œæ‰¾ä¸åˆ°ç›¸åŒ¹é…çš„é¡¹ï¼Œæ‰€ä»¥æŠ¥é”™äº†ï¼</p><ol start="3"><li>åœ¨å±æ€§ä¸Šæ·»åŠ Qualifieræ³¨è§£</li></ol><pre><code class="hljs java"><span class="hljs-meta">@Data</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>&#123;  <span class="hljs-meta">@Autowired</span>  <span class="hljs-meta">@Qualifier(value = &quot;cat1&quot;)</span>  <span class="hljs-keyword">private</span> Cat cat;  <span class="hljs-meta">@Autowired</span>  <span class="hljs-meta">@Qualifier(value = &quot;dog1&quot;)</span>  <span class="hljs-keyword">private</span> Dog dog;  <span class="hljs-keyword">private</span> String str;&#125;</code></pre><ol start="4"><li>æµ‹è¯•ï¼Œæµ‹è¯•æˆåŠŸï¼ŒæˆåŠŸè¾“å‡ºï¼</li></ol><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyTest</span> </span>&#123;  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;    ApplicationContext applicationContext = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">&quot;applicationContext.xml&quot;</span>);    User user = applicationContext.getBean(<span class="hljs-string">&quot;user&quot;</span>, User.class);    user.getCat().shout();  &#125;&#125;</code></pre><img src="/images/Spring5/image-20201120105240612.png" alt="image-20201120105240612" style="zoom:50%;" /><h4 id="Resources"><a href="#Resources" class="headerlink" title="@Resources"></a>@Resources</h4><ol><li>Resourceså¦‚æœ‰æŒ‡å®šçš„nameå±æ€§ï¼Œå…ˆæŒ‰ç…§è¯¥å±æ€§è¿›è¡ŒbyNameæ–¹å¼æŸ¥æ‰¾è£…é…ã€‚</li><li>å…¶æ¬¡å†è¿›è¡Œé»˜è®¤çš„byNameæ–¹å¼è¿›è¡Œè£…é…</li><li>å¦‚æœä»¥ä¸Šéƒ½ä¸æˆåŠŸï¼Œåˆ™æŒ‰byTypeçš„æ–¹å¼è‡ªåŠ¨è£…é…ã€‚</li><li>éƒ½ä¸æˆåŠŸï¼Œåˆ™æŠ¥å¼‚å¸¸</li></ol><p>æµ‹è¯•å®éªŒï¼š</p><ol><li>beansä¸­çš„é…ç½®</li></ol><p>Catè®¾ç½®ä¸¤ä¸ªï¼Œå¿…é¡»è®¾ç½®Resources æŒ‡å®šåç§°è¿›è¡ŒæŸ¥æ‰¾ã€‚Dogè®¾ç½®ä¸€ä¸ªï¼Œä¿è¯å¯ä»¥è‡ªåŠ¨æ‰¾åˆ°ï¼</p><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><span class="hljs-tag">       <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/context&quot;</span></span><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><span class="hljs-tag"><span class="hljs-string">                           https://www.springframework.org/schema/beans/spring-beans.xsd</span></span><span class="hljs-tag"><span class="hljs-string">                           http://www.springframework.org/schema/context</span></span><span class="hljs-tag"><span class="hljs-string">                           http://www.springframework.org/schema/context/spring-context.xsd</span></span><span class="hljs-tag"><span class="hljs-string">                           &quot;</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">context:annotation-config</span>/&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;user&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.wen.pojo.User&quot;</span>/&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;cat1&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.wen.pojo.Cat&quot;</span>/&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;cat2&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.wen.pojo.Cat&quot;</span>/&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;dog1&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.wen.pojo.Dog&quot;</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span></code></pre><ol start="2"><li>å®ä½“ç±»</li></ol><pre><code class="hljs java"><span class="hljs-meta">@Data</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>&#123;  <span class="hljs-meta">@Resource(name = &quot;cat1&quot;)</span>  <span class="hljs-keyword">private</span> Cat cat;  <span class="hljs-meta">@Resource</span>  <span class="hljs-keyword">private</span> Dog dog;  <span class="hljs-keyword">private</span> String str;&#125;</code></pre><ol start="3"><li>æµ‹è¯•</li></ol><p>æµ‹è¯•ç±»ï¼š</p><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyTest</span> </span>&#123;  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;    ApplicationContext applicationContext = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">&quot;applicationContext.xml&quot;</span>);    User user = applicationContext.getBean(<span class="hljs-string">&quot;user&quot;</span>, User.class);    user.getCat().shout();  &#125;&#125;</code></pre><p>æµ‹è¯•æˆåŠŸï¼ï¼</p><img src="/images/Spring5/image-20201120111233221.png" alt="image-20201120111233221" style="zoom:50%;" /><p><strong>ç»“è®ºï¼š</strong></p><p>ä¸»è¦è¿‡ç¨‹ï¼šå…ˆè¿›è¡ŒbyNameæŸ¥æ‰¾ï¼Œå¤±è´¥ï¼›å†è¿›è¡ŒbyTypeæŸ¥æ‰¾ï¼ŒæˆåŠŸï¼</p><p>@Autowiredä¸@Resourceå¼‚åŒï¼š</p><p>1ã€@Autowiredä¸@Resourceéƒ½å¯ä»¥ç”¨æ¥è£…é…beanã€‚éƒ½å¯ä»¥å†™åœ¨å­—æ®µä¸Šï¼Œæˆ–å†™åœ¨setteræ–¹æ³•ä¸Šã€‚</p><p>2ã€@Autowiredé»˜è®¤æŒ‰ç±»å‹è£…é…ï¼ˆå±äºspringè§„èŒƒï¼‰ï¼Œé»˜è®¤æƒ…å†µä¸‹å¿…é¡»è¦æ±‚ä¾èµ–å¯¹è±¡å¿…é¡»å­˜åœ¨ï¼Œå¦‚æœè¦å…è®¸null å€¼ï¼Œå¯ä»¥è®¾ç½®å®ƒçš„requiredå±æ€§ä¸ºfalseï¼Œå¦‚ï¼š@Autowired(required=false) ï¼Œå¦‚æœæˆ‘ä»¬æƒ³ä½¿ç”¨åç§°è£…é…å¯ä»¥ç»“åˆ@Qualifieræ³¨è§£è¿›è¡Œä½¿ç”¨</p><p>3ã€@Resourceï¼ˆå±äºJ2EEå¤è¿”ï¼‰ï¼Œé»˜è®¤æŒ‰ç…§åç§°è¿›è¡Œè£…é…ï¼Œåç§°å¯ä»¥é€šè¿‡nameå±æ€§è¿›è¡ŒæŒ‡å®šã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šnameå±æ€§ï¼Œå½“æ³¨è§£å†™åœ¨å­—æ®µä¸Šæ—¶ï¼Œé»˜è®¤å–å­—æ®µåè¿›è¡ŒæŒ‰ç…§åç§°æŸ¥æ‰¾ï¼Œå¦‚æœæ³¨è§£å†™åœ¨setteræ–¹æ³•ä¸Šé»˜è®¤å–å±æ€§åè¿›è¡Œè£…é…ã€‚å½“æ‰¾ä¸åˆ°ä¸åç§°åŒ¹é…çš„beanæ—¶æ‰æŒ‰ç…§ç±»å‹è¿›è¡Œè£…é…ã€‚ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœnameå±æ€§ä¸€æ—¦æŒ‡å®šï¼Œå°±åªä¼šæŒ‰ç…§åç§°è¿›è¡Œè£…é…ã€‚</p><p>å®ƒä»¬çš„ä½œç”¨ç›¸åŒéƒ½æ˜¯ç”¨æ³¨è§£æ–¹å¼æ³¨å…¥å¯¹è±¡ï¼Œä½†æ‰§è¡Œé¡ºåºä¸åŒã€‚@Autowiredå…ˆbyTypeï¼Œ@Resourceå…ˆbyNameã€‚</p><h2 id="8-Springæ³¨è§£å¼€å‘"><a href="#8-Springæ³¨è§£å¼€å‘" class="headerlink" title="8. Springæ³¨è§£å¼€å‘"></a>8. Springæ³¨è§£å¼€å‘</h2><img src="/images/Spring5/image-20201120114001211.png" alt="image-20201120114001211" style="zoom:50%;" /><p>åœ¨spring4 ä¹‹åï¼Œæƒ³è¦ä½¿ç”¨æ³¨è§£å½¢å¼ï¼Œå¿…é¡»è¦å¼•å…¥aopåŒ…ã€‚å…¶å®åœ¨å¼•å…¥webmvcçš„ä¾èµ–ä¹‹åï¼Œå°±å·²ç»å¼•å…¥aopçš„åŒ…ã€‚</p><p>åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œè¿˜å¾—è¦å¼•å…¥ä¸€ä¸ªcontextçº¦æŸï¼</p><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><span class="hljs-tag">       <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/context&quot;</span></span><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><span class="hljs-tag"><span class="hljs-string">                           https://www.springframework.org/schema/beans/spring-beans.xsd</span></span><span class="hljs-tag"><span class="hljs-string">                           http://www.springframework.org/schema/context</span></span><span class="hljs-tag"><span class="hljs-string">                           http://www.springframework.org/schema/context/spring-context.xsd</span></span><span class="hljs-tag"><span class="hljs-string">                           &quot;</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">context:annotation-config</span>/&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;user&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.wen.pojo.User&quot;</span>/&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;cat1&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.wen.pojo.Cat&quot;</span>/&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;cat2&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.wen.pojo.Cat&quot;</span>/&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;dog1&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.wen.pojo.Dog&quot;</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span></code></pre><h3 id="8-1-Beançš„å®ç°"><a href="#8-1-Beançš„å®ç°" class="headerlink" title="8.1 Beançš„å®ç°"></a>8.1 Beançš„å®ç°</h3><p>æˆ‘ä»¬ä¹‹å‰éƒ½æ˜¯ä½¿ç”¨beançš„æ ‡ç­¾è¿›è¡Œbeanæ³¨å…¥ï¼Œä½†æ˜¯å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬éƒ½ä¼šä½¿ç”¨æ³¨è§£ï¼</p><ol><li>é…ç½®æ‰«æå“ªäº›åŒ…ä¸‹çš„æ³¨è§£</li></ol><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><span class="hljs-tag">       <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/context&quot;</span></span><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><span class="hljs-tag"><span class="hljs-string">                           https://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span><span class="hljs-comment">&lt;!--æŒ‡å®šæ³¨è§£æ‰«æåŒ…--&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">&quot;com.wen.pojo&quot;</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span></code></pre><ol start="2"><li>åœ¨æŒ‡å®šåŒ…ä¸‹ç¼–å†™ç±»ï¼Œå¢åŠ æ³¨è§£</li></ol><pre><code class="hljs java"><span class="hljs-meta">@Component(&quot;user&quot;)</span><span class="hljs-comment">/* ç›¸å½“äº &lt;bean id=&quot;user&quot; class=&quot;com.wen.pojo.User&quot;&gt;*/</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>&#123;  <span class="hljs-keyword">private</span> String name = <span class="hljs-string">&quot;2222&quot;</span>;&#125;</code></pre><ol start="3"><li>æµ‹è¯•</li></ol><img src="/images/Spring5/image-20201120142244915.png" alt="image-20201120142244915" style="zoom:50%;" /><h3 id="8-2-å±æ€§å¦‚ä½•æ³¨å…¥"><a href="#8-2-å±æ€§å¦‚ä½•æ³¨å…¥" class="headerlink" title="8.2 å±æ€§å¦‚ä½•æ³¨å…¥"></a>8.2 å±æ€§å¦‚ä½•æ³¨å…¥</h3><p>ä½¿ç”¨æ³¨è§£æ³¨å…¥å±æ€§ã€‚</p><ol><li>å¯ä»¥ä¸ä½¿ç”¨setæ–¹æ³•ï¼Œç›´æ¥åœ¨å®šä¹‰å±æ€§åä¸Šæ–¹æ·»åŠ @Value(â€œå€¼â€)</li></ol><pre><code class="hljs java"><span class="hljs-meta">@Component(&quot;user&quot;)</span><span class="hljs-comment">/* ç›¸å½“äº &lt;bean id=&quot;user&quot; class=&quot;com.wen.pojo.User&quot;&gt;*/</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>&#123;  <span class="hljs-meta">@Value(&quot;333&quot;)</span>  <span class="hljs-comment">/* ç›¸å½“äºé…ç½®æ–‡ä»¶ä¸­ &lt;property name=&quot;name&quot; value=&quot;333&quot;&gt;*/</span>  <span class="hljs-keyword">private</span> String name;&#125;</code></pre><img src="/images/Spring5/image-20201120142530432.png" alt="image-20201120142530432" style="zoom:50%;" /><ol start="2"><li>å¦‚æœæä¾›äº†setæ–¹æ³•ï¼Œåœ¨setæ–¹æ³•ä¸Šæ·»åŠ @Value(â€œå€¼â€)</li></ol><pre><code class="hljs java"><span class="hljs-meta">@Component(&quot;user&quot;)</span><span class="hljs-comment">/* ç›¸å½“äº &lt;bean id=&quot;user&quot; class=&quot;com.wen.pojo.User&quot;&gt;*/</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>&#123;  <span class="hljs-comment">//    @Value(&quot;333&quot;)</span>  <span class="hljs-comment">/* ç›¸å½“äºé…ç½®æ–‡ä»¶ä¸­ &lt;property name=&quot;name&quot; value=&quot;333&quot;&gt;*/</span>  <span class="hljs-keyword">private</span> String name;  <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getName</span><span class="hljs-params">()</span> </span>&#123;    <span class="hljs-keyword">return</span> name;  &#125;  <span class="hljs-meta">@Value(&quot;444&quot;)</span>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setName</span><span class="hljs-params">(String name)</span> </span>&#123;    <span class="hljs-keyword">this</span>.name = name;  &#125;&#125;</code></pre><img src="/images/Spring5/image-20201120142815550.png" alt="image-20201120142815550" style="zoom:50%;" /><h3 id="8-3-è¡ç”Ÿçš„æ³¨è§£"><a href="#8-3-è¡ç”Ÿçš„æ³¨è§£" class="headerlink" title="8.3 è¡ç”Ÿçš„æ³¨è§£"></a>8.3 è¡ç”Ÿçš„æ³¨è§£</h3><p>æˆ‘ä»¬çš„è¿™äº›æ³¨è§£ï¼Œå°±æ˜¯ä»£æ›¿äº†åœ¨é…ç½®æ–‡ä»¶å½“ä¸­é…ç½®æ­¥éª¤è€Œå·²ï¼æ›´åŠ çš„æ–¹ä¾¿å¿«æ·ï¼</p><p><strong>@Componentä¸‰ä¸ªè¡ç”Ÿæ³¨è§£</strong></p><p>ä¸ºäº†æ›´å¥½çš„è¿›è¡Œåˆ†å±‚ï¼ŒSpringå¯ä»¥ä½¿ç”¨å…¶ä»–ä¸‰ä¸ªæ³¨è§£ï¼ŒåŠŸèƒ½ä¸€æ ·ï¼Œç›®å‰ä½¿ç”¨å“ªä¸€ä¸ªåŠŸèƒ½éƒ½ä¸€æ ·ã€‚</p><ul><li>@Controllerï¼šWebå±‚</li><li>@Serviceï¼šserviceå±‚</li><li>@Repositoryï¼šdaoå±‚</li></ul><p>å†™ä¸Šè¿™äº›æ³¨è§£ï¼Œå°±ç›¸å½“äºå°†è¿™ä¸ªç±»äº¤ç»™Springç®¡ç†è£…é…äº†ï¼</p><h3 id="8-4-è‡ªåŠ¨è£…é…"><a href="#8-4-è‡ªåŠ¨è£…é…" class="headerlink" title="8.4 è‡ªåŠ¨è£…é…"></a>8.4 è‡ªåŠ¨è£…é…</h3><p>åœ¨Beançš„è‡ªåŠ¨è£…é…ä¸­è®²è§£è¿‡ï¼Œå°±ä¸å†™äº†ï¼</p><h3 id="8-5-ä½œç”¨åŸŸ"><a href="#8-5-ä½œç”¨åŸŸ" class="headerlink" title="8.5 ä½œç”¨åŸŸ"></a>8.5 ä½œç”¨åŸŸ</h3><p><strong>@Scope</strong></p><ul><li><strong>singleton</strong>ï¼šé»˜è®¤çš„ï¼ŒSpringä¼šé‡‡ç”¨å•ä¾‹æ¨¡å¼åˆ›å»ºè¿™ä¸ªå¯¹è±¡ã€‚å…³é—­å·¥å‚ï¼Œæ‰€æœ‰çš„å¯¹è±¡éƒ½ä¼šé”€æ¯ã€‚</li><li><strong>prototype</strong>ï¼šå¤šä¾‹æ¨¡å¼ã€‚å…³é—­å·¥å‚ï¼Œæ‰€æœ‰çš„å¯¹è±¡ä¸ä¼šé”€æ¯ã€‚å†…éƒ¨çš„åƒåœ¾å›æ”¶æœºåˆ¶ä¼šå›æ”¶ã€‚</li></ul><pre><code class="hljs java"><span class="hljs-meta">@Component(&quot;user&quot;)</span><span class="hljs-meta">@Scope(&quot;prototype&quot;)</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>&#123;  <span class="hljs-keyword">private</span> String name;  <span class="hljs-meta">@Value(&quot;444&quot;)</span>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setName</span><span class="hljs-params">(String name)</span> </span>&#123;    <span class="hljs-keyword">this</span>.name = name;  &#125;&#125;</code></pre><h3 id="8-6-å°ç»“"><a href="#8-6-å°ç»“" class="headerlink" title="8.6 å°ç»“"></a>8.6 å°ç»“</h3><p><strong>XMLä¸æ³¨è§£æ¯”è¾ƒ</strong></p><ul><li>XMLå¯ä»¥é€‚ç”¨ä»»ä½•åœºæ™¯ï¼Œç»“æ„æ¸…æ™°ï¼Œç»´æŠ¤æ–¹ä¾¿ã€‚</li><li>æ³¨è§£ä¸æ˜¯è‡ªå·±æä¾›çš„ç±»ä½¿ç”¨ä¸äº†ï¼Œå¼€å‘ç®€å•ã€‚</li></ul><p><strong>XMLä¸æ³¨è§£æ•´åˆå¼€å‘ï¼šæ¨èæœ€ä½³å®è·µ</strong></p><ul><li>XMLç®¡ç†Bean</li><li>æ³¨è§£å®Œæˆå±æ€§æ³¨å…¥</li><li>==<strong>ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥ä¸ç”¨æ‰«æï¼Œæ‰«ææ˜¯ä¸ºäº†ç±»ä¸Šçš„æ³¨è§£ã€‚</strong>==</li></ul><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">context:annotation-config</span>/&gt;</span></code></pre><p><strong>ä½œç”¨ï¼š</strong>(ä¸Šé¢è¿™å¥<a href="context:annotation-config/">context:annotation-config/</a>çš„ä½œç”¨)</p><ul><li>è¿›è¡Œæ³¨è§£é©±åŠ¨æ³¨å†Œï¼Œä»è€Œä½¿æ³¨è§£ç”Ÿæ•ˆã€‚</li><li>ç”¨äºæ¿€æ´»é‚£äº›å·²ç»åœ¨Springå®¹å™¨é‡Œæ³¨å†Œè¿‡çš„beanä¸Šé¢çš„æ³¨è§£ï¼Œä¹Ÿå°±æ˜¯æ˜¾å¼çš„å‘Springæ³¨å†Œã€‚</li><li>å¦‚æœä¸æ‰«æåŒ…ï¼Œå°±éœ€è¦æ‰‹åŠ¨é…ç½®bean</li><li>å¦‚æœä¸åŠ æ³¨è§£é©±åŠ¨ï¼Œåˆ™æ³¨å…¥çš„å€¼ä¸ºNullï¼</li></ul><h3 id="8-7-åŸºäºJavaç±»è¿›è¡Œé…ç½®"><a href="#8-7-åŸºäºJavaç±»è¿›è¡Œé…ç½®" class="headerlink" title="8.7 åŸºäºJavaç±»è¿›è¡Œé…ç½®"></a>8.7 åŸºäºJavaç±»è¿›è¡Œé…ç½®</h3><p>JavaConfigåŸæ¥æ˜¯ä¸€ä¸ªSpringçš„ä¸€ä¸ªå­é¡¹ç›®ï¼Œå®ƒé€šè¿‡Javaç±»çš„æ–¹å¼æä¾›Beançš„å®šä¹‰ä¿¡æ¯ï¼Œåœ¨Spring4çš„ç‰ˆæœ¬ï¼ŒJavaConfigå·²ç»æ­£å¼æˆä¸ºSpring4çš„æ ¸å¿ƒåŠŸèƒ½ã€‚</p><p><strong>æµ‹è¯•ï¼š</strong></p><ol><li>ç¼–å†™ä¸€ä¸ªå®ä½“ç±» User</li></ol><pre><code class="hljs java"><span class="hljs-meta">@Component</span> <span class="hljs-comment">//å°†è¿™ä¸ªç±»æ ‡æ³¨ä¸ºSpringçš„ä¸€ä¸ªç»„ä»¶ï¼Œæ”¾åˆ°å®¹å™¨ä¸­ï¼</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>&#123;  <span class="hljs-meta">@Value(&quot;999&quot;)</span>  <span class="hljs-keyword">private</span> String name;  <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getName</span><span class="hljs-params">()</span> </span>&#123;    <span class="hljs-keyword">return</span> name;  &#125;&#125;</code></pre><ol start="2"><li>æ–°å»ºä¸€ä¸ªconfigé…ç½®åŒ…ï¼Œç¼–å†™ä¸€ä¸ªMyConfigé…ç½®ç±»</li></ol><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span> <span class="hljs-comment">// ä»£è¡¨è¿™æ˜¯ä¸€ä¸ªé…ç½®ç±»</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyConfig</span> </span>&#123;      <span class="hljs-meta">@Bean</span>  <span class="hljs-comment">//té€šè¿‡æ–¹æ³•æ³¨å†Œä¸€ä¸ªbean</span>  <span class="hljs-comment">//è¿™é‡Œçš„è¿”å›å€¼å°±æ˜¯Beançš„ç±»å‹ï¼Œæ–¹æ³•åå°±æ˜¯Beançš„id</span>    <span class="hljs-function"><span class="hljs-keyword">public</span> User <span class="hljs-title">user</span><span class="hljs-params">()</span></span>&#123;        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> User();    &#125;&#125;</code></pre><ol start="3"><li>ç¼–å†™æµ‹è¯•ç±»ï¼Œæ³¨æ„è¿™é‡Œæµ‹è¯•ç±»å˜åŒ–äº†ï¼Œä¸å†æ˜¯ä»é…ç½®æ–‡ä»¶ä¸­è·å–å®¹å™¨çš„ä¸Šä¸‹æ–‡äº†ï¼ï¼</li></ol><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyTest</span> </span>&#123;  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;    <span class="hljs-comment">//ä¸å†æ˜¯ä»é…ç½®æ–‡ä»¶ä¸­è·å–ä¸Šä¸‹æ–‡ï¼Œè€Œæ˜¯ä»é…ç½®ç±»ä¸­è·å–ä¸Šä¸‹æ–‡ï¼ï¼</span>    ApplicationContext applicationContext = <span class="hljs-keyword">new</span> AnnotationConfigApplicationContext(MyConfig.class);    User user = applicationContext.getBean(<span class="hljs-string">&quot;user&quot;</span>, User.class);    System.out.println(user.getName());  &#125;&#125;</code></pre><p>æµ‹è¯•æˆåŠŸï¼</p><img src="/images/Spring5/image-20201120151212913.png" alt="image-20201120151212913" style="zoom:50%;" /><p><strong>åŒæ—¶é…ç½®ç±»ä¹Ÿå¯ä»¥åƒä¹‹å‰é…ç½®æ–‡ä»¶é‚£æ ·ï¼Œå¯¼å…¥å…¶ä»–çš„é…ç½®ç±»ï¼</strong></p><ol><li>æˆ‘ä»¬å†ç¼–å†™ä¸€ä¸ªæµ‹è¯•ç±»ï¼</li></ol><pre><code class="hljs java"><span class="hljs-meta">@COnfiguration</span> <span class="hljs-comment">//ä»£è¡¨è¿™æ˜¯ä¸€ä¸ªé…ç½®ç±»</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyConfig2</span></span>&#123;  &#125;</code></pre><ol start="2"><li>åœ¨ä¹‹å‰çš„é…ç½®ç±»ä¸­æˆ‘ä»¬æ¥é€‰æ‹©å¯¼å…¥è¿™ä¸ªé…ç½®ç±»ã€‚</li></ol><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><span class="hljs-meta">@Import(MyConfig2.class)</span><span class="hljs-comment">//å¯¼å…¥å…¶ä»–é…ç½®ç±»ï¼Œç±»ä¼¼äºé…ç½®æ–‡ä»¶ä¸­çš„includeæ ‡ç­¾ã€‚</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyConfig</span></span>&#123;  <span class="hljs-meta">@Bean</span>  <span class="hljs-function"><span class="hljs-keyword">public</span> User <span class="hljs-title">user</span><span class="hljs-params">()</span></span>&#123;    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> User();  &#125;&#125;</code></pre><p>å…³äºè¿™ç§Javaç±»çš„é…ç½®æ–¹å¼ï¼Œæˆ‘ä»¬åœ¨ä¹‹åçš„SpringBootå’ŒSpringCloudä¸­è¿˜ä¼šå¤§é‡çœ‹åˆ°ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“è¿™äº›æ³¨è§£çš„ä½œç”¨å³å¯ï¼ï¼</p><h2 id="9-é™æ€-åŠ¨æ€ä»£ç†æ¨¡å¼"><a href="#9-é™æ€-åŠ¨æ€ä»£ç†æ¨¡å¼" class="headerlink" title="9. é™æ€/åŠ¨æ€ä»£ç†æ¨¡å¼"></a>9. é™æ€/åŠ¨æ€ä»£ç†æ¨¡å¼</h2><p>ä¸ºä»€ä¹ˆè¦å­¦ä¹ ä»£ç†æ¨¡å¼ï¼Œå› ä¸ºAOP*ï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰çš„åº•å±‚æœºåˆ¶å°±æ˜¯åŠ¨æ€ä»£ç†ï¼</p><p>ä»£ç†æ¨¡å¼ï¼š</p><ul><li>é™æ€ä»£ç†</li><li>åŠ¨æ€ä»£ç†</li></ul><p><strong>å­¦ä¹ AOPä¹‹å‰ï¼Œæˆ‘ä»¬è¦å…ˆäº†è§£ä¸€ä¸‹ä»£ç†æ¨¡å¼ï¼</strong></p><p>ä»£ç†æ¨¡å¼ä½œä¸º23ç§ç»å…¸è®¾è®¡æ¨¡å¼ä¹‹ä¸€ï¼Œå…¶æ¯”è¾ƒå®˜æ–¹çš„å®šä¹‰ä¸ºâ€œä¸ºå…¶ä»–å¯¹è±¡æä¾›ä¸€ç§ä»£ç†ä»¥æ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®â€ï¼Œç®€å•ç‚¹è¯´å°±æ˜¯ï¼Œä¹‹å‰Aç±»è‡ªå·±åšä¸€ä»¶äº‹ï¼Œåœ¨ä½¿ç”¨ä»£ç†ä¹‹åï¼ŒAç±»ä¸ç›´æ¥å»åšï¼Œè€Œæ˜¯ç”±Aç±»çš„ä»£ç†ç±»Bæ¥å»åšã€‚ä»£ç†ç±»å…¶å®æ˜¯åœ¨ä¹‹å‰ç±»çš„åŸºç¡€ä¸Šåšäº†ä¸€å±‚å°è£…ã€‚javaä¸­æœ‰é™æ€ä»£ç†ã€JDKåŠ¨æ€ä»£ç†ã€CGLibåŠ¨æ€ä»£ç†çš„æ–¹å¼ã€‚é™æ€ä»£ç†æŒ‡çš„æ˜¯ä»£ç†ç±»æ˜¯åœ¨ç¼–è¯‘æœŸå°±å­˜åœ¨çš„ï¼Œç›¸ååŠ¨æ€ä»£ç†åˆ™æ˜¯åœ¨ç¨‹åºè¿è¡ŒæœŸåŠ¨æ€ç”Ÿæˆçš„ï¼Œ</p><p>ä»£ç†æ¨¡å¼çš„åŠŸèƒ½ä¸»è¦æ˜¯èµ·åˆ°å¢å¼ºæ–¹æ³•å’Œæƒé™æ‹¦æˆªçš„ä½œç”¨ã€‚</p><img src="/images/Spring5/image-20201120153501285.png" alt="image-20201120153501285" style="zoom:50%;" /><h3 id="9-1-é™æ€ä»£ç†"><a href="#9-1-é™æ€ä»£ç†" class="headerlink" title="9.1 é™æ€ä»£ç†"></a>9.1 é™æ€ä»£ç†</h3><p>é™æ€ä»£ç†è§’è‰²åˆ†æ</p><ul><li>æŠ½è±¡è§’è‰²ï¼šä¸€èˆ¬ä½¿ç”¨æ¥å£æˆ–è€…æŠ½è±¡ç±»æ¥å®ç°ã€‚</li><li>çœŸå®è§’è‰²ï¼šè¢«ä»£ç†çš„è§’è‰²ã€‚</li><li>ä»£ç†è§’è‰²ï¼šä»£ç†çœŸå®è§’è‰²ï¼›  <ul><li>ä»£ç†çœŸå®è§’è‰²åï¼Œä¸€èˆ¬ä¼šåšä¸€äº›é™„å±çš„æ“ä½œ</li></ul></li><li>å®¢æˆ·ï¼šä½¿ç”¨ä»£ç†è§’è‰²æ¥è¿›è¡Œä¸€äº›æ“ä½œ</li></ul><p><strong>ä»£ç å®ç°ä¸åˆ†æ</strong></p><p>Rent.java  å³æŠ½è±¡è§’è‰²</p><pre><code class="hljs java"><span class="hljs-comment">//æŠ½è±¡è§’è‰²ï¼šç§Ÿæˆ¿</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Rent</span> </span>&#123;   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">rent</span><span class="hljs-params">()</span></span>;&#125;</code></pre><p>Host.java å³çœŸå®è§’è‰²</p><pre><code class="hljs java"><span class="hljs-comment">//çœŸå®è§’è‰²ï¼šæˆ¿ä¸œ æˆ¿ä¸œè¦å‡ºç§Ÿæˆ¿å­</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Host</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Rent</span></span>&#123;  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">rent</span><span class="hljs-params">()</span></span>&#123;    System.out.println(<span class="hljs-string">&quot;æˆ¿å±‹å‡ºç§Ÿï¼&quot;</span>);  &#125;&#125;</code></pre><p>Proxy.java å³ä»£ç†è§’è‰²</p><pre><code class="hljs java"><span class="hljs-comment">//ä»£ç†è§’è‰²ï¼šä¸­ä»‹</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Proxy</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Rent</span> </span>&#123;   <span class="hljs-keyword">private</span> Host host;   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Proxy</span><span class="hljs-params">()</span> </span>&#123; &#125;   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Proxy</span><span class="hljs-params">(Host host)</span> </span>&#123;       <span class="hljs-keyword">this</span>.host = host;  &#125;   <span class="hljs-comment">//ç§Ÿæˆ¿</span>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">rent</span><span class="hljs-params">()</span></span>&#123;       seeHouse();       host.rent();       fare();  &#125;   <span class="hljs-comment">//çœ‹æˆ¿</span>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">seeHouse</span><span class="hljs-params">()</span></span>&#123;       System.out.println(<span class="hljs-string">&quot;å¸¦æˆ¿å®¢çœ‹æˆ¿&quot;</span>);  &#125;   <span class="hljs-comment">//æ”¶ä¸­ä»‹è´¹</span>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">fare</span><span class="hljs-params">()</span></span>&#123;       System.out.println(<span class="hljs-string">&quot;æ”¶ä¸­ä»‹è´¹&quot;</span>);  &#125;&#125;Client . java å³å®¢æˆ·<span class="hljs-comment">//å®¢æˆ·ç±»ï¼Œä¸€èˆ¬å®¢æˆ·éƒ½ä¼šå»æ‰¾ä»£ç†ï¼</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Client</span> </span>&#123;   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;       <span class="hljs-comment">//æˆ¿ä¸œè¦ç§Ÿæˆ¿</span>       Host host = <span class="hljs-keyword">new</span> Host();       <span class="hljs-comment">//ä¸­ä»‹å¸®åŠ©æˆ¿ä¸œ</span>       Proxy proxy = <span class="hljs-keyword">new</span> Proxy(host);       <span class="hljs-comment">//ä½ å»æ‰¾ä¸­ä»‹ï¼</span>       proxy.rent();  &#125;&#125;</code></pre><p>Client . java å³å®¢æˆ·</p><pre><code class="hljs java"><span class="hljs-comment">//å®¢æˆ·ç±»ï¼Œä¸€èˆ¬å®¢æˆ·éƒ½ä¼šå»æ‰¾ä»£ç†ï¼</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Client</span> </span>&#123;   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;       <span class="hljs-comment">//æˆ¿ä¸œè¦ç§Ÿæˆ¿</span>       Host host = <span class="hljs-keyword">new</span> Host();       <span class="hljs-comment">//ä¸­ä»‹å¸®åŠ©æˆ¿ä¸œ</span>       Proxy proxy = <span class="hljs-keyword">new</span> Proxy(host);       <span class="hljs-comment">//ä½ å»æ‰¾ä¸­ä»‹ï¼</span>       proxy.rent();  &#125;&#125;</code></pre><p>åˆ†æï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä½ ç›´æ¥æ¥è§¦çš„å°±æ˜¯ä¸­ä»‹ï¼Œå°±å¦‚åŒç°å®ç”Ÿæ´»ä¸­çš„æ ·å­ï¼Œä½ çœ‹ä¸åˆ°æˆ¿ä¸œï¼Œä½†æ˜¯ä½ ä¾æ—§é€šè¿‡ä¸­ä»‹ï¼Œç§Ÿåˆ°äº†æˆ¿ä¸œçš„æˆ¿å­ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„ä»£ç†æ¨¡å¼ï¼Œç¨‹åºæºäºç”Ÿæ´»ï¼Œæ‰€ä»¥å­¦ç¼–ç¨‹çš„äººï¼Œä¸€èˆ¬èƒ½å¤Ÿæ›´åŠ æŠ½è±¡çš„çœ‹å¾…ç”Ÿæ´»ä¸­å‘ç”Ÿçš„äº‹æƒ…ã€‚</p><p><strong>é™æ€ä»£ç†çš„å¥½å¤„ï¼š</strong></p><ul><li>å¯ä»¥ä½¿å¾—æˆ‘ä»¬çš„çœŸå®è§’è‰²æ›´åŠ çº¯ç²¹ï¼Œä¸å†å»å…³æ³¨ä¸€äº›å…¬å…±çš„äº‹æƒ…ã€‚</li><li>å…¬å…±çš„ä¸šåŠ¡ç”±ä»£ç†æ¥å®Œæˆï¼Œæ˜¯è¥¿å®‰äº†ä¸šåŠ¡åˆ†å·¥ã€‚</li></ul><p><strong>ç¼ºç‚¹ï¼š</strong></p><ul><li>ç±»å¤šäº†ï¼Œå¤šäº†ä»£ç†ç±»ï¼Œå·¥ä½œé‡å˜å¤§äº†ï¼Œå¼€å‘æ•ˆç‡é™ä½ã€‚</li></ul><p><strong>å†ä¸¾ä¸ªä¾‹å­ï¼š</strong></p><p>1ã€åˆ›å»ºä¸€ä¸ªæŠ½è±¡è§’è‰²ï¼Œæ¯”å¦‚å’‹ä»¬å¹³æ—¶åšçš„ç”¨æˆ·ä¸šåŠ¡ï¼ŒæŠ½è±¡èµ·æ¥å°±æ˜¯å¢åˆ æ”¹æŸ¥ï¼</p><pre><code class="hljs java"><span class="hljs-comment">//æŠ½è±¡è§’è‰²ï¼šå¢åˆ æ”¹æŸ¥ä¸šåŠ¡</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">UserService</span> </span>&#123;   <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">add</span><span class="hljs-params">()</span></span>;   <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">delete</span><span class="hljs-params">()</span></span>;   <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">update</span><span class="hljs-params">()</span></span>;   <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">query</span><span class="hljs-params">()</span></span>;&#125;</code></pre><p>2ã€æˆ‘ä»¬éœ€è¦ä¸€ä¸ªçœŸå®å¯¹è±¡æ¥å®Œæˆè¿™äº›å¢åˆ æ”¹æŸ¥æ“ä½œ</p><pre><code class="hljs java"><span class="hljs-comment">//çœŸå®å¯¹è±¡ï¼Œå®Œæˆå¢åˆ æ”¹æŸ¥æ“ä½œçš„äºº</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserServiceImpl</span> <span class="hljs-title">implementsUserService</span> </span>&#123;   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">add</span><span class="hljs-params">()</span> </span>&#123;       System.out.println(<span class="hljs-string">&quot;å¢åŠ äº†ä¸€ä¸ªç”¨æˆ·&quot;</span>);  &#125;   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">delete</span><span class="hljs-params">()</span> </span>&#123;       System.out.println(<span class="hljs-string">&quot;åˆ é™¤äº†ä¸€ä¸ªç”¨æˆ·&quot;</span>);  &#125;   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">update</span><span class="hljs-params">()</span> </span>&#123;       System.out.println(<span class="hljs-string">&quot;æ›´æ–°äº†ä¸€ä¸ªç”¨æˆ·&quot;</span>);  &#125;   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">query</span><span class="hljs-params">()</span> </span>&#123;       System.out.println(<span class="hljs-string">&quot;æŸ¥è¯¢äº†ä¸€ä¸ªç”¨æˆ·&quot;</span>);  &#125;&#125;</code></pre><p>3ã€éœ€æ±‚æ¥äº†ï¼Œç°åœ¨æˆ‘ä»¬éœ€è¦å¢åŠ ä¸€ä¸ªæ—¥å¿—åŠŸèƒ½ï¼Œæ€ä¹ˆå®ç°ï¼</p><ul><li>æ€è·¯1 ï¼šåœ¨å®ç°ç±»ä¸Šå¢åŠ ä»£ç  ã€éº»çƒ¦ï¼ã€‘</li><li>æ€è·¯2ï¼šä½¿ç”¨ä»£ç†æ¥åšï¼Œèƒ½å¤Ÿä¸æ”¹å˜åŸæ¥çš„ä¸šåŠ¡æƒ…å†µä¸‹ï¼Œå®ç°æ­¤åŠŸèƒ½å°±æ˜¯æœ€å¥½çš„äº†ï¼</li></ul><p>4ã€è®¾ç½®ä¸€ä¸ªä»£ç†ç±»æ¥å¤„ç†æ—¥å¿—ï¼ä»£ç†è§’è‰²</p><pre><code class="hljs java"><span class="hljs-comment">//ä»£ç†è§’è‰²ï¼Œåœ¨è¿™é‡Œé¢å¢åŠ æ—¥å¿—çš„å®ç°</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserServiceProxy</span> <span class="hljs-title">implementsUserService</span> </span>&#123;   <span class="hljs-keyword">private</span> UserServiceImpl userService;   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setUserService</span><span class="hljs-params">(UserServiceImpluserService)</span> </span>&#123;       <span class="hljs-keyword">this</span>.userService = userService;  &#125;   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">add</span><span class="hljs-params">()</span> </span>&#123;       log(<span class="hljs-string">&quot;add&quot;</span>);       userService.add();  &#125;   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">delete</span><span class="hljs-params">()</span> </span>&#123;       log(<span class="hljs-string">&quot;delete&quot;</span>);       userService.delete();  &#125;   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">update</span><span class="hljs-params">()</span> </span>&#123;       log(<span class="hljs-string">&quot;update&quot;</span>);       userService.update();  &#125;   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">query</span><span class="hljs-params">()</span> </span>&#123;       log(<span class="hljs-string">&quot;query&quot;</span>);       userService.query();  &#125;   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">log</span><span class="hljs-params">(String msg)</span></span>&#123;       System.out.println(<span class="hljs-string">&quot;æ‰§è¡Œäº†&quot;</span>+msg+<span class="hljs-string">&quot;æ–¹æ³•&quot;</span>);  &#125;&#125;</code></pre><p>5ã€æµ‹è¯•è®¿é—®ç±»ï¼š</p><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Client</span> </span>&#123;   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;       <span class="hljs-comment">//çœŸå®ä¸šåŠ¡</span>       UserServiceImpl userService = newUserServiceImpl();       <span class="hljs-comment">//ä»£ç†ç±»</span>       UserServiceProxy proxy = newUserServiceProxy();       <span class="hljs-comment">//ä½¿ç”¨ä»£ç†ç±»å®ç°æ—¥å¿—åŠŸèƒ½ï¼</span>       proxy.setUserService(userService);       proxy.add();  &#125;&#125;</code></pre><p><strong>å…¶ä¸­çš„æ€æƒ³å°±æ˜¯ï¼š==æˆ‘ä»¬åœ¨ä¸æ”¹å˜åŸæ¥çš„ä»£ç çš„æƒ…å†µä¸‹ï¼Œå®ç°äº†å¯¹åŸæœ‰åŠŸèƒ½çš„å¢å¼ºï¼Œè¿™æ˜¯AOPä¸­æœ€æ ¸å¿ƒçš„æ€æƒ³ã€‚==</strong></p><p>AOPï¼šçºµå‘å¼€å‘ï¼Œæ¨ªå‘å¼€å‘</p><img src="/images/Spring5/image-20201121120114168.png" alt="image-20201121120114168" style="zoom:50%;" /><p>æˆ‘ä»¬æƒ³è¦é™æ€ä»£ç†çš„å¥½å¤„ï¼Œåˆä¸æƒ³è¦é™æ€ä»£ç†çš„ç¼ºç‚¹ï¼ˆå·¥ä½œé‡å˜å¤§ï¼Œå¼€å‘æ•ˆç‡ä½ï¼‰ï¼Œæ‰€ä»¥å°±æœ‰äº†åŠ¨æ€ä»£ç†ï¼</p><h3 id="9-2-åŠ¨æ€ä»£ç†"><a href="#9-2-åŠ¨æ€ä»£ç†" class="headerlink" title="9.2 åŠ¨æ€ä»£ç†"></a>9.2 åŠ¨æ€ä»£ç†</h3><p>åŠ¨æ€ä»£ç†çš„åº•å±‚å°±æ˜¯åå°„ï¼</p><ul><li><p>åŠ¨æ€ä»£ç†çš„è§’è‰²å’Œé™æ€ä»£ç†æ˜¯ä¸€æ ·çš„ã€‚</p></li><li><p>åŠ¨æ€ä»£ç†çš„ä»£ç†ç±»æ˜¯åŠ¨æ€ç”Ÿæˆçš„ã€‚é™æ€ä»£ç†çš„ä»£ç†ç±»æ˜¯æˆ‘ä»¬æå‰å†™å¥½çš„ã€‚</p></li><li><p>åŠ¨æ€ä»£ç†åˆ†ä¸ºä¸¤ç±»ï¼Œä¸€ç±»æ˜¯åŸºäºåŠ¨æ€æ¥å£ä»£ç†ã€ä¸€ç±»æ˜¯åŸºäºç±»çš„åŠ¨æ€ä»£ç†ã€‚</p><ul><li>åŸºäºæ¥å£çš„åŠ¨æ€ä»£ç†â€”â€”JDKåŠ¨æ€ä»£ç†</li><li>åŸºäºç±»çš„åŠ¨æ€ä»£ç†â€”â€”cglib</li><li>Javaå­—èŠ‚ç ï¼šç°åœ¨ç”¨çš„æ¯”è¾ƒå¤šçš„æ˜¯javasistæ¥ç”ŸæˆåŠ¨æ€ä»£ç†</li></ul></li></ul><p>æˆ‘ä»¬è¿™é‡Œä½¿ç”¨JDKçš„åŸç”Ÿä»£ç æ¥å®ç°ï¼Œå…¶ä½™çš„é“ç†éƒ½æ˜¯ä¸€æ ·çš„ã€‚</p><p><strong>JDKçš„åŠ¨æ€ä»£ç†éœ€è¦äº†è§£ä¸¤ä¸ªç±»ï¼š</strong></p><p>æ ¸å¿ƒï¼šInvocationHandlerï¼ˆè°ƒç”¨å¤„ç†ç¨‹åºï¼‰å’ŒProxyï¼ˆä»£ç†ï¼‰</p><pre><code class="hljs java"><span class="hljs-function">Object <span class="hljs-title">invoke</span><span class="hljs-params">(Object proxy, æ–¹æ³• method, Object[]args)</span></span>;</code></pre><p>å‚æ•°è¯´æ˜ï¼š</p><ul><li>proxyï¼šè°ƒç”¨è¯¥æ–¹æ³•çš„ä»£ç†å®ä¾‹</li><li>methodï¼šæ‰€è¿°æ–¹æ³•å¯¹åº”äºè°ƒç”¨ä»£ç†å®ä¾‹ä¸Šçš„æ¥å£æ–¹æ³•çš„å®ä¾‹ã€‚æ–¹æ³•å¯¹è±¡çš„å£°æ˜ç±»å°†æ˜¯è¯¥æ–¹æ³•å£°æ˜çš„æ¥å£ï¼Œå®ƒå¯ä»¥æ˜¯ä»£ç†ç±»ç»§æ‰¿è¯¥æ–¹æ³•çš„ä»£ç†æ¥å£çš„è¶…çº§æ¥å£ã€‚</li><li>args ï¼šåŒ…å«çš„æ–¹æ³•è°ƒç”¨ä¼ é€’ä»£ç†å®ä¾‹çš„å‚æ•°å€¼çš„å¯¹è±¡çš„é˜µåˆ—ï¼Œæˆ–nullå¦‚æœæ¥å£æ–¹æ³•æ²¡æœ‰å‚æ•°ã€‚åŸå§‹ç±»å‹çš„å‚æ•°åŒ…å«åœ¨é€‚å½“çš„åŸå§‹åŒ…è£…å™¨ç±»çš„å®ä¾‹ä¸­ï¼Œä¾‹å¦‚java.lang.Integeræˆ–java.lang.Boolean ã€‚</li></ul><p><strong>ä»£ç å®ç°ï¼š</strong></p><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.wen.pojo;<span class="hljs-keyword">import</span> java.lang.reflect.InvocationHandler;<span class="hljs-keyword">import</span> java.lang.reflect.Method;<span class="hljs-keyword">import</span> java.lang.reflect.Proxy;<span class="hljs-comment">//åŠ¨æ€ç”Ÿæˆä»£ç†ç±»</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ProxyInvocationHandler</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">InvocationHandler</span> </span>&#123;    <span class="hljs-comment">//è¢«ä»£ç†çš„æ¥å£</span>    <span class="hljs-keyword">private</span> Object target;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setTarget</span><span class="hljs-params">(Object target)</span> </span>&#123;        <span class="hljs-keyword">this</span>.target = target;    &#125;    <span class="hljs-comment">//ç”Ÿæˆå¾—åˆ°ä»£ç†ç±»</span>    <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">getProxy</span><span class="hljs-params">()</span></span>&#123;        <span class="hljs-keyword">return</span> Proxy.newProxyInstance(<span class="hljs-keyword">this</span>.getClass().getClassLoader(), target.getClass().getInterfaces(),<span class="hljs-keyword">this</span>);    &#125;    <span class="hljs-comment">//å¤„ç†ä»£ç†å®ä¾‹ï¼Œå¹¶è¿”å›ç»“æœ</span>    <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">invoke</span><span class="hljs-params">(Object proxy, Method method, Object[] args)</span> <span class="hljs-keyword">throws</span> Throwable </span>&#123;        log(method.getName());<span class="hljs-comment">//å¯ä»¥é€šè¿‡methodåšå¾ˆå¤šäº‹æƒ…ï¼</span>        <span class="hljs-comment">//åŠ¨æ€ä»£ç†çš„æœ¬è´¨ï¼Œå°±æ˜¯ä½¿ç”¨åå°„æœºåˆ¶å®ç°</span>        Object result = method.invoke(target, args);        <span class="hljs-keyword">return</span> result;    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">log</span><span class="hljs-params">(String msg)</span></span>&#123;        System.out.println(msg);    &#125;&#125;</code></pre><p>å®¢æˆ·ç«¯ï¼š</p><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.wen.pojo;<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Client</span> </span>&#123;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;        <span class="hljs-comment">//çœŸå®è§’è‰²</span>        Host host = <span class="hljs-keyword">new</span> Host();        <span class="hljs-comment">//ä»£ç†è§’è‰²  ç°åœ¨æ²¡æœ‰ åªæœ‰ä¸€ä¸ªå¤„ç†ç¨‹åº</span>        ProxyInvocationHandler pih = <span class="hljs-keyword">new</span> ProxyInvocationHandler();        <span class="hljs-comment">//é€šè¿‡è°ƒç”¨ç¨‹åºå¤„ç†è§’è‰² æ¥å¤„ç†æˆ‘ä»¬è¦è°ƒç”¨çš„æ¥å£å¯¹è±¡</span>        pih.setTarget(host);        <span class="hljs-comment">//ç”Ÿæˆä»£ç†è§’è‰²</span>        Rent proxy = (Rent)pih.getProxy();        proxy.rent();    &#125;&#125;</code></pre><p>éšç€ä¸šåŠ¡çš„åºå¤§ï¼Œä½¿ç”¨é™æ€ä»£ç†çš„è¯ï¼Œä¼šæœ‰è¶Šæ¥è¶Šå¤šçš„ä»£ç†ç±»ï¼Œå› æ­¤æˆ‘ä»¬é€‰æ‹©äº†åŠ¨æ€ä»£ç†ç±»ã€‚åŠ¨æ€ä»£ç†ç±»ï¼Œä¸€ä¸ªåŠ¨æ€ä»£ç†å¯ä»¥ä»£ç†å¤šä¸ªç±»ï¼Œä»£ç†çš„æ˜¯æ¥å£ã€‚ï¼ˆ<strong>é€šè¿‡ä¼ å…¥çš„çœŸå®ç±» ä¼šæ‰¾åˆ°æœ€ä¸Šå±‚çš„æ¥å£ï¼Œè¿™æ˜¯æˆ‘çŒœæƒ³çš„ï¼Œåº”è¯¥æ˜¯åå°„æœºåˆ¶çš„åŸå› ï¼Œä¹‹åå­¦äº†åå°„ä¹‹åï¼Œå†æ¥è¿›è¡Œè¡¥å……ï¼ï¼</strong>ï¼‰</p><p><strong>åŠ¨æ€ä»£ç†çš„å¥½å¤„ï¼š</strong></p><ul><li>Proxyç±»çš„ä»£ç é‡è¢«å›ºå®šä¸‹æ¥ï¼Œä¸ä¼šå› ä¸ºä¸šåŠ¡çš„é€æ¸åºå¤§è€Œåºå¤§ï¼›</li><li>å¯ä»¥å®ç°AOPç¼–ç¨‹ï¼Œå®é™…ä¸Šé™æ€ä»£ç†ä¹Ÿå¯ä»¥å®ç°ï¼Œæ€»çš„æ¥è¯´ï¼ŒAOPå¯ä»¥ç®—ä½œæ˜¯ä»£ç†æ¨¡å¼çš„ä¸€ä¸ªå…¸å‹åº”ç”¨ï¼›</li><li>è§£è€¦ï¼Œé€šè¿‡å‚æ•°å°±å¯ä»¥åˆ¤æ–­çœŸå®ç±»ï¼Œä¸éœ€è¦äº‹å…ˆå®ä¾‹åŒ–ï¼Œæ›´åŠ çµæ´»å¤šå˜ã€‚</li><li>ä¸€ä¸ªåŠ¨æ€ä»£ç†å¯ä»¥ä»£ç†å¤šä¸ªç±»ï¼Œä»£ç†çš„æ˜¯æ¥å£ï¼</li></ul><h2 id="10-AOP-é¢å‘åˆ‡é¢ç¼–ç¨‹"><a href="#10-AOP-é¢å‘åˆ‡é¢ç¼–ç¨‹" class="headerlink" title="10. AOP-é¢å‘åˆ‡é¢ç¼–ç¨‹"></a>10. AOP-é¢å‘åˆ‡é¢ç¼–ç¨‹</h2><p>ä¸Šä¸€èŠ‚ï¼Œæˆ‘ä»¬äº†è§£äº†ä»£ç†æ¨¡å¼ï¼Œè¿™æ˜¯AOPçš„åŸºç¡€ï¼ŒAOPæ˜¯ä»£ç†æ¨¡å¼çš„ä¸€ä¸ªåº”ç”¨ï¼</p><h3 id="10-1-ä»€ä¹ˆæ˜¯AOP"><a href="#10-1-ä»€ä¹ˆæ˜¯AOP" class="headerlink" title="10.1 ä»€ä¹ˆæ˜¯AOP"></a>10.1 ä»€ä¹ˆæ˜¯AOP</h3><p>AOPï¼ˆAspect Oriented Programmingï¼‰æ„ä¸ºï¼šé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œé€šè¿‡<strong>é¢„ç¼–è¯‘æ–¹å¼</strong>å’Œ<strong>è¿è¡ŒæœŸåŠ¨æ€ä»£ç†</strong>å®ç°<strong>ç¨‹åºåŠŸèƒ½çš„ç»Ÿä¸€ç»´æŠ¤</strong>çš„ä¸€ç§æŠ€æœ¯ã€‚</p><p>AOPæ˜¯OOPçš„å»¶ç»­ï¼Œæ˜¯è½¯ä»¶å¼€å‘ä¸­çš„ä¸€ä¸ªçƒ­ç‚¹ï¼Œä¹Ÿæ˜¯Springæ¡†æ¶ä¸­çš„ä¸€ä¸ªé‡è¦å†…å®¹ï¼Œæ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„ä¸€ä¸ªè¡ç”Ÿæ³›å‹ã€‚åˆ©ç”¨AOPå¯ä»¥å¯¹ä¸šåŠ¡é€»è¾‘çš„å„ä¸ªéƒ¨åˆ†è¿›è¡Œéš”ç¦»ï¼Œä»è€Œä½¿ä¸šåŠ¡é€»è¾‘å„éƒ¨åˆ†ä¹‹é—´çš„è€¦åˆåº¦é™ä½ï¼Œæé«˜ç¨‹åºçš„å¯é‡ç”¨æ€§ï¼ŒåŒæ—¶æé«˜äº†å¼€å‘çš„æ•ˆç‡ã€‚</p><img src="/images/Spring5/640" alt="img" style="zoom:50%;" /><p>å…¬å¸è¦æ±‚ä¸æ”¹å˜åŸæœ‰çš„ä¸šåŠ¡é€»è¾‘ï¼Œå¢åŠ æ—¥å¿—çš„åŠŸèƒ½ã€‚å…¶å®å†™ä¸ªä»£ç†ç±»å°±å¯ä»¥äº†ï¼Œå¢åŠ éªŒè¯å‚æ•°ã€å‰ç½®æ—¥å¿—ã€åç½®æ—¥å¿—ã€‚</p><p>ä½†æ˜¯åœ¨Springä¸­å¯èƒ½æ¯”è¾ƒéº»çƒ¦ã€‚</p><h3 id="10-2-AOPåœ¨Springä¸­çš„ä½œç”¨"><a href="#10-2-AOPåœ¨Springä¸­çš„ä½œç”¨" class="headerlink" title="10.2 AOPåœ¨Springä¸­çš„ä½œç”¨"></a>10.2 AOPåœ¨Springä¸­çš„ä½œç”¨</h3><p>==æä¾›å£°æ˜å¼äº‹åŠ¡ï¼šå…è®¸ç”¨æˆ·è‡ªå®šä¹‰åˆ‡é¢==</p><p>ä»¥ä¸‹åè¯éœ€è¦äº†è§£ï¼š</p><ul><li>æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼šè·¨è¶Šåº”ç”¨ç¨‹åºå¤šä¸ªæ¨¡å—çš„æ–¹æ³•æˆ–åŠŸèƒ½ã€‚å°±æ˜¯ï¼Œä¸æˆ‘ä»¬ä¸šåŠ¡åˆ‡é¢é€»è¾‘æ— å…³çš„ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦å…³æ³¨çš„éƒ¨åˆ†ï¼Œå°±æ˜¯æ¨ªåˆ‡å…³æ³¨ç‚¹ã€‚å¦‚ï¼šæ—¥å¿—ï¼Œå®‰å…¨ï¼Œç¼“å­˜ï¼Œäº‹åŠ¡ã€‚ã€‚ã€‚</li><li>åˆ‡é¢ï¼ˆAspectï¼‰ï¼šæ¨ªåˆ‡å…³æ³¨ç‚¹è¢«æ¨¡å—åŒ–çš„ç‰¹æ®Šå¯¹è±¡ã€‚å³ï¼Œ<strong>ä»–æ˜¯ä¸€ä¸ªç±»</strong>ã€‚</li><li>é€šçŸ¥ï¼ˆAdviceï¼‰ï¼šåˆ‡é¢å¿…é¡»è¦å®Œæˆçš„å·¥ä½œã€‚å³ï¼Œ<strong>ä»–æ˜¯ç±»ä¸­çš„ä¸€ä¸ªæ–¹æ³•</strong>ã€‚</li><li>ç›®æ ‡ï¼ˆTargetï¼‰ï¼šè¢«é€šçŸ¥å¯¹è±¡ã€‚</li><li>ä»£ç†ï¼ˆProxyï¼‰ï¼šå‘ç›®æ ‡å¯¹è±¡åº”ç”¨é€šçŸ¥ä¹‹ååˆ›å»ºçš„å¯¹è±¡ã€‚</li><li>åˆ‡å…¥ç‚¹ï¼ˆPointCutï¼‰ï¼šåˆ‡é¢é€šçŸ¥ æ‰§è¡Œçš„ â€œåœ°ç‚¹â€çš„å®šä¹‰</li><li>è¿æ¥ç‚¹ï¼ˆJointPointï¼‰ï¼šä¸åˆ‡å…¥ç‚¹åŒ¹é…çš„æ‰§è¡Œç‚¹ã€‚</li></ul><img src="/images/Spring5/640" alt="img" style="zoom:50%;" /><p>SpringAOPä¸­ï¼Œé€šè¿‡Adiviceå®šä¹‰æ¨ªåˆ‡é€»è¾‘ï¼ŒSpringä¸­æ”¯æŒ5ç§ç±»å‹çš„Adviceã€‚</p><img src="/images/Spring5/640" alt="img" style="zoom:50%;" /><p>å³ï¼ŒAOPåœ¨ä¸æ”¹å˜åŸæœ‰ä»£ç çš„æƒ…å†µä¸‹ï¼Œå»å¢åŠ æ–°çš„åŠŸèƒ½ã€‚</p><h3 id="10-3-ä½¿ç”¨Springå®ç°AOP"><a href="#10-3-ä½¿ç”¨Springå®ç°AOP" class="headerlink" title="10.3 ä½¿ç”¨Springå®ç°AOP"></a>10.3 ä½¿ç”¨Springå®ç°AOP</h3><h4 id="AOPå®ç°â€”â€”é€šè¿‡Spring-APIå®ç°"><a href="#AOPå®ç°â€”â€”é€šè¿‡Spring-APIå®ç°" class="headerlink" title="AOPå®ç°â€”â€”é€šè¿‡Spring APIå®ç°"></a>AOPå®ç°â€”â€”é€šè¿‡Spring APIå®ç°</h4><ol><li>ç¼–å†™ä¸šåŠ¡æ¥å£å’Œå®ç°ç±»</li></ol><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">UserService</span> </span>&#123;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">add</span><span class="hljs-params">()</span></span>;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">delete</span><span class="hljs-params">()</span></span>;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">select</span><span class="hljs-params">()</span></span>;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">update</span><span class="hljs-params">()</span></span>;&#125;</code></pre><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">UserService</span></span>&#123;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">add</span><span class="hljs-params">()</span> </span>&#123;        System.out.println(<span class="hljs-string">&quot;å¢åŠ äº†ä¸€ä¸ªç”¨æˆ·&quot;</span>);    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">delete</span><span class="hljs-params">()</span> </span>&#123;        System.out.println(<span class="hljs-string">&quot;åˆ é™¤äº†ä¸€ä¸ªç”¨æˆ·&quot;</span>);    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">select</span><span class="hljs-params">()</span> </span>&#123;        System.out.println(<span class="hljs-string">&quot;æŸ¥è¯¢äº†ä¸€ä¸ªç”¨æˆ·&quot;</span>);    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">update</span><span class="hljs-params">()</span> </span>&#123;        System.out.println(<span class="hljs-string">&quot;ä¿®æ”¹äº†ä¸€ä¸ªç”¨æˆ·&quot;</span>);    &#125;&#125;</code></pre><ol start="2"><li>ç¼–å†™å¢å¼ºç±»ï¼Œæˆ‘ä»¬ç¼–å†™ä¸¤ä¸ªï¼Œä¸€ä¸ªå‰ç½®å¢å¼ºã€ä¸€ä¸ªåç½®å¢å¼º</li></ol><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.lang.reflect.Method;<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LogBefore</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">MethodBeforeAdvice</span> </span>&#123;    <span class="hljs-comment">/*</span><span class="hljs-comment">    * method  è¦æ‰§è¡Œçš„ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•</span><span class="hljs-comment">    * objects è¢«è°ƒç”¨çš„æ–¹æ³•çš„å‚æ•°</span><span class="hljs-comment">    * o ç›®æ ‡å¯¹è±¡</span><span class="hljs-comment">    * */</span>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">before</span><span class="hljs-params">(Method method, Object[] objects, Object o)</span> <span class="hljs-keyword">throws</span> Throwable </span>&#123;        System.out.println(o.getClass().getName() + <span class="hljs-string">&quot;çš„&quot;</span> + method.getName() + <span class="hljs-string">&quot;æ–¹æ³•æ‰§è¡Œäº†&quot;</span>);    &#125;&#125;</code></pre><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.lang.reflect.Method;<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LogAfter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">AfterReturningAdvice</span> </span>&#123;    <span class="hljs-comment">/*</span><span class="hljs-comment">    * o è¿”å›å€¼</span><span class="hljs-comment">    * method è¢«è°ƒç”¨çš„æ–¹æ³•</span><span class="hljs-comment">    * objects  è¢«è°ƒç”¨æ–¹æ³•çš„å‚æ•°</span><span class="hljs-comment">    * o1 è¢«è°ƒç”¨çš„ç›®æ ‡å¯¹è±¡</span><span class="hljs-comment">    * */</span>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">afterReturning</span><span class="hljs-params">(Object o, Method method, Object[] objects, Object o1)</span> <span class="hljs-keyword">throws</span> Throwable </span>&#123;        System.out.println(o1.getClass().getName() + <span class="hljs-string">&quot;çš„&quot;</span> + method.getName() + <span class="hljs-string">&quot;æ–¹æ³•ï¼Œè¿”å›å€¼ï¼š&quot;</span> + o);    &#125;&#125;</code></pre><ol start="3"><li>æœ€åå»Springçš„æ–‡ä»¶ä¸­è¿›è¡Œæ³¨å†Œï¼Œå¹¶å®ç°AOPåˆ‡å…¥å®ç°ï¼Œæ³¨æ„éœ€è¦å¯¼å…¥çº¦æŸï¼</li></ol><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><span class="hljs-tag">       <span class="hljs-attr">xmlns:aop</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/aop&quot;</span></span><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><span class="hljs-tag"><span class="hljs-string">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span><span class="hljs-tag"><span class="hljs-string">        http://www.springframework.org/schema/aop</span></span><span class="hljs-tag"><span class="hljs-string">        https://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span>    <span class="hljs-comment">&lt;!--æ³¨å†Œbean--&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userService&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.wen.demo1.UserServiceImpl&quot;</span>/&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;logBefore&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.wen.demo1.LogBefore&quot;</span>/&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;logAfter&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.wen.demo1.LogAfter&quot;</span>/&gt;</span>    <span class="hljs-comment">&lt;!--aopçš„é…ç½®--&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">aop:config</span>&gt;</span>        <span class="hljs-comment">&lt;!--åˆ‡å…¥ç‚¹ï¼Œ expression:è¡¨è¾¾å¼åŒ¹é…è¦æ‰§è¡Œçš„æ–¹æ³•--&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">aop:pointcut</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;pointcut&quot;</span> <span class="hljs-attr">expression</span>=<span class="hljs-string">&quot;execution(* com.wen.demo1.UserServiceImpl.*(..))&quot;</span>/&gt;</span>        <span class="hljs-comment">&lt;!--æ‰§è¡Œç¯ç»•ï¼Œadvice-ref æ‰§è¡Œæ–¹æ³• pointcut-ref åˆ‡å…¥ç‚¹--&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">aop:advisor</span> <span class="hljs-attr">advice-ref</span>=<span class="hljs-string">&quot;logAfter&quot;</span> <span class="hljs-attr">pointcut-ref</span>=<span class="hljs-string">&quot;pointcut&quot;</span>/&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">aop:advisor</span> <span class="hljs-attr">advice-ref</span>=<span class="hljs-string">&quot;logBefore&quot;</span> <span class="hljs-attr">pointcut-ref</span>=<span class="hljs-string">&quot;pointcut&quot;</span>/&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">aop:config</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span></code></pre><ol start="4"><li>æµ‹è¯•ã€‚</li></ol><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyTest</span> </span>&#123;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;        ApplicationContext applicationContext = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">&quot;applicationContext.xml&quot;</span>);        UserService userService = applicationContext.getBean(<span class="hljs-string">&quot;userService&quot;</span>, UserService.class);        userService.add();    &#125;&#125;</code></pre><img src="/images/Spring5/image-20201122211541022.png" alt="image-20201122211541022" style="zoom:50%;" /><p>AOPçš„é‡è¦æ€§ï¼šå¾ˆé‡è¦ï¼ä¸€å®šè¦ç†è§£å…¶ä¸­çš„æ€è·¯ï¼Œä¸»è¦æ˜¯æ€æƒ³çš„ç†è§£ï¼</p><p>Springçš„AOPå°±æ˜¯å°†å…¬å…±ä¸šåŠ¡ï¼ˆæ—¥å¿—ã€å®‰å…¨ç­‰ï¼‰å’Œé¢†åŸŸä¸šåŠ¡ç»“åˆèµ·æ¥ï¼Œå½“æ‰§è¡Œé¢†åŸŸä¸šåŠ¡æ—¶ï¼Œå°†ä¼šæŠŠå…¬å…±ä¸šåŠ¡åŠ è¿›æ¥ï¼Œå®ç°å…¬å…±ä¸šåŠ¡çš„é‡å¤åˆ©ç”¨ã€‚é¢†åŸŸä¸šåŠ¡æ›´çº¯ç²¹ï¼Œç¨‹åºå‘˜ä¸“æ³¨é¢†åŸŸä¸šåŠ¡ï¼Œå…¶æœ¬è´¨è¿˜æ˜¯åŠ¨æ€ä»£ç†ï¼</p><h4 id="AOPå®ç°â€”â€”è‡ªå®šä¹‰ç±»æ¥å®ç°AOP"><a href="#AOPå®ç°â€”â€”è‡ªå®šä¹‰ç±»æ¥å®ç°AOP" class="headerlink" title="AOPå®ç°â€”â€”è‡ªå®šä¹‰ç±»æ¥å®ç°AOP"></a>AOPå®ç°â€”â€”è‡ªå®šä¹‰ç±»æ¥å®ç°AOP</h4><p>ç›®æ ‡ä¸šåŠ¡ç±»ä¸å˜ï¼ä¾æ—§æ˜¯UserServiceImplï¼</p><ol><li>é¦–å…ˆç¼–å†™ä¸€ä¸ªåˆ‡å…¥ç±»</li></ol><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DiyPointcut</span> </span>&#123;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">before</span><span class="hljs-params">()</span></span>&#123;        System.out.println(<span class="hljs-string">&quot;--------æ–¹æ³•æ‰§è¡Œå‰----------&quot;</span>);    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">after</span><span class="hljs-params">()</span></span>&#123;        System.out.println(<span class="hljs-string">&quot;--------æ–¹æ³•æ‰§è¡Œå----------&quot;</span>);    &#125;&#125;</code></pre><ol start="2"><li>åœ¨Springä¸­è¿›è¡Œé…ç½®</li></ol><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><span class="hljs-tag">       <span class="hljs-attr">xmlns:aop</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/aop&quot;</span></span><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><span class="hljs-tag"><span class="hljs-string">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span><span class="hljs-tag"><span class="hljs-string">        http://www.springframework.org/schema/aop</span></span><span class="hljs-tag"><span class="hljs-string">        https://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span>    <span class="hljs-comment">&lt;!--æ³¨å†Œbean--&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userService&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.wen.demo1.UserServiceImpl&quot;</span>/&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;logBefore&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.wen.demo1.LogBefore&quot;</span>/&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;logAfter&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.wen.demo1.LogAfter&quot;</span>/&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;diy&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.wen.demo2.DiyPointcut&quot;</span>/&gt;</span>    <span class="hljs-comment">&lt;!--aopçš„é…ç½®--&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">aop:config</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">aop:aspect</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;diy&quot;</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">aop:pointcut</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;diyPointCut&quot;</span> <span class="hljs-attr">expression</span>=<span class="hljs-string">&quot;execution(* com.wen.demo1.UserServiceImpl.*(..))&quot;</span>/&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">aop:before</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;before&quot;</span> <span class="hljs-attr">pointcut-ref</span>=<span class="hljs-string">&quot;diyPointCut&quot;</span>/&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">aop:after</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;after&quot;</span> <span class="hljs-attr">pointcut-ref</span>=<span class="hljs-string">&quot;diyPointCut&quot;</span>/&gt;</span>        <span class="hljs-tag">&lt;/<span class="hljs-name">aop:aspect</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">aop:config</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span></code></pre><ol start="3"><li>æµ‹è¯•</li></ol><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyTest</span> </span>&#123;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;        ApplicationContext applicationContext = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">&quot;applicationContext.xml&quot;</span>);        UserService userService = applicationContext.getBean(<span class="hljs-string">&quot;userService&quot;</span>, UserService.class);        userService.add();    &#125;&#125;</code></pre><img src="/images/Spring5/image-20201122212833713.png" alt="image-20201122212833713" style="zoom:50%;" /><h4 id="AOPå®ç°â€”â€”ä½¿ç”¨æ³¨è§£å®ç°"><a href="#AOPå®ç°â€”â€”ä½¿ç”¨æ³¨è§£å®ç°" class="headerlink" title="AOPå®ç°â€”â€”ä½¿ç”¨æ³¨è§£å®ç°"></a>AOPå®ç°â€”â€”ä½¿ç”¨æ³¨è§£å®ç°</h4><ol><li>ç¼–å†™ä¸€ä¸ªæ³¨è§£å®ç°çš„å¢å¼ºç±»</li></ol><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.wen.demo3;<span class="hljs-keyword">import</span> org.aspectj.lang.ProceedingJoinPoint;<span class="hljs-keyword">import</span> org.aspectj.lang.annotation.After;<span class="hljs-keyword">import</span> org.aspectj.lang.annotation.Around;<span class="hljs-keyword">import</span> org.aspectj.lang.annotation.Aspect;<span class="hljs-keyword">import</span> org.aspectj.lang.annotation.Before;<span class="hljs-meta">@Aspect</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AnnotationPointCut</span> </span>&#123;    <span class="hljs-meta">@Before(&quot;execution(* com.wen.demo1.UserServiceImpl.*(..))&quot;)</span>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">before</span><span class="hljs-params">()</span></span>&#123;        System.out.println(<span class="hljs-string">&quot;--------æ–¹æ³•æ‰§è¡Œå‰----------&quot;</span>);    &#125;    <span class="hljs-meta">@After(&quot;execution(* com.wen.demo1.UserServiceImpl.*(..))&quot;)</span>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">after</span><span class="hljs-params">()</span></span>&#123;        System.out.println(<span class="hljs-string">&quot;--------æ–¹æ³•æ‰§è¡Œå----------&quot;</span>);    &#125;    <span class="hljs-meta">@Around(&quot;execution(* com.wen.demo1.UserServiceImpl.*(..))&quot;)</span>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">around</span><span class="hljs-params">(ProceedingJoinPoint jp)</span> <span class="hljs-keyword">throws</span> Throwable </span>&#123;        System.out.println(<span class="hljs-string">&quot;ç¯ç»•å‰&quot;</span>);        System.out.println(<span class="hljs-string">&quot;ç­¾å:&quot;</span>+jp.getSignature());        <span class="hljs-comment">//æ‰§è¡Œç›®æ ‡æ–¹æ³•proceed</span>        Object proceed = jp.proceed();        System.out.println(<span class="hljs-string">&quot;ç¯ç»•å&quot;</span>);        System.out.println(proceed);    &#125;&#125;</code></pre><ol start="2"><li>åœ¨Springé…ç½®æ–‡ä»¶ä¸­ï¼Œæ³¨å†Œbeanï¼Œå¹¶å¢å¼ºæ”¯æŒæ³¨è§£çš„é…ç½®ã€‚</li></ol><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><span class="hljs-tag">       <span class="hljs-attr">xmlns:aop</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/aop&quot;</span></span><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><span class="hljs-tag"><span class="hljs-string">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span><span class="hljs-tag"><span class="hljs-string">        http://www.springframework.org/schema/aop</span></span><span class="hljs-tag"><span class="hljs-string">        https://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span>    <span class="hljs-comment">&lt;!--æ³¨å†Œbean--&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userService&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.wen.demo1.UserServiceImpl&quot;</span>/&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;annotationPointCut&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.wen.demo3.AnnotationPointCut&quot;</span>/&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">aop:aspectj-autoproxy</span>/&gt;</span>    <span class="hljs-comment">&lt;!--</span><span class="hljs-comment">        é€šè¿‡aopå‘½åç©ºé—´çš„&lt;aop:aspectj-autoproxy /&gt;</span><span class="hljs-comment">        å£°æ˜è‡ªåŠ¨ä¸ºspringå®¹å™¨ä¸­é‚£äº›é…ç½®@aspectJåˆ‡é¢çš„beanåˆ›å»ºä»£ç†ï¼Œç»‡å…¥åˆ‡é¢ã€‚</span><span class="hljs-comment">        å½“ç„¶ï¼Œspring åœ¨å†…éƒ¨ä¾æ—§é‡‡ç”¨AnnotationAwareAspectJAutoProxyCreator</span><span class="hljs-comment">è¿›è¡Œè‡ªåŠ¨ä»£ç†çš„åˆ›å»ºå·¥ä½œï¼Œ</span><span class="hljs-comment">        ä½†å…·ä½“å®ç°çš„ç»†èŠ‚å·²ç»è¢«&lt;aop:aspectj-autoproxy /&gt;éšè—èµ·æ¥äº†</span><span class="hljs-comment">    --&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span></code></pre><ol start="3"><li>æµ‹è¯•</li></ol><img src="/images/Spring5/image-20201122214033151.png" alt="image-20201122214033151" style="zoom:50%;" /><p><strong>aop:aspectj-autoproxyï¼šè¯´æ˜</strong></p><p>é€šè¿‡aopå‘½åç©ºé—´çš„**&lt;aop:aspectj-autoproxy /&gt;**å£°æ˜è‡ªåŠ¨ä¸ºspringå®¹å™¨ä¸­é‚£äº›é…ç½®@aspectJåˆ‡é¢çš„beanåˆ›å»ºä»£ç†ï¼Œç»‡å…¥åˆ‡é¢ã€‚å½“ç„¶ï¼Œspring åœ¨å†…éƒ¨ä¾æ—§é‡‡ç”¨AnnotationAwareAspectJAutoProxyCreatorè¿›è¡Œè‡ªåŠ¨ä»£ç†çš„åˆ›å»ºå·¥ä½œï¼Œä½†å…·ä½“å®ç°çš„ç»†èŠ‚å·²ç»è¢«&lt;aop:aspectj-autoproxy /&gt;éšè—èµ·æ¥äº†</p><p>&lt;aop:aspectj-autoproxy /&gt;æœ‰ä¸€ä¸ªproxy-target-classå±æ€§ï¼Œé»˜è®¤ä¸ºfalseï¼Œè¡¨ç¤ºä½¿ç”¨jdkåŠ¨æ€ä»£ç†ç»‡å…¥å¢å¼ºï¼Œå½“é…ä¸º&lt;aop:aspectj-autoproxy  poxy-target-class=â€trueâ€/&gt;æ—¶ï¼Œè¡¨ç¤ºä½¿ç”¨CGLibåŠ¨æ€ä»£ç†æŠ€æœ¯ç»‡å…¥å¢å¼ºã€‚ä¸è¿‡å³ä½¿proxy-target-classè®¾ç½®ä¸ºfalseï¼Œå¦‚æœç›®æ ‡ç±»æ²¡æœ‰å£°æ˜æ¥å£ï¼Œåˆ™springå°†è‡ªåŠ¨ä½¿ç”¨CGLibåŠ¨æ€ä»£ç†ã€‚</p><h2 id="11-æ•´åˆMyBatis"><a href="#11-æ•´åˆMyBatis" class="headerlink" title="11. æ•´åˆMyBatis"></a>11. æ•´åˆMyBatis</h2><p>æ­¥éª¤ï¼š</p><ol><li>å¯¼å…¥ç›¸å…³çš„jaråŒ…</li></ol><ul><li>junit</li><li>mybatis</li><li>mysqlæ•°æ®åº“</li><li>springç›¸å…³çš„</li><li>aopç»‡å…¥</li><li>mybatis-spring</li></ul><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>    <span class="hljs-comment">&lt;!-- https://mvnrepository.com/artifact/junit/junit --&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.12<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.6<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>8.0.15<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>    <span class="hljs-comment">&lt;!--springç›¸å…³--&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-webmvc<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.3.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-jdbc<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.0.7.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>  <span class="hljs-comment">&lt;!--mybatis-springæ•´åˆåŒ… ã€é‡ç‚¹ã€‘--&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-spring<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.3.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>    <span class="hljs-comment">&lt;!--aspectJ AOP ç»‡å…¥å™¨--&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.aspectj<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>aspectjweaver<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.9.4<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span></code></pre><p><strong>é…ç½®Mavené™æ€èµ„æºè¿‡æ»¤é—®é¢˜ï¼</strong></p><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">resources</span>&gt;</span>       <span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span>           <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/main/java<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span>           <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span>               <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.properties<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>               <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.xml<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>           <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span>           <span class="hljs-tag">&lt;<span class="hljs-name">filtering</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">filtering</span>&gt;</span>       <span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span>   <span class="hljs-tag">&lt;/<span class="hljs-name">resources</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span></code></pre><ol start="2"><li><p>ç¼–å†™é…ç½®æ–‡ä»¶</p></li><li><p>ä»£ç å®ç°</p></li></ol><h3 id="11-1-å›é¡¾mybatis"><a href="#11-1-å›é¡¾mybatis" class="headerlink" title="11.1 å›é¡¾mybatis"></a>11.1 å›é¡¾mybatis</h3><ol><li>ç¼–å†™pojoå®ä½“ç±»</li></ol><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.wen.pojo;<span class="hljs-keyword">import</span> lombok.Data;<span class="hljs-meta">@Data</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>&#123;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> id;    <span class="hljs-keyword">private</span> String name;    <span class="hljs-keyword">private</span> String pwd;&#125;</code></pre><ol start="2"><li>å®ç°mybatisçš„é…ç½®æ–‡ä»¶</li></ol><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--mybatis-config.xml--&gt;</span><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">configuration</span></span><span class="hljs-meta">        <span class="hljs-meta-keyword">PUBLIC</span> <span class="hljs-meta-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span><span class="hljs-meta">        <span class="hljs-meta-string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span><span class="hljs-comment">&lt;!--æ ¸å¿ƒé…ç½®æ–‡ä»¶--&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">properties</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;db.properties&quot;</span>/&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">environments</span> <span class="hljs-attr">default</span>=<span class="hljs-string">&quot;development&quot;</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">environment</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;development&quot;</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">transactionManager</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;JDBC&quot;</span>/&gt;</span><span class="hljs-comment">&lt;!--äº‹åŠ¡ç®¡ç†--&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">dataSource</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;POOLED&quot;</span>&gt;</span><span class="hljs-comment">&lt;!--æ•°æ®åº“ç›¸å…³--&gt;</span>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driver&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;driver&#125;&quot;</span>/&gt;</span>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;url&#125;&quot;</span>/&gt;</span>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;username&#125;&quot;</span>/&gt;</span>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;password&#125;&quot;</span>/&gt;</span>            <span class="hljs-tag">&lt;/<span class="hljs-name">dataSource</span>&gt;</span>        <span class="hljs-tag">&lt;/<span class="hljs-name">environment</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">environments</span>&gt;</span>    <span class="hljs-comment">&lt;!--æ¯ä¸€ä¸ªMapper.xmléƒ½éœ€è¦åœ¨mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ³¨å†Œ--&gt;</span>    <span class="hljs-comment">&lt;!--    Type interface com.wen.mapper.UserMapper id not known to the MapperRegistry.--&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">mappers</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;com/wen/mapper/UserMapper.xml&quot;</span>/&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">mappers</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span></code></pre><pre><code class="hljs properties"><span class="hljs-comment">#db.properties</span><span class="hljs-attr">driver</span>=<span class="hljs-string">com.mysql.cj.jdbc.Driver</span><span class="hljs-attr">url</span>=<span class="hljs-string">jdbc:mysql://localhost:3306/mybatis?characterEncoding=utf8&amp;useSSL=false&amp;serverTimezone=UTC&amp;rewriteBatchedStatements=true</span><span class="hljs-attr">username</span>=<span class="hljs-string">root</span><span class="hljs-attr">password</span>=<span class="hljs-string">645645aa</span></code></pre><ol start="3"><li>ç¼–å†™MyBatisUtilså·¥å…·ç±»</li></ol><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.wen.utils;<span class="hljs-keyword">import</span> org.apache.ibatis.io.Resources;<span class="hljs-keyword">import</span> org.apache.ibatis.session.SqlSession;<span class="hljs-keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;<span class="hljs-keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;<span class="hljs-keyword">import</span> java.io.IOException;<span class="hljs-keyword">import</span> java.io.InputStream;<span class="hljs-comment">//SqlSessionFactory  SqlSession</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyBatisUtils</span> </span>&#123;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> SqlSessionFactory sqlSessionFactory;    <span class="hljs-keyword">static</span> &#123;        <span class="hljs-keyword">try</span> &#123;            <span class="hljs-comment">//ä½¿ç”¨mybatisç¬¬ä¸€æ­¥:è·å–SqlSessionFactoryå¯¹è±¡</span>            String resource = <span class="hljs-string">&quot;mybatis-config.xml&quot;</span>;            InputStream inputStream = Resources.getResourceAsStream(resource);            sqlSessionFactory = <span class="hljs-keyword">new</span> SqlSessionFactoryBuilder().build(inputStream);        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;            e.printStackTrace();        &#125;    &#125;    <span class="hljs-comment">//æ—¢ç„¶æœ‰äº† SqlSessionFactoryï¼Œé¡¾åæ€ä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥ä»ä¸­è·å¾— SqlSession çš„å®ä¾‹ã€‚</span>    <span class="hljs-comment">// SqlSession æä¾›äº†åœ¨æ•°æ®åº“æ‰§è¡Œ SQL å‘½ä»¤æ‰€éœ€çš„æ‰€æœ‰æ–¹æ³•ã€‚</span>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SqlSession <span class="hljs-title">getSqlSession</span><span class="hljs-params">()</span></span>&#123;        SqlSession sqlSession = sqlSessionFactory.openSession();        <span class="hljs-keyword">return</span> sqlSession;    &#125;&#125;</code></pre><ol start="4"><li>è¿æ¥æ•°æ®åº“ï¼ˆIDEAï¼‰</li></ol><img src="/images/Spring5/image-20201123091508200.png" alt="image-20201123091508200" style="zoom:50%;" /><ol start="5"><li>UserMapperæ¥å£ç¼–å†™</li></ol><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.wen.mapper;<span class="hljs-keyword">import</span> com.wen.pojo.User;<span class="hljs-keyword">import</span> org.apache.ibatis.annotations.Param;<span class="hljs-keyword">import</span> java.util.List;<span class="hljs-keyword">import</span> java.util.Map;<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">UserMapper</span> </span>&#123;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">addUser</span><span class="hljs-params">(Map&lt;String,Object&gt; map)</span></span>;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">deleteUser</span><span class="hljs-params">(<span class="hljs-meta">@Param(&quot;userId&quot;)</span> <span class="hljs-keyword">int</span> id)</span></span>;    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title">selectAllUsers</span><span class="hljs-params">()</span></span>;    <span class="hljs-function"><span class="hljs-keyword">public</span> User <span class="hljs-title">getUserById</span><span class="hljs-params">(<span class="hljs-meta">@Param(&quot;userId&quot;)</span> <span class="hljs-keyword">int</span> id)</span></span>;&#125;</code></pre><ol start="6"><li>æ¥å£å¯¹åº”çš„Mapperæ˜ å°„æ–‡ä»¶</li></ol><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">mapper</span></span><span class="hljs-meta">        <span class="hljs-meta-keyword">PUBLIC</span> <span class="hljs-meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><span class="hljs-meta">        <span class="hljs-meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><span class="hljs-comment">&lt;!--çœå»äº†ä»¥å¾€çš„UserDaoImpl çœå»äº†è¿æ¥æ•°æ®åº“çš„ä¸€äº›è¯­å¥--&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.wen.mapper.UserMapper&quot;</span>&gt;</span><span class="hljs-comment">&lt;!--å‘½åç©ºé—´ ç»‘å®šä¸€ä¸ªæŒ‡å®šçš„Mapperæ¥å£--&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;addUser&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;map&quot;</span>&gt;</span>        insert into mybatis.user(id, name, pwd) values (#&#123;userId&#125;, #&#123;userName&#125;, #&#123;userPwd&#125;)    <span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">delete</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;deleteUser&quot;</span>&gt;</span>        delete from mybatis.user where id=#&#123;userId&#125;    <span class="hljs-tag">&lt;/<span class="hljs-name">delete</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;selectAllUsers&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;com.wen.pojo.User&quot;</span>&gt;</span>        select * from mybatis.user    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getUserById&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;com.wen.pojo.User&quot;</span>&gt;</span>        select * from mybatis.user where id=$&#123;userId&#125;    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span></code></pre><ol start="7"><li>æµ‹è¯•ç±»</li></ol><pre><code class="hljs java"><span class="hljs-keyword">import</span> com.wen.mapper.UserMapper;<span class="hljs-keyword">import</span> com.wen.pojo.User;<span class="hljs-keyword">import</span> com.wen.utils.MyBatisUtils;<span class="hljs-keyword">import</span> org.apache.ibatis.session.SqlSession;<span class="hljs-keyword">import</span> java.util.List;<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MapperTest</span> </span>&#123;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;        SqlSession sqlSession = MyBatisUtils.getSqlSession();        UserMapper mapper = sqlSession.getMapper(UserMapper.class);        List&lt;User&gt; userList = mapper.selectAllUsers();        <span class="hljs-keyword">for</span> (User user : userList) &#123;            System.out.println(user.getName());        &#125;    &#125;&#125;</code></pre><img src="/images/Spring5/image-20201123091739554.png" alt="image-20201123091739554" style="zoom:50%;" /><p>æµ‹è¯•ï¼šæµ‹è¯•æˆåŠŸ</p><img src="/images/Spring5/image-20201123091755933.png" alt="image-20201123091755933" style="zoom:50%;" /><h3 id="11-2-æ•´åˆMyBatisæ–¹å¼ä¸€"><a href="#11-2-æ•´åˆMyBatisæ–¹å¼ä¸€" class="headerlink" title="11.2 æ•´åˆMyBatisæ–¹å¼ä¸€"></a>11.2 æ•´åˆMyBatisæ–¹å¼ä¸€</h3><p>æ•´ä¸ªé¡¹ç›®çš„ç»“æ„ï¼š</p><img src="/images/Spring5/image-20201123105615677.png" alt="image-20201123105615677" style="zoom:50%;" /><ol><li>ç¼–å†™applicationContext.xml</li></ol><p>è¦å’ŒSpringä¸€èµ·ä½¿ç”¨MyBatisï¼Œéœ€è¦åœ¨Springåº”ç”¨ä¸Šä¸‹æ–‡ä¸­å®šä¹‰è‡³å°‘ä¸¤æ ·ä¸œè¥¿ï¼šä¸€ä¸ªSqlSessionFactoryå’Œè‡³å°‘ä¸€ä¸ªæ•°æ®æ˜ å°„ç±»ã€‚</p><p>åœ¨ MyBatis-Spring ä¸­ï¼Œå¯ä½¿ç”¨SqlSessionFactoryBeanæ¥åˆ›å»º SqlSessionFactoryã€‚</p><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- æŒ‡å®šspringè¯»å–db.propertiesé…ç½® --&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">context:property-placeholder</span> <span class="hljs-attr">location</span>=<span class="hljs-string">&quot;db.properties&quot;</span>/&gt;</span>    <span class="hljs-comment">&lt;!--DataSourceåŸæ¥ä½¿ç”¨çš„æ˜¯mybatisçš„ï¼Œç°åœ¨ä½¿ç”¨Springçš„æ•°æ®æº--&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;dataSource&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driverClassName&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;driver&#125;&quot;</span>/&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;url&#125;&quot;</span>/&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;name&#125;&quot;</span>/&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;password&#125;&quot;</span>/&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>    <span class="hljs-comment">&lt;!--SqlSessionFactoryBean æ¥åˆ›å»º sqlSessionFactory--&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;sqlSessionFactory&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;dataSource&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;dataSource&quot;</span>/&gt;</span>        <span class="hljs-comment">&lt;!--ç»‘å®šmybatisé…ç½®æ–‡ä»¶ è¿™æ ·å¯ä»¥åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­å†™mybatis-config.xmlçš„ç›¸å…³é…ç½® å¦‚ä¸‹é¢åŒ…çš„æ‰«æ--&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;configLocation&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;classpath:mybatis-config.xml&quot;</span>/&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;mapperLocations&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;classpath:com/wen/mapper/*.xml&quot;</span>/&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>    <span class="hljs-comment">&lt;!--SqlSessionTemplate æ˜¯ MyBatis-Spring çš„æ ¸å¿ƒã€‚</span><span class="hljs-comment">    ä½œä¸º SqlSession çš„ä¸€ä¸ªå®ç°ï¼Œè¿™æ„å‘³ç€å¯ä»¥ä½¿ç”¨å®ƒæ— ç¼ä»£æ›¿ä½ ä»£ç ä¸­å·²ç»åœ¨ä½¿ç”¨çš„ SqlSessionã€‚--&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;sqlSession&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.mybatis.spring.SqlSessionTemplate&quot;</span>&gt;</span>        <span class="hljs-comment">&lt;!--å› ä¸ºSqlSessionTemplateæ²¡æœ‰setæ–¹æ³•ï¼Œåªèƒ½ä½¿ç”¨æ„é€ å™¨è¿›è¡Œæ³¨å…¥--&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;sqlSessionFactory&quot;</span>/&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span></code></pre><p>å…¶ä¸­db.propertieså¦‚ä¸‹ï¼š</p><pre><code class="hljs properties"><span class="hljs-attr">driver</span>=<span class="hljs-string">com.mysql.cj.jdbc.Driver</span><span class="hljs-attr">url</span>=<span class="hljs-string">jdbc:mysql://localhost:3306/mybatis?characterEncoding=utf8&amp;useSSL=false&amp;serverTimezone=UTC&amp;rewriteBatchedStatements=true&amp;allowPublicKeyRetrieval=true</span><span class="hljs-attr">name</span>=<span class="hljs-string">root</span><span class="hljs-attr">password</span>=<span class="hljs-string">645645aa</span></code></pre><p>æ³¨æ„ï¼šname å¦‚æœæ”¹æˆusername userNameéƒ½ä¼šæŠ¥é”™ï¼Œå¾ˆå¥‡æ€ªï¼ï¼</p><ol start="2"><li>ç¼–å†™pojoç±»ã€Mapperæ¥å£ã€Mapper.xml</li></ol><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.wen.pojo;<span class="hljs-keyword">import</span> lombok.Data;<span class="hljs-meta">@Data</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>&#123;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> id;    <span class="hljs-keyword">private</span> String name;    <span class="hljs-keyword">private</span> String pwd;&#125;</code></pre><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.wen.mapper;<span class="hljs-keyword">import</span> com.wen.pojo.User;<span class="hljs-keyword">import</span> org.apache.ibatis.annotations.Param;<span class="hljs-keyword">import</span> java.util.List;<span class="hljs-keyword">import</span> java.util.Map;<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">UserMapper</span> </span>&#123;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">addUser</span><span class="hljs-params">(Map&lt;String,Object&gt; map)</span></span>;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">deleteUser</span><span class="hljs-params">(<span class="hljs-meta">@Param(&quot;userId&quot;)</span> <span class="hljs-keyword">int</span> id)</span></span>;    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title">selectAllUsers</span><span class="hljs-params">()</span></span>;    <span class="hljs-function"><span class="hljs-keyword">public</span> User <span class="hljs-title">getUserById</span><span class="hljs-params">(<span class="hljs-meta">@Param(&quot;userId&quot;)</span> <span class="hljs-keyword">int</span> id)</span></span>;&#125;</code></pre><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">mapper</span></span><span class="hljs-meta">        <span class="hljs-meta-keyword">PUBLIC</span> <span class="hljs-meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><span class="hljs-meta">        <span class="hljs-meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><span class="hljs-comment">&lt;!--çœå»äº†ä»¥å¾€çš„UserDaoImpl çœå»äº†è¿æ¥æ•°æ®åº“çš„ä¸€äº›è¯­å¥--&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.wen.mapper.UserMapper&quot;</span>&gt;</span><span class="hljs-comment">&lt;!--å‘½åç©ºé—´ ç»‘å®šä¸€ä¸ªæŒ‡å®šçš„Mapperæ¥å£--&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;addUser&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;map&quot;</span>&gt;</span>        insert into mybatis.user(id, name, pwd) values (#&#123;userId&#125;, #&#123;userName&#125;, #&#123;userPwd&#125;)    <span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">delete</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;deleteUser&quot;</span>&gt;</span>        delete from mybatis.user where id=#&#123;userId&#125;    <span class="hljs-tag">&lt;/<span class="hljs-name">delete</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;selectAllUsers&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;com.wen.pojo.User&quot;</span>&gt;</span>        select * from mybatis.user    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getUserById&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;com.wen.pojo.User&quot;</span>&gt;</span>        select * from mybatis.user where id=$&#123;userId&#125;    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span></code></pre><ol start="3"><li>å°†sqlSession beanæ³¨å…¥åˆ°Mapper beanä¸­</li></ol><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.wen.mapper;<span class="hljs-keyword">import</span> com.wen.pojo.User;<span class="hljs-keyword">import</span> lombok.Data;<span class="hljs-keyword">import</span> org.mybatis.spring.SqlSessionTemplate;<span class="hljs-keyword">import</span> java.util.List;<span class="hljs-keyword">import</span> java.util.Map;<span class="hljs-meta">@Data</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserMapperImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">UserMapper</span></span>&#123;    <span class="hljs-comment">//æˆ‘ä»¬æ‰€æœ‰çš„æ“ä½œéƒ½ä½¿ç”¨sqlSessionæ¥æ‰§è¡Œï¼Œç°åœ¨éƒ½ä½¿ç”¨sqlSessionTemplate</span>    <span class="hljs-keyword">private</span> SqlSessionTemplate sqlSession;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">addUser</span><span class="hljs-params">(Map&lt;String, Object&gt; map)</span> </span>&#123;        UserMapper mapper = sqlSession.getMapper(UserMapper.class);        <span class="hljs-keyword">return</span> mapper.addUser(map);    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">deleteUser</span><span class="hljs-params">(<span class="hljs-keyword">int</span> id)</span> </span>&#123;        UserMapper mapper = sqlSession.getMapper(UserMapper.class);        <span class="hljs-keyword">return</span> mapper.deleteUser(id);    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title">selectAllUsers</span><span class="hljs-params">()</span> </span>&#123;        UserMapper mapper = sqlSession.getMapper(UserMapper.class);        <span class="hljs-keyword">return</span> mapper.selectAllUsers();    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> User <span class="hljs-title">getUserById</span><span class="hljs-params">(<span class="hljs-keyword">int</span> id)</span> </span>&#123;        UserMapper mapper = sqlSession.getMapper(UserMapper.class);        <span class="hljs-keyword">return</span> mapper.getUserById(id);    &#125;&#125;</code></pre><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userMapper&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.wen.mapper.UserMapperImpl&quot;</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;sqlSession&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;sqlSession&quot;</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span></code></pre><p>å®Œæ•´çš„é…ç½®æ–‡ä»¶ï¼š</p><p><strong>db.properties</strong></p><pre><code class="hljs properties"><span class="hljs-attr">driver</span>=<span class="hljs-string">com.mysql.cj.jdbc.Driver</span><span class="hljs-attr">url</span>=<span class="hljs-string">jdbc:mysql://localhost:3306/mybatis?characterEncoding=utf8&amp;useSSL=false&amp;serverTimezone=UTC&amp;rewriteBatchedStatements=true&amp;allowPublicKeyRetrieval=true</span><span class="hljs-attr">name</span>=<span class="hljs-string">root</span><span class="hljs-attr">password</span>=<span class="hljs-string">645645aa</span></code></pre><p><strong>spring-mapper.xml</strong></p><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><span class="hljs-tag">       <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/context&quot;</span></span><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><span class="hljs-tag"><span class="hljs-string">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span><span class="hljs-tag"><span class="hljs-string">        http://www.springframework.org/schema/context</span></span><span class="hljs-tag"><span class="hljs-string">        https://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span>    <span class="hljs-comment">&lt;!-- æŒ‡å®šspringè¯»å–db.propertiesé…ç½® --&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">context:property-placeholder</span> <span class="hljs-attr">location</span>=<span class="hljs-string">&quot;db.properties&quot;</span>/&gt;</span>    <span class="hljs-comment">&lt;!--DataSourceåŸæ¥ä½¿ç”¨çš„æ˜¯mybatisçš„ï¼Œç°åœ¨ä½¿ç”¨Springçš„æ•°æ®æº--&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;dataSource&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driverClassName&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;driver&#125;&quot;</span>/&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;url&#125;&quot;</span>/&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;name&#125;&quot;</span>/&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;password&#125;&quot;</span>/&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>    <span class="hljs-comment">&lt;!--SqlSessionFactoryBean æ¥åˆ›å»º sqlSessionFactory--&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;sqlSessionFactory&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;dataSource&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;dataSource&quot;</span>/&gt;</span>        <span class="hljs-comment">&lt;!--ç»‘å®šmybatisé…ç½®æ–‡ä»¶ è¿™æ ·å¯ä»¥åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­å†™mybatis-config.xmlçš„ç›¸å…³é…ç½® å¦‚ä¸‹é¢åŒ…çš„æ‰«æ--&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;configLocation&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;classpath:mybatis-config.xml&quot;</span>/&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;mapperLocations&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;classpath:com/wen/mapper/*.xml&quot;</span>/&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>    <span class="hljs-comment">&lt;!--SqlSessionTemplate æ˜¯ MyBatis-Spring çš„æ ¸å¿ƒã€‚</span><span class="hljs-comment">    ä½œä¸º SqlSession çš„ä¸€ä¸ªå®ç°ï¼Œè¿™æ„å‘³ç€å¯ä»¥ä½¿ç”¨å®ƒæ— ç¼ä»£æ›¿ä½ ä»£ç ä¸­å·²ç»åœ¨ä½¿ç”¨çš„ SqlSessionã€‚--&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;sqlSession&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.mybatis.spring.SqlSessionTemplate&quot;</span>&gt;</span>        <span class="hljs-comment">&lt;!--å› ä¸ºSqlSessionTemplateæ²¡æœ‰setæ–¹æ³•ï¼Œåªèƒ½ä½¿ç”¨æ„é€ å™¨è¿›è¡Œæ³¨å…¥--&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;sqlSessionFactory&quot;</span>/&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span></code></pre><p><strong>mybatis-config.xml</strong></p><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">configuration</span></span><span class="hljs-meta">        <span class="hljs-meta-keyword">PUBLIC</span> <span class="hljs-meta-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span><span class="hljs-meta">        <span class="hljs-meta-string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span><span class="hljs-comment">&lt;!--æ ¸å¿ƒé…ç½®æ–‡ä»¶--&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><span class="hljs-comment">&lt;!--ä¸€èˆ¬ åˆ«å è®¾ç½® åœ¨è¿™ä¸ªæ–‡ä»¶è¿›è¡Œé…ç½®--&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span></code></pre><p><strong>applicationContext.xml</strong></p><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><span class="hljs-tag">       <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/context&quot;</span></span><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><span class="hljs-tag"><span class="hljs-string">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span><span class="hljs-tag"><span class="hljs-string">        http://www.springframework.org/schema/context</span></span><span class="hljs-tag"><span class="hljs-string">        https://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">import</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;spring-mapper.xml&quot;</span>/&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userMapper&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.wen.mapper.UserMapperImpl&quot;</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;sqlSession&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;sqlSession&quot;</span>/&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span></code></pre><ol start="5"><li>æµ‹è¯•</li></ol><pre><code class="hljs java"><span class="hljs-keyword">import</span> com.wen.mapper.UserMapper;<span class="hljs-keyword">import</span> com.wen.pojo.User;<span class="hljs-keyword">import</span> org.springframework.context.ApplicationContext;<span class="hljs-keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;<span class="hljs-keyword">import</span> java.util.List;<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MapperTest</span> </span>&#123;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;        ApplicationContext applicationContext = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">&quot;applicationContext.xml&quot;</span>);        UserMapper userMapper = applicationContext.getBean(<span class="hljs-string">&quot;userMapper&quot;</span>, UserMapper.class);        List&lt;User&gt; userList = userMapper.selectAllUsers();        <span class="hljs-keyword">for</span> (User user : userList) &#123;            System.out.println(user.getName());        &#125;    &#125;&#125;</code></pre><p>æµ‹è¯•æˆåŠŸï¼</p><img src="/images/Spring5/image-20201123110502571.png" alt="image-20201123110502571" style="zoom:50%;" /><h3 id="11-3-æ•´åˆMyBatisæ–¹å¼äºŒ"><a href="#11-3-æ•´åˆMyBatisæ–¹å¼äºŒ" class="headerlink" title="11.3 æ•´åˆMyBatisæ–¹å¼äºŒ"></a>11.3 æ•´åˆMyBatisæ–¹å¼äºŒ</h3><p>é€šè¿‡SqlSessionDaoSupportå¯ä»¥çœç•¥sqlSessionåœ¨é…ç½®æ–‡ä»¶ä¸­çš„æ³¨å…¥ã€‚</p><p>SqlSessionDaoSupportæ˜¯ä¸€ä¸ªæŠ½è±¡çš„æ”¯æŒç±»ï¼Œç”¨æ¥ä¸ºä½ æä¾›SqlSessionï¼Œè°ƒç”¨getSqlSession()æ–¹æ³•ä½ ä¼šå¾—åˆ°ä¸€ä¸ªSqlSessionTemplateã€‚</p><ol><li>ä¿®æ”¹UserMapperImplç±»</li></ol><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.wen.mapper;<span class="hljs-keyword">import</span> com.wen.pojo.User;<span class="hljs-keyword">import</span> lombok.Data;<span class="hljs-keyword">import</span> org.mybatis.spring.SqlSessionTemplate;<span class="hljs-keyword">import</span> org.mybatis.spring.support.SqlSessionDaoSupport;<span class="hljs-keyword">import</span> java.util.List;<span class="hljs-keyword">import</span> java.util.Map;<span class="hljs-meta">@Data</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserMapperImpl</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">SqlSessionDaoSupport</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">UserMapper</span></span>&#123;    <span class="hljs-comment">//æˆ‘ä»¬æ‰€æœ‰çš„æ“ä½œéƒ½ä½¿ç”¨sqlSessionæ¥æ‰§è¡Œï¼Œç°åœ¨éƒ½ä½¿ç”¨sqlSessionTemplate</span><span class="hljs-comment">//    private SqlSessionTemplate sqlSession; //è¿™ä¸ªä¸€å®šè¦æ³¨é‡Šæ‰</span>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">addUser</span><span class="hljs-params">(Map&lt;String, Object&gt; map)</span> </span>&#123;        <span class="hljs-keyword">return</span> getSqlSession().getMapper(UserMapper.class).addUser(map);    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">deleteUser</span><span class="hljs-params">(<span class="hljs-keyword">int</span> id)</span> </span>&#123;        <span class="hljs-keyword">return</span> getSqlSession().getMapper(UserMapper.class).deleteUser(id);    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title">selectAllUsers</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-keyword">return</span> getSqlSession().getMapper(UserMapper.class).selectAllUsers();    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> User <span class="hljs-title">getUserById</span><span class="hljs-params">(<span class="hljs-keyword">int</span> id)</span> </span>&#123;        <span class="hljs-keyword">return</span> getSqlSession().getMapper(UserMapper.class).getUserById(id);    &#125;&#125;</code></pre><ol start="2"><li>ä¿®æ”¹é…ç½®æ–‡ä»¶</li></ol><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--applicationContext.xml--&gt;</span><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><span class="hljs-tag">       <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/context&quot;</span></span><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><span class="hljs-tag"><span class="hljs-string">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span><span class="hljs-tag"><span class="hljs-string">        http://www.springframework.org/schema/context</span></span><span class="hljs-tag"><span class="hljs-string">        https://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">import</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;spring-mapper.xml&quot;</span>/&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userMapper&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.wen.mapper.UserMapperImpl&quot;</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;sqlSessionFactory&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;sqlSessionFactory&quot;</span>/&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span></code></pre><img src="/images/Spring5/image-20201123125502135.png" alt="image-20201123125502135" style="zoom:50%;" /><p><strong>è¿™ä¸€éƒ¨åˆ†ä¸éœ€è¦äº†ï¼ï¼</strong></p><ol start="3"><li>æµ‹è¯•</li></ol><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MapperTest</span> </span>&#123;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;        ApplicationContext applicationContext = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">&quot;applicationContext.xml&quot;</span>);        UserMapper userMapper = applicationContext.getBean(<span class="hljs-string">&quot;userMapper&quot;</span>, UserMapper.class);        List&lt;User&gt; userList = userMapper.selectAllUsers();        <span class="hljs-keyword">for</span> (User user : userList) &#123;            System.out.println(user.getName());        &#125;    &#125;&#125;</code></pre><img src="/images/Spring5/image-20201123125626302.png" alt="image-20201123125626302" style="zoom:50%;" /><p>æµ‹è¯•æˆåŠŸï¼ï¼</p><h2 id="12-å£°æ˜å¼äº‹åŠ¡"><a href="#12-å£°æ˜å¼äº‹åŠ¡" class="headerlink" title="12.å£°æ˜å¼äº‹åŠ¡"></a>12.å£°æ˜å¼äº‹åŠ¡</h2><h3 id="12-1-å›é¡¾äº‹åŠ¡"><a href="#12-1-å›é¡¾äº‹åŠ¡" class="headerlink" title="12.1 å›é¡¾äº‹åŠ¡"></a>12.1 å›é¡¾äº‹åŠ¡</h3><ul><li><strong>æŠŠä¸€ç»„ä¸šåŠ¡å½“ä½œä¸€ä¸ªä¸šåŠ¡æ¥åš</strong>ï¼è¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½å¤±è´¥ã€‚</li><li>äº‹åŠ¡åœ¨é¡¹ç›®å¼€å‘ä¸­ï¼Œååˆ†çš„é‡è¦ï¼Œæ¶‰åŠåˆ°æ•°æ®çš„ä¸€è‡´æ€§é—®é¢˜ï¼Œä¸èƒ½é©¬è™ï¼</li><li>ç¡®ä¿æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§ã€‚</li></ul><p>äº‹åŠ¡ACIDåŸåˆ™ï¼š</p><ul><li><p>åŸå­æ€§</p><p>äº‹åŠ¡æ˜¯åŸå­æ€§æ“ä½œï¼Œç”±ä¸€ç³»åˆ—åŠ¨ä½œç»„æˆï¼Œäº‹åŠ¡çš„åŸå­æ€§ç¡®ä¿åŠ¨ä½œè¦ä¹ˆå…¨éƒ¨å®Œæˆï¼Œè¦ä¹ˆå®Œå…¨ä¸èµ·ä½œç”¨ã€‚</p></li><li><p>ä¸€è‡´æ€§</p><p>ä¸€æ—¦æ‰€æœ‰äº‹åŠ¡åŠ¨ä½œå®Œæˆï¼Œäº‹åŠ¡å°±è¦è¢«æäº¤ã€‚æ•°æ®å’Œèµ„æºå¤„äºä¸€ç§æ»¡è¶³ä¸šåŠ¡è§„åˆ™çš„ä¸€è‡´æ€§çŠ¶æ€ä¸­ã€‚</p></li><li><p>éš”ç¦»æ€§</p><p>å¯èƒ½å¤šä¸ªäº‹åŠ¡ä¼šåŒæ—¶å¤„ç†ç›¸åŒçš„æ•°æ®ï¼Œå› æ­¤æ¯ä¸ªäº‹åŠ¡éƒ½åº”è¯¥ä¸å…¶ä»–é£Ÿç‰©éš”ç¦»å¼€æ¥ï¼Œé˜²æ­¢æ•°æ®æŸåã€‚</p></li><li><p>æŒä¹…æ€§ï¼š</p><p>äº‹åŠ¡ä¸€æ—¦æäº¤ï¼Œæ— è®ºç³»ç»Ÿå‘ç”Ÿä»€ä¹ˆé—®é¢˜ï¼Œç»“æœéƒ½ä¸ä¼šå½±å“ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œäº‹åŠ¡çš„ç»“æœè¢«å†™åˆ°å­˜å‚¨å™¨ä¸­ã€‚</p></li></ul><p>æˆ‘ä»¬å…ˆåšä¸€ä¸ªå®éªŒï¼š</p><ol><li>é¦–å…ˆä¿®æ”¹UserMapperImplä¸­çš„selectUsersæ–¹æ³•</li></ol><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title">selectAllUsers</span><span class="hljs-params">()</span> </span>&#123;  UserMapper mapper = getSqlSession().getMapper(UserMapper.class);  <span class="hljs-comment">//å…ˆè¿›è¡Œæ·»åŠ æ“ä½œ</span>  mapper.addUser(<span class="hljs-keyword">new</span> User(<span class="hljs-number">6</span>, <span class="hljs-string">&quot;renwen&quot;</span>, <span class="hljs-string">&quot;645645&quot;</span>));  <span class="hljs-comment">//åˆ é™¤æ“ä½œ</span>  mapper.deleteUser(<span class="hljs-number">6</span>);  <span class="hljs-comment">//æœ€åè¿›è¡Œselect</span>  <span class="hljs-keyword">return</span> mapper.selectAllUsers();&#125;</code></pre><ol start="2"><li>å…¶ä¸­deleteæ“ä½œ sqlè¯­å¥å…¶å®æ˜¯é”™çš„ï¼</li></ol><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">delete</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;deleteUser&quot;</span>&gt;</span>  deletes from mybatis.user where id=#&#123;userId&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">delete</span>&gt;</span></code></pre><ol start="3"><li>æµ‹è¯•</li></ol><p>ç»“æœï¼šaddæˆåŠŸæ‰§è¡Œï¼Œdeleteå‡ºé”™ï¼</p><p>æ²¡æœ‰è¿›è¡Œäº‹åŠ¡çš„ç®¡ç†ï¼›</p><p>æˆ‘ä»¬æƒ³è®©ä»–ä»¬éƒ½æˆåŠŸæ‰æˆåŠŸï¼Œæœ‰ä¸€ä¸ªå¤±è´¥å°±éƒ½å¤±è´¥ï¼Œæˆ‘ä»¬å°±åº”è¯¥éœ€è¦äº‹åŠ¡ã€‚</p><p>ä»¥å‰æˆ‘ä»¬éƒ½éœ€è¦è‡ªå·±æ‰‹åŠ¨ç®¡ç†äº‹åŠ¡ï¼Œååˆ†éº»çƒ¦ï¼ä½†æ˜¯Springç»™æˆ‘ä»¬æä¾›äº†äº‹åŠ¡ç®¡ç†ï¼Œæˆ‘ä»¬åªéœ€è¦é…ç½®å³å¯ï¼</p><h3 id="12-2-Springä¸­çš„äº‹åŠ¡ç®¡ç†"><a href="#12-2-Springä¸­çš„äº‹åŠ¡ç®¡ç†" class="headerlink" title="12.2 Springä¸­çš„äº‹åŠ¡ç®¡ç†"></a>12.2 Springä¸­çš„äº‹åŠ¡ç®¡ç†</h3><ul><li>å£°æ˜å¼äº‹åŠ¡ï¼šAOP</li><li>ç¼–ç¨‹å¼äº‹åŠ¡ï¼šéœ€è¦ä»£ç ç¼–å†™ï¼ˆä¸å¤ªå®ç”¨~ï¼‰</li></ul><ol><li>é…ç½®å£°æ˜å¼äº‹åŠ¡</li></ol><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--é…ç½®å£°æ˜å¼äº‹åŠ¡--&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;transactionManager&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;dataSource&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;dataSource&quot;</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span></code></pre><ol start="2"><li>é…ç½®å¥½äº‹åŠ¡ç®¡ç†å™¨åï¼Œæˆ‘ä»¬éœ€è¦å»é…ç½®äº‹åŠ¡çš„é€šçŸ¥</li></ol><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--ç»“åˆAOPå®ç°äº‹åŠ¡çš„ç»‡å…¥--&gt;</span><span class="hljs-comment">&lt;!--é…ç½®äº‹åŠ¡çš„ç±» é…ç½®äº‹åŠ¡é€šçŸ¥--&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">tx:advice</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;txAdvice&quot;</span> <span class="hljs-attr">transaction-manager</span>=<span class="hljs-string">&quot;transactionManager&quot;</span>&gt;</span>  <span class="hljs-comment">&lt;!--ç»™å“ªäº›æ–¹æ³•é…ç½®äº‹åŠ¡--&gt;</span>  <span class="hljs-comment">&lt;!--é…ç½®äº‹åŠ¡çš„ä¼ æ’­ç‰¹æ€§--&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">tx:attributes</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">tx:method</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;addUser&quot;</span> <span class="hljs-attr">propagation</span>=<span class="hljs-string">&quot;REQUIRED&quot;</span>/&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">tx:method</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;deleteUser&quot;</span> <span class="hljs-attr">propagation</span>=<span class="hljs-string">&quot;REQUIRED&quot;</span>/&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">tx:method</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;selectAllUsers&quot;</span> <span class="hljs-attr">read-only</span>=<span class="hljs-string">&quot;true&quot;</span>/&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">tx:method</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;getUserById&quot;</span> <span class="hljs-attr">propagation</span>=<span class="hljs-string">&quot;REQUIRED&quot;</span>/&gt;</span>  <span class="hljs-tag">&lt;/<span class="hljs-name">tx:attributes</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">tx:advice</span>&gt;</span></code></pre><ol start="3"><li>é…ç½®AOPç»‡å…¥äº‹åŠ¡</li></ol><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--é…ç½®AOPç»‡å…¥äº‹åŠ¡--&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">aop:config</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">aop:pointcut</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;txPointCut&quot;</span> <span class="hljs-attr">expression</span>=<span class="hljs-string">&quot;execution(* com.wen.mapper.*.*(..))&quot;</span>/&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">aop:advisor</span> <span class="hljs-attr">advice-ref</span>=<span class="hljs-string">&quot;txAdvice&quot;</span> <span class="hljs-attr">pointcut-ref</span>=<span class="hljs-string">&quot;txPointCut&quot;</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">aop:config</span>&gt;</span></code></pre><p>å®Œæ•´çš„xmlï¼š</p><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><span class="hljs-tag">       <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/context&quot;</span></span><span class="hljs-tag">       <span class="hljs-attr">xmlns:tx</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/tx&quot;</span></span><span class="hljs-tag">       <span class="hljs-attr">xmlns:aop</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/aop&quot;</span></span><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><span class="hljs-tag"><span class="hljs-string">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span><span class="hljs-tag"><span class="hljs-string">        http://www.springframework.org/schema/context</span></span><span class="hljs-tag"><span class="hljs-string">        https://www.springframework.org/schema/context/spring-context.xsd</span></span><span class="hljs-tag"><span class="hljs-string">        http://www.springframework.org/schema/tx</span></span><span class="hljs-tag"><span class="hljs-string">        https://www.springframework.org/schema/tx/spring-tx.xsd</span></span><span class="hljs-tag"><span class="hljs-string">        http://www.springframework.org/schema/aop</span></span><span class="hljs-tag"><span class="hljs-string">        https://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span>    <span class="hljs-comment">&lt;!-- æŒ‡å®šspringè¯»å–db.propertiesé…ç½® --&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">context:property-placeholder</span> <span class="hljs-attr">location</span>=<span class="hljs-string">&quot;db.properties&quot;</span>/&gt;</span>    <span class="hljs-comment">&lt;!--DataSourceåŸæ¥ä½¿ç”¨çš„æ˜¯mybatisçš„ï¼Œç°åœ¨ä½¿ç”¨Springçš„æ•°æ®æºjdbc--&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;dataSource&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driverClassName&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;driver&#125;&quot;</span>/&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;url&#125;&quot;</span>/&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;name&#125;&quot;</span>/&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;password&#125;&quot;</span>/&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>    <span class="hljs-comment">&lt;!--SqlSessionFactoryBean æ¥åˆ›å»º sqlSessionFactory--&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;sqlSessionFactory&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span>        <span class="hljs-comment">&lt;!--æ³¨å…¥æ•°æ®æºä½ --&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;dataSource&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;dataSource&quot;</span>/&gt;</span>        <span class="hljs-comment">&lt;!--ç»‘å®šmybatisé…ç½®æ–‡ä»¶ è¿™æ ·å¯ä»¥åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­å†™mybatis-config.xmlçš„ç›¸å…³é…ç½® å¦‚ä¸‹é¢åŒ…çš„æ‰«æ--&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;configLocation&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;classpath:mybatis-config.xml&quot;</span>/&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;mapperLocations&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;classpath:com/wen/mapper/*.xml&quot;</span>/&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>    <span class="hljs-comment">&lt;!--SqlSessionTemplate æ˜¯ MyBatis-Spring çš„æ ¸å¿ƒã€‚</span><span class="hljs-comment">    ä½œä¸º SqlSession çš„ä¸€ä¸ªå®ç°ï¼Œè¿™æ„å‘³ç€å¯ä»¥ä½¿ç”¨å®ƒæ— ç¼ä»£æ›¿ä½ ä»£ç ä¸­å·²ç»åœ¨ä½¿ç”¨çš„ SqlSessionã€‚--&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;sqlSession&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.mybatis.spring.SqlSessionTemplate&quot;</span>&gt;</span>        <span class="hljs-comment">&lt;!--å› ä¸ºSqlSessionTemplateæ²¡æœ‰setæ–¹æ³•ï¼Œåªèƒ½ä½¿ç”¨æ„é€ å™¨è¿›è¡Œæ³¨å…¥--&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;sqlSessionFactory&quot;</span> <span class="hljs-attr">index</span>=<span class="hljs-string">&quot;0&quot;</span>/&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>    <span class="hljs-comment">&lt;!--é…ç½®å£°æ˜å¼äº‹åŠ¡--&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;transactionManager&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;dataSource&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;dataSource&quot;</span>/&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>    <span class="hljs-comment">&lt;!--ç»“åˆAOPå®ç°äº‹åŠ¡çš„ç»‡å…¥--&gt;</span>    <span class="hljs-comment">&lt;!--é…ç½®äº‹åŠ¡çš„ç±» é…ç½®äº‹åŠ¡é€šçŸ¥--&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">tx:advice</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;txAdvice&quot;</span> <span class="hljs-attr">transaction-manager</span>=<span class="hljs-string">&quot;transactionManager&quot;</span>&gt;</span>        <span class="hljs-comment">&lt;!--ç»™å“ªäº›æ–¹æ³•é…ç½®äº‹åŠ¡--&gt;</span>        <span class="hljs-comment">&lt;!--é…ç½®äº‹åŠ¡çš„ä¼ æ’­ç‰¹æ€§--&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">tx:attributes</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">tx:method</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;addUser&quot;</span> <span class="hljs-attr">propagation</span>=<span class="hljs-string">&quot;REQUIRED&quot;</span>/&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">tx:method</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;deleteUser&quot;</span> <span class="hljs-attr">propagation</span>=<span class="hljs-string">&quot;REQUIRED&quot;</span>/&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">tx:method</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;selectAllUsers&quot;</span> <span class="hljs-attr">read-only</span>=<span class="hljs-string">&quot;true&quot;</span>/&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">tx:method</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;getUserById&quot;</span> <span class="hljs-attr">propagation</span>=<span class="hljs-string">&quot;REQUIRED&quot;</span>/&gt;</span>        <span class="hljs-tag">&lt;/<span class="hljs-name">tx:attributes</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">tx:advice</span>&gt;</span>    <span class="hljs-comment">&lt;!--é…ç½®AOPç»‡å…¥äº‹åŠ¡--&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">aop:config</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">aop:pointcut</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;txPointCut&quot;</span> <span class="hljs-attr">expression</span>=<span class="hljs-string">&quot;execution(* com.wen.mapper.*.*(..))&quot;</span>/&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">aop:advisor</span> <span class="hljs-attr">advice-ref</span>=<span class="hljs-string">&quot;txAdvice&quot;</span> <span class="hljs-attr">pointcut-ref</span>=<span class="hljs-string">&quot;txPointCut&quot;</span>/&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">aop:config</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span></code></pre><ol start="5"><li>ä»ç„¶deleteè¯­å¥å†™é”™ï¼Œè¿›è¡Œæµ‹è¯•ï¼</li></ol><p>ç»“æœï¼šç›´æ¥æŠ¥é”™ï¼Œæ·»åŠ æ“ä½œä¹Ÿæ²¡æœ‰æˆåŠŸï¼</p><p><strong>æ€è€ƒï¼š</strong></p><p>ä¸ºä»€ä¹ˆéœ€è¦äº‹åŠ¡ï¼Ÿ</p><ol><li>å¦‚æœä¸é…ç½®äº‹åŠ¡ï¼Œå¯èƒ½å­˜åœ¨æ•°æ®æäº¤ä¸ä¸€è‡´çš„æƒ…å†µï¼›</li><li>å¦‚æœæˆ‘ä»¬ä¸åœ¨Springä¸­å»é…ç½®å£°æ˜å¼äº‹åŠ¡ï¼Œæˆ‘ä»¬å°±éœ€è¦åœ¨ä»£ç ä¸­æ‰‹åŠ¨é…ç½®äº‹åŠ¡ï¼</li><li>äº‹åŠ¡åœ¨é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­éå¸¸é‡è¦ï¼Œæ¶‰åŠåˆ°æ•°æ®çš„ä¸€è‡´æ€§çš„é—®é¢˜ï¼Œä¸å®¹é©¬è™ï¼</li></ol>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>MyBatis</title>
    <link href="/2020/11/27/MyBatis/"/>
    <url>/2020/11/27/MyBatis/</url>
    
    <content type="html"><![CDATA[<p>ç¯å¢ƒï¼š</p><ul><li>JDK 1.8</li><li>MySQL 8.0</li><li>maven  3.6.1</li><li>IDEA</li></ul><p>å›é¡¾ï¼š</p><ul><li>JDBC</li><li>MySQL</li><li>Java åŸºç¡€</li><li>Maven</li><li>Junit  å•å…ƒæµ‹è¯•</li></ul><p>æ¡†æ¶ï¼šé…ç½®æ–‡ä»¶çš„ï¼Œæœ€å¥½çš„æ–¹å¼ï¼šçœ‹å®˜ç½‘æ–‡æ¡£</p><ul><li>SSM  Mybatis: <a href="https://mybatis.org/mybatis-3/zh/index.html">https://mybatis.org/mybatis-3/zh/index.html</a></li></ul><p>è¡¥å……ä»¥ä¸‹ï¼šIDEAå¿«æ·é”®è¡¥å……è¿”å›å€¼å’Œè¿”å›ç±»å‹ï¼šctrl+alt+v</p><h2 id="1-ç®€ä»‹"><a href="#1-ç®€ä»‹" class="headerlink" title="1. ç®€ä»‹"></a><strong>1. ç®€ä»‹</strong></h2><h3 id="1-1-ä»€ä¹ˆæ˜¯Mybatis"><a href="#1-1-ä»€ä¹ˆæ˜¯Mybatis" class="headerlink" title="1.1 ä»€ä¹ˆæ˜¯Mybatis"></a><strong>1.1 ä»€ä¹ˆæ˜¯Mybatis</strong></h3><p><img src="/images/MyBatis/clipboard.png" alt="clipboard"></p><p>MyBatis æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„<strong>æŒä¹…å±‚æ¡†æ¶</strong>ï¼Œå®ƒæ”¯æŒè‡ªå®šä¹‰ SQLã€å­˜å‚¨è¿‡ç¨‹ä»¥åŠé«˜çº§æ˜ å°„ã€‚MyBatis å…é™¤äº†å‡ ä¹æ‰€æœ‰çš„ JDBC ä»£ç ä»¥åŠè®¾ç½®å‚æ•°å’Œè·å–ç»“æœé›†çš„å·¥ä½œã€‚MyBatis å¯ä»¥é€šè¿‡ç®€å•çš„ XML æˆ–æ³¨è§£æ¥é…ç½®å’Œæ˜ å°„åŸå§‹ç±»å‹ã€æ¥å£å’Œ Java POJOï¼ˆPlain Old Java Objectsï¼Œæ™®é€šè€å¼ Java å¯¹è±¡ï¼‰ä¸ºæ•°æ®åº“ä¸­çš„è®°å½•ã€‚</p><p>MyBatis æœ¬æ˜¯apacheçš„ä¸€ä¸ª<a href="https://baike.baidu.com/item/%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE/3406069">å¼€æºé¡¹ç›®</a>iBatis, 2010å¹´è¿™ä¸ª<a href="https://baike.baidu.com/item/%E9%A1%B9%E7%9B%AE/477803">é¡¹ç›®</a>ç”±apache software foundation è¿ç§»åˆ°äº†[google code](<a href="https://baike.baidu.com/item/google">https://baike.baidu.com/item/google</a> code/2346604)ï¼Œå¹¶ä¸”æ”¹åä¸ºMyBatis ã€‚2013å¹´11æœˆè¿ç§»åˆ°<a href="https://baike.baidu.com/item/Github/10145341">Github</a>ã€‚</p><p>iBATISä¸€è¯æ¥æºäºâ€œinternetâ€å’Œâ€œabatisâ€çš„ç»„åˆï¼Œæ˜¯ä¸€ä¸ªåŸºäºJavaçš„<a href="https://baike.baidu.com/item/%E6%8C%81%E4%B9%85%E5%B1%82/3584971">æŒä¹…å±‚</a>æ¡†æ¶ã€‚iBATISæä¾›çš„æŒä¹…å±‚æ¡†æ¶åŒ…æ‹¬SQL Mapså’ŒData Access Objectsï¼ˆDAOsï¼‰</p><p>å½“å‰ï¼Œæœ€æ–°ç‰ˆæœ¬æ˜¯MyBatis 3.5.6ã€‚</p><p><strong>å¦‚ä½•è·å¾—Mybatis?</strong></p><ul><li>Github ï¼šä¸‹è½½åœ°å€ï¼š<a href="https://github.com/mybatis/mybatis-3/releases/tag/mybatis-3.5.6">https://github.com/mybatis/mybatis-3/releases/tag/mybatis-3.5.6</a></li><li>ä¸­æ–‡æ–‡æ¡£ï¼š<a href="https://mybatis.org/mybatis-3/zh/index.html">https://mybatis.org/mybatis-3/zh/index.html</a></li><li>Mavenä»“åº“</li></ul><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis --&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.6<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre><h3 id="1-2-æŒä¹…åŒ–"><a href="#1-2-æŒä¹…åŒ–" class="headerlink" title="1.2 æŒä¹…åŒ–"></a><strong>1.2 æŒä¹…åŒ–</strong></h3><p>æ•°æ®æŒä¹…åŒ–</p><ul><li>æŒä¹…åŒ–å°±æ˜¯å°†ç¨‹åºçš„æ•°æ®åœ¨æŒä¹…çŠ¶æ€å’Œç¬æ—¶çŠ¶æ€è½¬åŒ–çš„è¿‡ç¨‹.</li><li>å†…å­˜:<strong>æ–­ç”µå³å¤±</strong></li><li>æ•°æ®åº“(jdbc),  ioæ–‡ä»¶æŒä¹…åŒ–</li><li>ç”Ÿæ´»:å†·è—, ç½å¤´</li></ul><p><strong>ä¸ºä»€ä¹ˆéœ€è¦æŒä¹…åŒ–?</strong></p><ul><li>æœ‰ä¸€äº›å¯¹è±¡ä¸èƒ½ä¸¢å¤±</li><li>å†…å­˜ä»·æ ¼é«˜</li></ul><h3 id="1-3-æŒä¹…å±‚"><a href="#1-3-æŒä¹…å±‚" class="headerlink" title="1.3 æŒä¹…å±‚"></a><strong>1.3 æŒä¹…å±‚</strong></h3><p>Daoå±‚  Serviceå±‚ Controllerå±‚</p><ul><li>å®ŒæˆæŒä¹…åŒ–å·¥ä½œçš„ä»£ç å—</li><li>å±‚ç•Œé™ååˆ†æ˜æ˜¾</li></ul><h3 id="1-4-ä¸ºä»€ä¹ˆéœ€è¦Mybatis"><a href="#1-4-ä¸ºä»€ä¹ˆéœ€è¦Mybatis" class="headerlink" title="1.4 ä¸ºä»€ä¹ˆéœ€è¦Mybatis?"></a><strong>1.4 ä¸ºä»€ä¹ˆéœ€è¦Mybatis?</strong></h3><ul><li>å¸®åŠ©ç¨‹åºå‘˜å°†æ•°æ®å­˜å…¥åˆ°æ•°æ®åº“ä¸­ã€‚</li><li>æ–¹ä¾¿</li><li>ä¼ ç»Ÿçš„JDBCè¿‡äºå¤æ‚ã€‚ç®€åŒ–ã€‚æ¡†æ¶ã€‚è‡ªåŠ¨åŒ–ã€‚</li><li>ä¸ç”¨MyBatisä¹Ÿå¯ä»¥ã€‚æ›´å®¹æ˜“ä¸Šæ‰‹ã€‚<strong>æŠ€æœ¯æ²¡æœ‰é«˜ä½ä¹‹åˆ†ï¼Œåªæœ‰ä½¿ç”¨çš„äºº</strong></li><li>æœ¬èº«å°å·§ï¼Œæ²¡æœ‰ç¬¬ä¸‰æ–¹ä¾èµ–ã€‚</li><li>çµæ´»ï¼šsqlå†™åœ¨xmlä¸­</li><li>æ¥è§¦sqlä¸ç¨‹åºä»£ç çš„è€¦åˆï¼šé€šè¿‡æä¾›DAOå±‚ï¼Œå°†ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®è®¿é—®é€»è¾‘åˆ†ç¦»ï¼Œä½¿ç³»ç»Ÿçš„è®¾è®¡æ›´åŠ æ¸…æ™°ï¼Œæ›´æ˜“ç»´æŠ¤ï¼Œæ›´æ˜“å•å…ƒæµ‹è¯•ã€‚<strong>sqlå’Œä»£ç çš„åˆ†ç¦»ï¼Œæé«˜äº†å¯ç»´æŠ¤æ€§ã€‚</strong></li><li>æä¾›æ˜ å°„æ ‡ç­¾ï¼Œæ”¯æŒå¯¹è±¡ä¸æ•°æ®åº“çš„ormå­—æ®µå…³ç³»æ˜ å°„</li><li>æä¾›å¯¹è±¡å…³ç³»æ˜ å°„æ ‡ç­¾ï¼Œæ”¯æŒå¯¹è±¡å…³ç³»ç»„å»ºç»´æŠ¤</li><li>æä¾›xmlæ ‡ç­¾ï¼Œæ”¯æŒç¼–å†™åŠ¨æ€sqlã€‚</li></ul><p><strong>æœ€é‡è¦çš„ä¸€ç‚¹ï¼šä½¿ç”¨çš„äººå¾ˆå¤šï¼</strong></p><h2 id="2-ç¬¬ä¸€ä¸ªMyBatisç¨‹åº"><a href="#2-ç¬¬ä¸€ä¸ªMyBatisç¨‹åº" class="headerlink" title="2. ç¬¬ä¸€ä¸ªMyBatisç¨‹åº"></a>2. ç¬¬ä¸€ä¸ªMyBatisç¨‹åº</h2><p>æ€è·¯ï¼šæ­å»ºç¯å¢ƒ-&gt;å¯¼å…¥Mybatis-&gt;ç¼–å†™ä»£ç -&gt;æµ‹è¯•ï¼</p><p>MyBatisUtilså®ä½“ç±»-&gt;mybatis-config.xml-&gt;Userå®ä½“ç±»-&gt;UserMapperæ¥å£-&gt;UserMapper.xml-&gt;UserMapperTestæµ‹è¯•ç±»</p><p><strong>å‰ä¸¤ä¸ªæ–‡ä»¶ä¸€èˆ¬ä¸éœ€è¦ä¿®æ”¹ï¼Œç›´æ¥ä½¿ç”¨ï¼</strong></p><h3 id="2-1-æ­å»ºç¯å¢ƒ"><a href="#2-1-æ­å»ºç¯å¢ƒ" class="headerlink" title="2.1 æ­å»ºç¯å¢ƒ"></a>2.1 æ­å»ºç¯å¢ƒ</h3><img src="/images/MyBatis/image-20201112093037981.png" alt="image-20201112093037981" style="zoom:50%;" /><p>æ–°å»ºé¡¹ç›®</p><ol><li>æ–°å»ºä¸€ä¸ªæ™®é€šçš„mavené¡¹ç›®</li><li>åˆ é™¤srcç›®å½•ï¼Œå˜æˆçˆ¶å·¥ç¨‹</li><li>å¯¼å…¥ä¾èµ–  è‡³å°‘ä¸¤ä¸ªï¼šmybatis  mysqlé©±åŠ¨ junit</li></ol><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><span class="hljs-comment">&lt;!--mybatis--&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.6<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><span class="hljs-comment">&lt;!--mysqlé©±åŠ¨--&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>8.0.15<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><span class="hljs-comment">&lt;!--junit--&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.12<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span></code></pre><h3 id="2-2-åˆ›å»ºä¸€ä¸ªæ¨¡å—"><a href="#2-2-åˆ›å»ºä¸€ä¸ªæ¨¡å—" class="headerlink" title="2.2 åˆ›å»ºä¸€ä¸ªæ¨¡å—"></a>2.2 åˆ›å»ºä¸€ä¸ªæ¨¡å—</h3><img src="/images/MyBatis/image-20201112094756244.png" alt="image-20201112094756244" style="zoom:50%;" /><img src="/images/MyBatis/image-20201112094817132.png" alt="image-20201112094817132" style="zoom:50%;" /><img src="/images/MyBatis/image-20201112095020393.png" alt="image-20201112095020393" style="zoom:50%;" /><p>è¿™æ ·å°±åŸºäºmybatisåˆ›å»ºäº†ä¸€ä¸ªå­é¡¹ç›®</p><img src="/images/MyBatis/image-20201112095058221.png" alt="image-20201112095058221" style="zoom:50%;" /><p>å¥½å¤„æ˜¯ï¼šä¸ç”¨å†é‡æ–°å¯¼å…¥ä¾èµ–åŒ…äº†</p><img src="/images/MyBatis/image-20201112095130914.png" alt="image-20201112095130914" style="zoom:50%;" /><img src="/images/MyBatis/image-20201112095146896.png" alt="image-20201112095146896" style="zoom:50%;" /><ul><li>ç¼–å†™mybatisçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼ˆå®˜ç½‘ä¸Šæœ‰ï¼‰</li></ul><img src="/images/MyBatis/image-20201112100703771.png" alt="image-20201112100703771" style="zoom:50%;" /><p>ç¼–å†™mybatis-config.xml</p><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">configuration</span></span><span class="hljs-meta">        <span class="hljs-meta-keyword">PUBLIC</span> <span class="hljs-meta-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span><span class="hljs-meta">        <span class="hljs-meta-string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span><span class="hljs-comment">&lt;!--æ ¸å¿ƒé…ç½®æ–‡ä»¶--&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">environments</span> <span class="hljs-attr">default</span>=<span class="hljs-string">&quot;development&quot;</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">environment</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;development&quot;</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">transactionManager</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;JDBC&quot;</span>/&gt;</span><span class="hljs-comment">&lt;!--äº‹åŠ¡ç®¡ç†--&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">dataSource</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;POOLED&quot;</span>&gt;</span><span class="hljs-comment">&lt;!--æ•°æ®åº“ç›¸å…³--&gt;</span>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driver&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;jdbc:mysql://localhost:3306/mybatis?characterEncoding=utf8<span class="hljs-symbol">&amp;amp;</span>useSSL=false<span class="hljs-symbol">&amp;amp;</span>serverTimezone=UTC<span class="hljs-symbol">&amp;amp;</span>rewriteBatchedStatements=true&quot;</span>/&gt;</span>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;root&quot;</span>/&gt;</span>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;645645aa&quot;</span>/&gt;</span>            <span class="hljs-tag">&lt;/<span class="hljs-name">dataSource</span>&gt;</span>        <span class="hljs-tag">&lt;/<span class="hljs-name">environment</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">environments</span>&gt;</span>    <span class="hljs-comment">&lt;!--æ¯ä¸€ä¸ªMapper.xmléƒ½éœ€è¦åœ¨mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ³¨å†Œ--&gt;</span><span class="hljs-comment">&lt;!--    Type interface com.wen.dao.UserMapper id not known to the MapperRegistry.--&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">mappers</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;com/wen/dao/UserMapper.xml&quot;</span>/&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">mappers</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span></code></pre><p>æ¯ä¸ªåŸºäº <strong>MyBatis</strong> çš„åº”ç”¨éƒ½æ˜¯ä»¥ä¸€ä¸ª <strong>SqlSessionFactory</strong> çš„å®ä¾‹ä¸ºæ ¸å¿ƒçš„ã€‚<strong>SqlSessionFactory</strong> çš„å®ä¾‹å¯ä»¥é€šè¿‡ <strong>SqlSessionFactoryBuilder</strong> è·å¾—ã€‚è€Œ SqlSessionFactoryBuilder åˆ™å¯ä»¥ä» XML é…ç½®æ–‡ä»¶æˆ–ä¸€ä¸ªé¢„å…ˆé…ç½®çš„ Configuration å®ä¾‹æ¥æ„å»ºå‡º SqlSessionFactory å®ä¾‹ã€‚</p><p>(å…¶å®å°±æ˜¯ä¸Šé¢çš„ç¼–å†™mybatis-config.xmlæ–‡ä»¶)</p><p>ä» XML æ–‡ä»¶ä¸­æ„å»º SqlSessionFactory çš„å®ä¾‹éå¸¸ç®€å•ï¼Œå»ºè®®ä½¿ç”¨ç±»è·¯å¾„ä¸‹çš„èµ„æºæ–‡ä»¶è¿›è¡Œé…ç½®ã€‚ ä½†ä¹Ÿå¯ä»¥ä½¿ç”¨ä»»æ„çš„è¾“å…¥æµï¼ˆInputStreamï¼‰å®ä¾‹ï¼Œæ¯”å¦‚ç”¨æ–‡ä»¶è·¯å¾„å­—ç¬¦ä¸²æˆ– file:// URL æ„é€ çš„è¾“å…¥æµã€‚MyBatis åŒ…å«ä¸€ä¸ªåå« Resources çš„å·¥å…·ç±»ï¼Œå®ƒåŒ…å«ä¸€äº›å®ç”¨æ–¹æ³•ï¼Œä½¿å¾—ä»ç±»è·¯å¾„æˆ–å…¶å®ƒä½ç½®åŠ è½½èµ„æºæ–‡ä»¶æ›´åŠ å®¹æ˜“ã€‚</p><p><strong>å®˜æ–¹æ–‡æ¡£ï¼š</strong></p><pre><code class="hljs java">String resource = <span class="hljs-string">&quot;org/mybatis/example/mybatis-config.xml&quot;</span>;InputStream inputStream = Resources.getResourceAsStream(resource);SqlSessionFactory sqlSessionFactory = <span class="hljs-keyword">new</span> SqlSessionFactoryBuilder().build(inputStream);</code></pre><ul><li>ç¼–å†™mybatiså·¥å…·ç±»</li></ul><img src="/images/MyBatis/image-20201112103239319.png" alt="image-20201112103239319" style="zoom:50%;" /><pre><code class="hljs java"><span class="hljs-comment">//SqlSessionFactory  SqlSession</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MybatisUtils</span> </span>&#123;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> SqlSessionFactory sqlSessionFactory;    <span class="hljs-keyword">static</span> &#123;        <span class="hljs-keyword">try</span> &#123;            <span class="hljs-comment">//ä½¿ç”¨mybatisç¬¬ä¸€æ­¥:è·å–SqlSessionFactoryå¯¹è±¡</span>            String resource = <span class="hljs-string">&quot;mybatis-config.xml&quot;</span>;            InputStream inputStream = Resources.getResourceAsStream(resource);            sqlSessionFactory = <span class="hljs-keyword">new</span> SqlSessionFactoryBuilder().build(inputStream);        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;            e.printStackTrace();        &#125;    &#125;    <span class="hljs-comment">//æ—¢ç„¶æœ‰äº† SqlSessionFactoryï¼Œé¡¾åæ€ä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥ä»ä¸­è·å¾— SqlSession çš„å®ä¾‹ã€‚</span>    <span class="hljs-comment">// SqlSession æä¾›äº†åœ¨æ•°æ®åº“æ‰§è¡Œ SQL å‘½ä»¤æ‰€éœ€çš„æ‰€æœ‰æ–¹æ³•ã€‚</span>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SqlSession <span class="hljs-title">getSqlSession</span><span class="hljs-params">()</span></span>&#123;        SqlSession sqlSession = sqlSessionFactory.openSession();        <span class="hljs-keyword">return</span> sqlSession;    &#125;&#125;</code></pre><h3 id="2-3-ç¼–å†™ä»£ç "><a href="#2-3-ç¼–å†™ä»£ç " class="headerlink" title="2.3 ç¼–å†™ä»£ç "></a>2.3 ç¼–å†™ä»£ç </h3><ul><li>å®ä½“ç±»</li></ul><img src="/images/MyBatis/image-20201112103707857.png" alt="image-20201112103707857" style="zoom:50%;" /><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>&#123;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> id;    <span class="hljs-keyword">private</span> String name;    <span class="hljs-keyword">private</span> String pwd;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">User</span><span class="hljs-params">()</span> </span>&#123;    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">User</span><span class="hljs-params">(<span class="hljs-keyword">int</span> id, String name, String pwd)</span> </span>&#123;        <span class="hljs-keyword">this</span>.id = id;        <span class="hljs-keyword">this</span>.name = name;        <span class="hljs-keyword">this</span>.pwd = pwd;    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getId</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-keyword">return</span> id;    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setId</span><span class="hljs-params">(<span class="hljs-keyword">int</span> id)</span> </span>&#123;        <span class="hljs-keyword">this</span>.id = id;    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getName</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-keyword">return</span> name;    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setName</span><span class="hljs-params">(String name)</span> </span>&#123;        <span class="hljs-keyword">this</span>.name = name;    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getPwd</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-keyword">return</span> pwd;    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setPwd</span><span class="hljs-params">(String pwd)</span> </span>&#123;        <span class="hljs-keyword">this</span>.pwd = pwd;    &#125;&#125;</code></pre><ul><li>Daoæ¥å£(åæœŸæ”¹æˆMapper)</li></ul><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">UserDao</span></span>&#123;    <span class="hljs-function">List&lt;User&gt; <span class="hljs-title">getUserList</span><span class="hljs-params">()</span></span>;&#125;</code></pre><ul><li>æ¥å£å®ç°ç±» UserMapper.xml</li></ul><p>ç”±åŸæ¥çš„UserDapImplè½¬å˜æˆä¸€ä¸ªMapperé…ç½®æ–‡ä»¶</p><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">mapper</span></span><span class="hljs-meta">        <span class="hljs-meta-keyword">PUBLIC</span> <span class="hljs-meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><span class="hljs-meta">        <span class="hljs-meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><span class="hljs-comment">&lt;!--çœå»äº†ä»¥å¾€çš„UserDaoImpl çœå»äº†è¿æ¥æ•°æ®åº“çš„ä¸€äº›è¯­å¥--&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.wen.dao.UserDao&quot;</span>&gt;</span><span class="hljs-comment">&lt;!--å‘½åç©ºé—´ ç»‘å®šä¸€ä¸ªæŒ‡å®šçš„Mapperæ¥å£--&gt;</span><span class="hljs-comment">&lt;!--    æŸ¥è¯¢è¯­å¥ id å¯¹åº”æ–¹æ³•åå­—--&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getUserList&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;com.wen.pojo.User&quot;</span>&gt;</span>        select * from mybatis.user    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span></code></pre><p>è¯­å¥ä¸­çš„è¿”å›ç±»å‹ä¸€èˆ¬æœ‰ä¸¤ç§resultTypeå’ŒresultMapï¼Œæœ€å¸¸ç”¨çš„æ˜¯resultType</p><h3 id="2-4-æµ‹è¯•ï¼ˆå¸¸è§é—®é¢˜è§£å†³æ–¹æ³•ï¼‰"><a href="#2-4-æµ‹è¯•ï¼ˆå¸¸è§é—®é¢˜è§£å†³æ–¹æ³•ï¼‰" class="headerlink" title="2.4 æµ‹è¯•ï¼ˆå¸¸è§é—®é¢˜è§£å†³æ–¹æ³•ï¼‰"></a>2.4 æµ‹è¯•ï¼ˆå¸¸è§é—®é¢˜è§£å†³æ–¹æ³•ï¼‰</h3><p>æ³¨æ„ç‚¹ï¼š</p><p>==Type interface com.wen.dao.UserMapper id not known to the <strong>MapperRegistry</strong>.==</p><p><strong>MapperRegistryï¼š</strong>æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ³¨å†Œmappers</p><img src="/images/MyBatis/image-20201112110245072.png" alt="image-20201112110245072" style="zoom:50%;" /><p>==java.io.IOException: Could not find resource org/mybatis/example/mybatis-config.xml==</p><img src="/images/MyBatis/image-20201112110638999.png" alt="image-20201112110638999" style="zoom:50%;" /><p>javaä¸‹çš„UserMapper.xmlæ²¡æœ‰ç”Ÿæ•ˆã€‚mavené»˜è®¤ä¼šå¯åŠ¨resourcesä¸‹çš„æ‰€æœ‰é…ç½®æ–‡ä»¶ï¼Œjavaä¸‹çš„xmlæ–‡ä»¶ä¸ä¼šå¯åŠ¨ç”Ÿæ•ˆã€‚</p><p><strong>åŸå› ï¼š</strong>ç”±äºmavençº¦å®šå¤§äºé…ç½®ï¼Œæˆ‘ä»¬ä¼šé‡åˆ°æˆ‘ä»¬å†™çš„é…ç½®æ–‡ä»¶ï¼Œæ— æ³•è¢«å¯¼å‡ºæˆ–è€…ç”Ÿæ•ˆçš„é—®é¢˜ï¼Œè§£å†³æ–¹æ¡ˆï¼š==ï¼ˆå»ºè®®åªè¦åˆ›å»ºMavené¡¹ç›®å°±å†™å…¥ï¼‰==</p><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--åœ¨buildä¸­é…ç½®resources, æ¥é˜²æ­¢æˆ‘ä»¬èµ„æºå¯¼å‡ºå¤±è´¥çš„é—®é¢˜--&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">resources</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span>                <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/main/java<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span>                <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span>                    <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.yml<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>                    <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.properties<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>                    <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.xml<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>                <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span>                <span class="hljs-tag">&lt;<span class="hljs-name">filtering</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">filtering</span>&gt;</span>            <span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span>                <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/main/resources<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span>                <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span>                    <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.yml<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>                    <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.properties<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>                    <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.xml<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>                <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span>                <span class="hljs-tag">&lt;<span class="hljs-name">filtering</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">filtering</span>&gt;</span>            <span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span>        <span class="hljs-tag">&lt;/<span class="hljs-name">resources</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span></code></pre><p>æ”¾åœ¨çˆ¶å·¥ç¨‹ä¸­æœ‰å¯èƒ½ä¸ç”Ÿæ•ˆï¼Œæœ€å¥½å­å·¥ç¨‹ä¸­ä¹Ÿæ”¾ä¸€ä»½ã€‚</p><ul><li>junit</li></ul><img src="/images/MyBatis/image-20201112122154868.png" alt="image-20201112122154868" style="zoom:50%;" /><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserDaoTest</span> </span>&#123;    <span class="hljs-meta">@Test</span>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span></span>&#123;        <span class="hljs-comment">//1. è·å–SqlSessionå¯¹è±¡</span>        SqlSession sqlSession = MybatisUtils.getSqlSession();        <span class="hljs-comment">//2. æ‰§è¡Œ</span>        <span class="hljs-comment">//æ–¹å¼ä¸€ï¼šgetMapper</span>        UserMapper userMapper = sqlSession.getMapper(UserMapper.class);        List&lt;User&gt; userList = userMapper.getUserList();        <span class="hljs-keyword">for</span> (User user : userList) &#123;            System.out.println(user.getName());        &#125;        <span class="hljs-comment">//å…³é—­sqlSession</span>        sqlSession.close();    &#125;&#125;</code></pre><p>å¯èƒ½ä¼šæŠ¥å¦‚ä¸‹çš„é”™è¯¯ï¼š</p><p>==Cause: com.sun.org.apache.xerces.internal.impl.io.MalformedByteSeque==</p><p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span></code></pre><img src="/images/MyBatis/image-20201112122437880.png" alt="image-20201112122437880" style="zoom:50%;" /><p>æµ‹è¯•æˆåŠŸï¼š</p><img src="/images/MyBatis/image-20201112122642943.png" alt="image-20201112122642943" style="zoom:50%;" /><p><strong>å¯èƒ½é‡è§çš„é—®é¢˜ï¼š</strong></p><ul><li>é…ç½®æ–‡ä»¶æ²¡æœ‰æ³¨å†Œ</li><li>ç»‘å®šæ¥å£ä¸å¯¹ï¼šå…¨é™å®šå</li><li>æ–¹æ³•åä¸å¯¹</li><li>è¿”å›ç±»å‹ä¸å¯¹</li><li>Mavenå¯¼å‡ºèµ„æºé—®é¢˜</li></ul><h3 id="2-5-å¯¹å‘½åç©ºé—´çš„ä¸€ç‚¹è¡¥å……"><a href="#2-5-å¯¹å‘½åç©ºé—´çš„ä¸€ç‚¹è¡¥å……" class="headerlink" title="2.5  å¯¹å‘½åç©ºé—´çš„ä¸€ç‚¹è¡¥å……"></a>2.5  <strong>å¯¹å‘½åç©ºé—´çš„ä¸€ç‚¹è¡¥å……</strong></h3><p>åœ¨ä¹‹å‰ç‰ˆæœ¬çš„ MyBatis ä¸­ï¼Œ<strong>å‘½åç©ºé—´ï¼ˆNamespacesï¼‰</strong>çš„ä½œç”¨å¹¶ä¸å¤§ï¼Œæ˜¯å¯é€‰çš„ã€‚ ä½†ç°åœ¨ï¼Œéšç€å‘½åç©ºé—´è¶Šå‘é‡è¦ï¼Œä½ å¿…é¡»æŒ‡å®šå‘½åç©ºé—´ã€‚</p><p>å‘½åç©ºé—´çš„ä½œç”¨æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯åˆ©ç”¨æ›´é•¿çš„å…¨é™å®šåæ¥å°†ä¸åŒçš„è¯­å¥éš”ç¦»å¼€æ¥ï¼ŒåŒæ—¶ä¹Ÿå®ç°äº†ä½ ä¸Šé¢è§åˆ°çš„æ¥å£ç»‘å®šã€‚å°±ç®—ä½ è§‰å¾—æš‚æ—¶ç”¨ä¸åˆ°æ¥å£ç»‘å®šï¼Œä½ ä¹Ÿåº”è¯¥éµå¾ªè¿™é‡Œçš„è§„å®šï¼Œä»¥é˜²å“ªå¤©ä½ æ”¹å˜äº†ä¸»æ„ã€‚ é•¿è¿œæ¥çœ‹ï¼Œåªè¦å°†å‘½åç©ºé—´ç½®äºåˆé€‚çš„ Java åŒ…å‘½åç©ºé—´ä¹‹ä¸­ï¼Œä½ çš„ä»£ç ä¼šå˜å¾—æ›´åŠ æ•´æ´ï¼Œä¹Ÿæœ‰åˆ©äºä½ æ›´æ–¹ä¾¿åœ°ä½¿ç”¨ MyBatisã€‚</p><p><strong>å‘½åè§£æï¼š</strong>ä¸ºäº†å‡å°‘è¾“å…¥é‡ï¼ŒMyBatis å¯¹æ‰€æœ‰å…·æœ‰åç§°çš„é…ç½®å…ƒç´ ï¼ˆåŒ…æ‹¬è¯­å¥ï¼Œç»“æœæ˜ å°„ï¼Œç¼“å­˜ç­‰ï¼‰ä½¿ç”¨äº†å¦‚ä¸‹çš„å‘½åè§£æè§„åˆ™ã€‚</p><ul><li>å…¨é™å®šåï¼ˆæ¯”å¦‚ â€œcom.mypackage.MyMapper.selectAllThingsï¼‰å°†è¢«ç›´æ¥ç”¨äºæŸ¥æ‰¾åŠä½¿ç”¨ã€‚</li><li>çŸ­åç§°ï¼ˆæ¯”å¦‚ â€œselectAllThingsâ€ï¼‰å¦‚æœå…¨å±€å”¯ä¸€ä¹Ÿå¯ä»¥ä½œä¸ºä¸€ä¸ªå•ç‹¬çš„å¼•ç”¨ã€‚ å¦‚æœä¸å”¯ä¸€ï¼Œæœ‰ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„ç›¸åŒåç§°ï¼ˆæ¯”å¦‚ â€œcom.foo.selectAllThingsâ€ å’Œ â€œcom.bar.selectAllThingsâ€ï¼‰ï¼Œé‚£ä¹ˆä½¿ç”¨æ—¶å°±ä¼šäº§ç”Ÿâ€œçŸ­åç§°ä¸å”¯ä¸€â€çš„é”™è¯¯ï¼Œè¿™ç§æƒ…å†µä¸‹å°±å¿…é¡»ä½¿ç”¨å…¨é™å®šåã€‚</li></ul><h3 id="2-6-ä½œç”¨åŸŸï¼ˆScopeï¼‰å’Œç”Ÿå‘½å‘¨æœŸ"><a href="#2-6-ä½œç”¨åŸŸï¼ˆScopeï¼‰å’Œç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="2.6 ä½œç”¨åŸŸï¼ˆScopeï¼‰å’Œç”Ÿå‘½å‘¨æœŸ"></a>2.6 ä½œç”¨åŸŸï¼ˆScopeï¼‰å’Œç”Ÿå‘½å‘¨æœŸ</h3><h4 id="1-SqlSessionFactoryBuilder"><a href="#1-SqlSessionFactoryBuilder" class="headerlink" title="(1) SqlSessionFactoryBuilder"></a>(1) SqlSessionFactoryBuilder</h4><p>è¿™ä¸ªç±»å¯ä»¥è¢«å®ä¾‹åŒ–ã€ä½¿ç”¨å’Œä¸¢å¼ƒï¼Œ<u><strong>ä¸€æ—¦åˆ›å»ºäº† SqlSessionFactoryï¼Œå°±ä¸å†éœ€è¦å®ƒäº†</u>ã€‚</strong> å› æ­¤ SqlSessionFactoryBuilder å®ä¾‹çš„æœ€ä½³ä½œç”¨åŸŸæ˜¯æ–¹æ³•ä½œç”¨åŸŸï¼ˆä¹Ÿå°±æ˜¯å±€éƒ¨æ–¹æ³•å˜é‡ï¼‰ã€‚ ä½ å¯ä»¥é‡ç”¨ SqlSessionFactoryBuilder æ¥åˆ›å»ºå¤šä¸ª SqlSessionFactory å®ä¾‹ï¼Œä½†æœ€å¥½è¿˜æ˜¯ä¸è¦ä¸€ç›´ä¿ç•™ç€å®ƒï¼Œä»¥ä¿è¯æ‰€æœ‰çš„ XML è§£æèµ„æºå¯ä»¥è¢«é‡Šæ”¾ç»™æ›´é‡è¦çš„äº‹æƒ…ã€‚</p><h4 id="2-SqlSessionFactory"><a href="#2-SqlSessionFactory" class="headerlink" title="(2) SqlSessionFactory"></a>(2) SqlSessionFactory</h4><p><u><strong>SqlSessionFactory ä¸€æ—¦è¢«åˆ›å»ºå°±åº”è¯¥åœ¨åº”ç”¨çš„è¿è¡ŒæœŸé—´ä¸€ç›´å­˜åœ¨ï¼Œæ²¡æœ‰ä»»ä½•ç†ç”±ä¸¢å¼ƒå®ƒæˆ–é‡æ–°åˆ›å»ºå¦ä¸€ä¸ªå®ä¾‹ã€‚</strong></u> ä½¿ç”¨ SqlSessionFactory çš„æœ€ä½³å®è·µæ˜¯åœ¨åº”ç”¨è¿è¡ŒæœŸé—´ä¸è¦é‡å¤åˆ›å»ºå¤šæ¬¡ï¼Œå¤šæ¬¡é‡å»º SqlSessionFactory è¢«è§†ä¸ºä¸€ç§ä»£ç â€œåä¹ æƒ¯â€ã€‚å› æ­¤ SqlSessionFactory çš„æœ€ä½³ä½œç”¨åŸŸæ˜¯åº”ç”¨ä½œç”¨åŸŸã€‚ æœ‰å¾ˆå¤šæ–¹æ³•å¯ä»¥åšåˆ°ï¼Œ<u><strong>æœ€ç®€å•çš„å°±æ˜¯ä½¿ç”¨å•ä¾‹æ¨¡å¼æˆ–è€…é™æ€å•ä¾‹æ¨¡å¼ã€‚</strong></u></p><h4 id="3-SqlSession"><a href="#3-SqlSession" class="headerlink" title="(3) SqlSession"></a>(3) SqlSession</h4><p><u>æ¯ä¸ªçº¿ç¨‹éƒ½åº”è¯¥æœ‰å®ƒè‡ªå·±çš„ SqlSession å®ä¾‹</u>ã€‚<u>SqlSession çš„å®ä¾‹ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå› æ­¤æ˜¯ä¸èƒ½è¢«å…±äº«çš„</u>ï¼Œæ‰€ä»¥å®ƒçš„æœ€ä½³çš„ä½œç”¨åŸŸæ˜¯è¯·æ±‚æˆ–æ–¹æ³•ä½œç”¨åŸŸã€‚ ç»å¯¹ä¸èƒ½å°† SqlSession å®ä¾‹çš„å¼•ç”¨æ”¾åœ¨ä¸€ä¸ªç±»çš„é™æ€åŸŸï¼Œç”šè‡³ä¸€ä¸ªç±»çš„å®ä¾‹å˜é‡ä¹Ÿä¸è¡Œã€‚ ä¹Ÿç»ä¸èƒ½å°† SqlSession å®ä¾‹çš„å¼•ç”¨æ”¾åœ¨ä»»ä½•ç±»å‹çš„æ‰˜ç®¡ä½œç”¨åŸŸä¸­ï¼Œæ¯”å¦‚ Servlet æ¡†æ¶ä¸­çš„ HttpSessionã€‚ å¦‚æœä½ ç°åœ¨æ­£åœ¨ä½¿ç”¨ä¸€ç§ Web æ¡†æ¶ï¼Œè€ƒè™‘å°† SqlSession æ”¾åœ¨ä¸€ä¸ªå’Œ HTTP è¯·æ±‚ç›¸ä¼¼çš„ä½œç”¨åŸŸä¸­ã€‚ <u>æ¢å¥è¯è¯´ï¼Œæ¯æ¬¡æ”¶åˆ° HTTP è¯·æ±‚ï¼Œå°±å¯ä»¥æ‰“å¼€ä¸€ä¸ª SqlSessionï¼Œè¿”å›ä¸€ä¸ªå“åº”åï¼Œå°±å…³é—­å®ƒã€‚</u> <u>è¿™ä¸ªå…³é—­æ“ä½œå¾ˆé‡è¦ï¼Œä¸ºäº†ç¡®ä¿æ¯æ¬¡éƒ½èƒ½æ‰§è¡Œå…³é—­æ“ä½œï¼Œä½ åº”è¯¥æŠŠè¿™ä¸ªå…³é—­æ“ä½œæ”¾åˆ° finally å—ä¸­ã€‚</u> </p><h2 id="3-å¢åˆ æŸ¥æ”¹çš„å®ç°ï¼ˆCRUDï¼‰"><a href="#3-å¢åˆ æŸ¥æ”¹çš„å®ç°ï¼ˆCRUDï¼‰" class="headerlink" title="3. å¢åˆ æŸ¥æ”¹çš„å®ç°ï¼ˆCRUDï¼‰"></a>3. å¢åˆ æŸ¥æ”¹çš„å®ç°ï¼ˆCRUDï¼‰</h2><p>Cï¼šCreateï¼ˆå¢åŠ ï¼‰ã€Rï¼šRetrieveï¼ˆæ£€ç´¢ï¼‰ã€Uï¼šUpdateï¼ˆæ›´æ–°ï¼‰</p><p>Dï¼šDeleteï¼ˆåˆ é™¤ï¼‰</p><p><strong>ç¼–å†™æ¥å£æ–¹æ³•-&gt;ç¼–å†™Mapperä¸­å¯¹åº”çš„sqlè¯­å¥-&gt;æµ‹è¯•</strong></p><h3 id="3-1-select"><a href="#3-1-select" class="headerlink" title="3.1 select"></a>3.1 select</h3><p>é€‰æ‹©ã€æŸ¥è¯¢è¯­å¥</p><ul><li>idï¼šå¯¹åº”namespaceä¸­çš„æ–¹æ³•å</li><li>resultTypeï¼šSqlè¯­å¥æ‰§è¡Œçš„è¿”å›å€¼</li><li>parameterTypeï¼šå‚æ•°ç±»å‹</li></ul><img src="/images/MyBatis/image-20201112184955494.png" alt="image-20201112184955494" style="zoom:50%;" /><img src="/images/MyBatis/image-20201112185023566.png" alt="image-20201112185023566" style="zoom:50%;" /><p><strong>ä¸‹å›¾ä¸­çš„#{id}ä¸­çš„idå¯¹åº”UserMapperä¸­getUserByIdçš„å‚æ•°id.</strong></p><img src="/images/MyBatis/image-20201112185250610.png" alt="image-20201112185250610" style="zoom:50%;" /><p><strong>ç«çº¢è‰²éƒ¨åˆ†ä¸ºå›ºå®šéƒ¨åˆ†ã€‚</strong></p><h3 id="3-2-insert"><a href="#3-2-insert" class="headerlink" title="3.2 insert"></a>3.2 insert</h3><p>å¢åŠ æ¥å£æ–¹æ³•ã€‚</p><img src="/images/MyBatis/image-20201112185642049.png" alt="image-20201112185642049" style="zoom:50%;" /><p>å¢åŠ xmlé…ç½®</p><img src="/images/MyBatis/image-20201112185702706.png" alt="image-20201112185702706" style="zoom:50%;" /><p>å†™æµ‹è¯•ç±»è¿›è¡Œæµ‹è¯•ï¼š</p><img src="/images/MyBatis/image-20201112185955187.png" alt="image-20201112185955187" style="zoom:50%;" /><img src="/images/MyBatis/image-20201112190006284.png" alt="image-20201112190006284" style="zoom:50%;" /><p>è¿è¡ŒæˆåŠŸï¼Œä½†æ•°æ®åº“ä¸­æ²¡æœ‰æˆåŠŸæ·»åŠ ï¼Ÿï¼ï¼</p><img src="/images/MyBatis/image-20201112190036337.png" alt="image-20201112190036337" style="zoom:50%;" /><p>åŸå› ï¼šå¢åˆ æ”¹æ“ä½œéœ€è¦æäº¤äº‹åŠ¡</p><pre><code class="hljs java"><span class="hljs-meta">@Test</span><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">addUser</span><span class="hljs-params">()</span></span>&#123;    SqlSession sqlSession = MybatisUtils.getSqlSession();    UserMapper userMapper = sqlSession.getMapper(UserMapper.class);    userMapper.addUser(<span class="hljs-keyword">new</span> User(<span class="hljs-number">2</span>, <span class="hljs-string">&quot;zhanger&quot;</span>, <span class="hljs-string">&quot;12345&quot;</span>));    <span class="hljs-comment">//æäº¤äº‹åŠ¡</span>    sqlSession.commit();  <span class="hljs-comment">//å…³é—­</span>    sqlSession.close();&#125;</code></pre><img src="/images/MyBatis/image-20201112190337525.png" alt="image-20201112190337525" style="zoom:50%;" /><h3 id="3-3-update"><a href="#3-3-update" class="headerlink" title="3.3 update"></a>3.3 update</h3><img src="/images/MyBatis/image-20201112190834500.png" alt="image-20201112190834500" style="zoom:50%;" /><img src="/images/MyBatis/image-20201112190848069.png" alt="image-20201112190848069" style="zoom:50%;" /><img src="/images/MyBatis/image-20201112190820745.png" alt="image-20201112190820745" style="zoom:50%;" /><img src="/images/MyBatis/image-20201112190912708.png" alt="image-20201112190912708" style="zoom:50%;" /><h3 id="3-4-delete"><a href="#3-4-delete" class="headerlink" title="3.4 delete"></a>3.4 delete</h3><img src="/images/MyBatis/image-20201112191114785.png" alt="image-20201112191114785" style="zoom:50%;" /><img src="/images/MyBatis/image-20201112191125191.png" alt="image-20201112191125191" style="zoom:50%;" /><img src="/images/MyBatis/image-20201112191136269.png" alt="image-20201112191136269" style="zoom:50%;" /><img src="/images/MyBatis/image-20201112191136269-1606487584119.png" alt="image-20201112191136269" style="zoom:50%;" /><img src="/images/MyBatis/image-20201112191147706.png" alt="image-20201112191147706" style="zoom:50%;" /><h3 id="3-5-é”™è¯¯åˆ†æ"><a href="#3-5-é”™è¯¯åˆ†æ" class="headerlink" title="3.5 é”™è¯¯åˆ†æ"></a>3.5 é”™è¯¯åˆ†æ</h3><ol><li>æ ‡ç­¾ä¸è¦åŒ¹é…é”™è¯¯</li><li><img src="/images/MyBatis/image-20201112191730460.png" alt="image-20201112191730460" style="zoom:50%;" /></li></ol><p>å¿…é¡»ä½¿ç”¨è·¯å¾„ï¼Œè€Œnamespaceä¸­ä½¿ç”¨çš„æ˜¯åŒ…åã€‚</p><img src="/images/MyBatis/image-20201112191814114.png" alt="image-20201112191814114" style="zoom:50%;" /><ol start="3"><li>è¯»é”™ï¼Œä»åå¾€å‰è¯»ã€‚</li><li>NullPointExceptionï¼Œç©ºæŒ‡é’ˆä¸€åœºï¼Œå¯èƒ½æ˜¯æ²¡æœ‰æ³¨å†Œèµ„æºã€‚</li><li>è¾“å‡ºçš„xmlæ–‡ä»¶ä¸­å­˜åœ¨ä¸­æ–‡ä¹±ç é—®é¢˜ï¼Œåˆ æ‰é‡è¯•å³å¯ã€‚</li><li>Mavenèµ„æºæ²¡æœ‰å¯¼å‡ºé—®é¢˜ï¼ˆè§2.4å¸¸è§é—®é¢˜è§£å†³æ–¹æ³•ï¼‰</li></ol><h3 id="3-6-ä¸‡èƒ½Mapï¼ˆå·¥ä½œå®è·µå‡ºçš„ï¼‰"><a href="#3-6-ä¸‡èƒ½Mapï¼ˆå·¥ä½œå®è·µå‡ºçš„ï¼‰" class="headerlink" title="3.6 ä¸‡èƒ½Mapï¼ˆå·¥ä½œå®è·µå‡ºçš„ï¼‰"></a>3.6 ä¸‡èƒ½Mapï¼ˆå·¥ä½œå®è·µå‡ºçš„ï¼‰</h3><img src="/images/MyBatis/image-20201112192754535.png" alt="image-20201112192754535" style="zoom:50%;" /><p>å¦‚æœæœ‰100å¤šä¸ªå­—æ®µéƒ½ä¿®æ”¹ï¼Œä¸€ä¸ªä¸€ä¸ªçš„å†™å¤ªéš¾äº†ï¼æ€ä¹ˆåŠå‘¢ï¼Ÿ</p><p><strong>æˆ‘ä»¬ä½¿ç”¨Mapä¼ é€’å‚æ•°ï¼</strong></p><p>å‡è®¾ï¼Œæˆ‘ä»¬çš„å®ä½“ç±»ï¼Œæˆ–è€…æ•°æ®åº“ä¸­çš„è¡¨ï¼Œå­—æ®µæˆ–è€…å‚æ•°è¿‡å¤šï¼Œæˆ‘ä»¬åº”å½“è€ƒè™‘mapï¼Œmapå¯ä»¥æŸäº›å­—æ®µä¸ºç©ºï¼Œæ¯”è¾ƒçµæ´»ã€‚</p><pre><code class="hljs java">UserMapper:<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">addUser2</span><span class="hljs-params">(Map&lt;String, Object&gt; map)</span></span>;</code></pre><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--ä½¿ç”¨ä¸‡èƒ½çš„map--&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;addUser2&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;map&quot;</span>&gt;</span>  insert into user (id, name, pwd) values (#&#123;userId&#125;, #&#123;userName&#125;, #&#123;userPwd&#125;)<span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span></code></pre><pre><code class="hljs java"><span class="hljs-meta">@Test</span><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">addUse2r</span><span class="hljs-params">()</span></span>&#123;  SqlSession sqlSession = MybatisUtils.getSqlSession();  UserMapper userMapper = sqlSession.getMapper(UserMapper.class);  Map&lt;String, Object&gt; map = <span class="hljs-keyword">new</span> HashMap&lt;String, Object&gt;();  map.put(<span class="hljs-string">&quot;userId&quot;</span>, <span class="hljs-number">3</span>);  <span class="hljs-comment">//map.put(&quot;userName&quot;, &quot;likui&quot;);</span>  map.put(<span class="hljs-string">&quot;userPwd&quot;</span>, <span class="hljs-string">&quot;2222&quot;</span>);  userMapper.addUser2(map);  <span class="hljs-comment">//æäº¤äº‹åŠ¡</span>  sqlSession.commit();  sqlSession.close();&#125;</code></pre><p>æµ‹è¯•æˆåŠŸï¼</p><img src="/images/MyBatis/image-20201112194355751.png" alt="image-20201112194355751" style="zoom:50%;" /><p>mapä¼ é€’å‚æ•°ï¼Œç›´æ¥åœ¨sqlä¸­å–å‡ºKeyå³å¯ï¼›ã€parameterType=â€mapâ€ã€‘</p><p>å¯¹è±¡ä¼ é€’å‚æ•°ï¼Œç›´æ¥åœ¨sqlä¸­å–å‡ºå¯¹è±¡çš„å±æ€§å³å¯ã€parameterType=â€Objectâ€ã€‘</p><p>åªæœ‰ä¸€ä¸ªåŸºæœ¬ç±»å‹å‚æ•°æ—¶ï¼Œå¯ä»¥ç›´æ¥åœ¨sqlä¸­å–å‡ºã€‚ã€parameterType=â€intâ€ã€‘                        ä¹Ÿå¯ä»¥ä¸å†™ã€‚</p><p><strong>å¤šä¸ªå‚æ•°ç”¨Map,æˆ–è€…æ³¨è§£ï¼</strong></p><h4 id="æ¨¡ç³ŠæŸ¥è¯¢"><a href="#æ¨¡ç³ŠæŸ¥è¯¢" class="headerlink" title="æ¨¡ç³ŠæŸ¥è¯¢"></a>æ¨¡ç³ŠæŸ¥è¯¢</h4><pre><code class="hljs java">UserMapper:<span class="hljs-function">List&lt;User&gt; <span class="hljs-title">getUserLike</span><span class="hljs-params">(String value)</span></span>;</code></pre><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getUserLike&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;com.wen.pojo.User&quot;</span>&gt;</span>  select * from user where name like #&#123;value&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></code></pre><pre><code class="hljs java"><span class="hljs-meta">@Test</span><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">getUserLike</span><span class="hljs-params">()</span></span>&#123;  SqlSession sqlSession = MybatisUtils.getSqlSession();  UserMapper userMapper = sqlSession.getMapper(UserMapper.class);  List&lt;User&gt; userList = userMapper.getUserLike(<span class="hljs-string">&quot;%zhang%&quot;</span>);  <span class="hljs-keyword">for</span> (User user : userList) &#123;    System.out.println(user.getName());  &#125;  sqlSession.close();&#125;</code></pre><img src="/images/MyBatis/image-20201112200158647.png" alt="image-20201112200158647" style="zoom:50%;" /><p><strong>ç¬¬äºŒç§ç›¸æ¯”è¾ƒäºç¬¬ä¸€ç§ä¼šå­˜åœ¨SQLæ³¨å…¥çš„å±é™©ï¼</strong></p><p>æ¨¡ç³ŠæŸ¥è¯¢çš„ä¸¤ç§æ–¹æ³•ï¼š</p><ol><li>javaä»£ç æ‰§è¡Œçš„æ—¶å€™ï¼Œä¼ é€’é€šé…ç¬¦% %</li></ol><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getUserLike&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;com.wen.pojo.User&quot;</span>&gt;</span>  select * from user where name like #&#123;value&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></code></pre><ol start="2"><li>åœ¨sqlæ‹¼æ¥ä¸­ä½¿ç”¨é€šé…ç¬¦</li></ol><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getUserLike&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;com.wen.pojo.User&quot;</span>&gt;</span>  select * from user where name like &quot;%&quot;#&#123;value&#125;&quot;%&quot;<span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></code></pre><h2 id="4-é…ç½®è§£æï¼ˆåœ¨è¿™ä¹‹åæ‰æ˜¯çœŸæ­£è¦æŒæ¡çš„ï¼‰"><a href="#4-é…ç½®è§£æï¼ˆåœ¨è¿™ä¹‹åæ‰æ˜¯çœŸæ­£è¦æŒæ¡çš„ï¼‰" class="headerlink" title="4. é…ç½®è§£æï¼ˆåœ¨è¿™ä¹‹åæ‰æ˜¯çœŸæ­£è¦æŒæ¡çš„ï¼‰"></a>4. é…ç½®è§£æï¼ˆåœ¨è¿™ä¹‹åæ‰æ˜¯çœŸæ­£è¦æŒæ¡çš„ï¼‰</h2><p>MyBatis çš„é…ç½®æ–‡ä»¶åŒ…å«äº†ä¼šæ·±æ·±å½±å“ MyBatis è¡Œä¸ºçš„è®¾ç½®å’Œå±æ€§ä¿¡æ¯ã€‚</p><ul><li><a href="https://mybatis.org/mybatis-3/zh/configuration.html#mappers">https://mybatis.org/mybatis-3/zh/configuration.html#mappers</a>)</li></ul><h3 id="4-1-æ ¸å¿ƒé…ç½®æ–‡ä»¶"><a href="#4-1-æ ¸å¿ƒé…ç½®æ–‡ä»¶" class="headerlink" title="4.1 æ ¸å¿ƒé…ç½®æ–‡ä»¶"></a>4.1 æ ¸å¿ƒé…ç½®æ–‡ä»¶</h3><ul><li>mybatis-config.xml</li></ul><p>configurationï¼ˆé…ç½®ï¼‰</p><ul><li>propertiesï¼ˆå±æ€§ï¼‰</li><li>settingsï¼ˆè®¾ç½®ï¼‰</li><li>typeAliasesï¼ˆç±»å‹åˆ«åï¼‰</li><li>typeHandlersï¼ˆç±»å‹å¤„ç†å™¨ï¼‰</li><li>objectFactoryï¼ˆå¯¹è±¡å·¥å‚ï¼‰</li><li>pluginsï¼ˆæ’ä»¶ï¼‰</li><li>environmentsï¼ˆç¯å¢ƒé…ç½®ï¼‰<ul><li>environmentï¼ˆç¯å¢ƒå˜é‡ï¼‰</li><li>transactionManagerï¼ˆäº‹åŠ¡ç®¡ç†å™¨ï¼‰</li><li>dataSourceï¼ˆæ•°æ®æºï¼‰</li></ul></li><li>databaseIdProviderï¼ˆæ•°æ®åº“å‚å•†æ ‡è¯†ï¼‰</li><li>mappersï¼ˆæ˜ å°„å™¨ï¼‰</li></ul><h3 id="4-2-ç¯å¢ƒé…ç½®ï¼ˆenvironmentsï¼‰"><a href="#4-2-ç¯å¢ƒé…ç½®ï¼ˆenvironmentsï¼‰" class="headerlink" title="4.2 ç¯å¢ƒé…ç½®ï¼ˆenvironmentsï¼‰"></a>4.2 ç¯å¢ƒé…ç½®ï¼ˆenvironmentsï¼‰</h3><p>MyBatis å¯ä»¥é…ç½®æˆé€‚åº”å¤šç§ç¯å¢ƒã€‚</p><p><strong>ä¸è¿‡è¦è®°ä½ï¼šå°½ç®¡å¯ä»¥é…ç½®å¤šä¸ªç¯å¢ƒï¼Œä½†æ¯ä¸ª SqlSessionFactory å®ä¾‹åªèƒ½é€‰æ‹©ä¸€ç§ç¯å¢ƒã€‚</strong></p><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">environments</span> <span class="hljs-attr">default</span>=<span class="hljs-string">&quot;development&quot;</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">environment</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;development&quot;</span>&gt;</span><span class="hljs-comment">&lt;!--MyBatisçš„é»˜è®¤ç¯å¢ƒ--&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">transactionManager</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;JDBC&quot;</span>&gt;</span>      <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;...&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;...&quot;</span>/&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">transactionManager</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">dataSource</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;POOLED&quot;</span>&gt;</span>      <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driver&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;driver&#125;&quot;</span>/&gt;</span>      <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;url&#125;&quot;</span>/&gt;</span>      <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;username&#125;&quot;</span>/&gt;</span>      <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;password&#125;&quot;</span>/&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">dataSource</span>&gt;</span>  <span class="hljs-tag">&lt;/<span class="hljs-name">environment</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">environment</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;development2&quot;</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">transactionManager</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;JDBC&quot;</span>&gt;</span>      <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;...&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;...&quot;</span>/&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">transactionManager</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">dataSource</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;POOLED&quot;</span>&gt;</span>      <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driver&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;driver&#125;&quot;</span>/&gt;</span>      <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;url&#125;&quot;</span>/&gt;</span>      <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;username&#125;&quot;</span>/&gt;</span>      <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;password&#125;&quot;</span>/&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">dataSource</span>&gt;</span>  <span class="hljs-tag">&lt;/<span class="hljs-name">environment</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">environments</span>&gt;</span></code></pre><p><strong>æ³¨æ„ä¸€äº›å…³é”®ç‚¹:</strong></p><ul><li>é»˜è®¤ä½¿ç”¨çš„ç¯å¢ƒ IDï¼ˆæ¯”å¦‚ï¼šdefault=â€developmentâ€ï¼‰ã€‚</li><li>æ¯ä¸ª environment å…ƒç´ å®šä¹‰çš„ç¯å¢ƒ IDï¼ˆæ¯”å¦‚ï¼šid=â€developmentâ€ï¼‰ã€‚</li><li>äº‹åŠ¡ç®¡ç†å™¨çš„é…ç½®ï¼ˆæ¯”å¦‚ï¼štype=â€JDBCâ€ï¼‰ã€‚</li><li>æ•°æ®æºçš„é…ç½®ï¼ˆæ¯”å¦‚ï¼štype=â€POOLEDâ€ï¼‰ã€‚</li></ul><p>é»˜è®¤ç¯å¢ƒå’Œç¯å¢ƒ ID é¡¾åæ€ä¹‰ã€‚ ç¯å¢ƒå¯ä»¥éšæ„å‘½åï¼Œä½†åŠ¡å¿…ä¿è¯é»˜è®¤çš„ç¯å¢ƒ ID è¦åŒ¹é…å…¶ä¸­ä¸€ä¸ªç¯å¢ƒ IDã€‚</p><p>ä»¥ä¸‹äº†è§£å³å¯ï¼</p><ol><li><strong>äº‹åŠ¡ç®¡ç†å™¨ï¼ˆtransactionManagerï¼‰</strong></li></ol><p>åœ¨ MyBatis ä¸­æœ‰ä¸¤ç§ç±»å‹çš„äº‹åŠ¡ç®¡ç†å™¨ï¼ˆä¹Ÿå°±æ˜¯ type=â€[JDBC|MANAGED]â€ï¼‰</p><ul><li><p>JDBC â€“ è¿™ä¸ªé…ç½®ç›´æ¥ä½¿ç”¨äº† JDBC çš„æäº¤å’Œå›æ»šè®¾æ–½ï¼Œå®ƒä¾èµ–ä»æ•°æ®æºè·å¾—çš„è¿æ¥æ¥ç®¡ç†äº‹åŠ¡ä½œç”¨åŸŸã€‚</p></li><li><p>MANAGED â€“ è¿™ä¸ªé…ç½®å‡ ä¹æ²¡åšä»€ä¹ˆã€‚å®ƒä»ä¸æäº¤æˆ–å›æ»šä¸€ä¸ªè¿æ¥ï¼Œè€Œæ˜¯è®©å®¹å™¨æ¥ç®¡ç†äº‹åŠ¡çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸï¼ˆæ¯”å¦‚ JEE åº”ç”¨æœåŠ¡å™¨çš„ä¸Šä¸‹æ–‡ï¼‰ã€‚ é»˜è®¤æƒ…å†µä¸‹å®ƒä¼šå…³é—­è¿æ¥ã€‚ç„¶è€Œä¸€äº›å®¹å™¨å¹¶ä¸å¸Œæœ›è¿æ¥è¢«å…³é—­ï¼Œå› æ­¤éœ€è¦å°† closeConnection å±æ€§è®¾ç½®ä¸º false æ¥é˜»æ­¢é»˜è®¤çš„å…³é—­è¡Œä¸ºã€‚ä¾‹å¦‚:</p><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">transactionManager</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;MANAGED&quot;</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;closeConnection&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;false&quot;</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">transactionManager</span>&gt;</span></code></pre></li></ul><p><strong>æ³¨æ„ï¼šå¦‚æœä½ æ­£åœ¨ä½¿ç”¨ Spring + MyBatisï¼Œåˆ™æ²¡æœ‰å¿…è¦é…ç½®äº‹åŠ¡ç®¡ç†å™¨ï¼Œå› ä¸º Spring æ¨¡å—ä¼šä½¿ç”¨è‡ªå¸¦çš„ç®¡ç†å™¨æ¥è¦†ç›–å‰é¢çš„é…ç½®ã€‚</strong></p><ol start="2"><li><strong>æ•°æ®æºï¼ˆdataSourceï¼‰</strong></li></ol><p>è¿æ¥æ•°æ®åº“</p><p>dbcp c3p0 druidï¼ˆé˜¿é‡Œçš„ï¼‰</p><p>æœ‰ä¸‰ç§å†…å»ºçš„æ•°æ®æºç±»å‹ï¼ˆä¹Ÿå°±æ˜¯ type=â€[UNPOOLED|POOLED|JNDI]â€ï¼‰ï¼š</p><ul><li><strong>UNPOOLED</strong>â€“ è¿™ä¸ªæ•°æ®æºçš„å®ç°ä¼šæ¯æ¬¡è¯·æ±‚æ—¶æ‰“å¼€å’Œå…³é—­è¿æ¥ã€‚</li><li><strong>POOLED</strong>â€“ è¿™ç§æ•°æ®æºçš„å®ç°åˆ©ç”¨â€œæ± â€çš„æ¦‚å¿µå°† JDBC è¿æ¥å¯¹è±¡ç»„ç»‡èµ·æ¥ï¼Œé¿å…äº†åˆ›å»ºæ–°çš„è¿æ¥å®ä¾‹æ—¶æ‰€å¿…éœ€çš„åˆå§‹åŒ–å’Œè®¤è¯æ—¶é—´ã€‚ è¿™ç§å¤„ç†æ–¹å¼å¾ˆæµè¡Œï¼Œèƒ½ä½¿å¹¶å‘ Web åº”ç”¨å¿«é€Ÿå“åº”è¯·æ±‚ã€‚</li><li><strong>JNDI</strong> â€“ è¿™ä¸ªæ•°æ®æºå®ç°æ˜¯ä¸ºäº†èƒ½åœ¨å¦‚ EJB æˆ–åº”ç”¨æœåŠ¡å™¨è¿™ç±»å®¹å™¨ä¸­ä½¿ç”¨ï¼Œå®¹å™¨å¯ä»¥é›†ä¸­æˆ–åœ¨å¤–éƒ¨é…ç½®æ•°æ®æºï¼Œç„¶åæ”¾ç½®ä¸€ä¸ª JNDI ä¸Šä¸‹æ–‡çš„æ•°æ®æºå¼•ç”¨ã€‚</li></ul><p><strong>MyBatisé»˜è®¤çš„äº‹åŠ¡ç®¡ç†å™¨æ˜¯JDBCï¼Œæ•°æ®æºï¼šPOOLED</strong></p><h3 id="4-3-å±æ€§ï¼ˆpropertiesï¼‰"><a href="#4-3-å±æ€§ï¼ˆpropertiesï¼‰" class="headerlink" title="4.3 å±æ€§ï¼ˆpropertiesï¼‰"></a>4.3 å±æ€§ï¼ˆpropertiesï¼‰</h3><p>å¯ä»¥é€šè¿‡å±æ€§ï¼ˆpropertiesï¼‰æ¥å®ç°å¼•ç”¨é…ç½®æ–‡ä»¶ã€‚</p><p>è¿™äº›å±æ€§å¯ä»¥åœ¨å¤–éƒ¨è¿›è¡Œé…ç½®ï¼Œå¹¶å¯ä»¥è¿›è¡ŒåŠ¨æ€æ›¿æ¢ã€‚ä½ æ—¢å¯ä»¥åœ¨å…¸å‹çš„ Java å±æ€§æ–‡ä»¶ä¸­é…ç½®è¿™äº›å±æ€§ï¼Œä¹Ÿå¯ä»¥åœ¨ properties å…ƒç´ çš„å­å…ƒç´ ä¸­è®¾ç½®ã€‚ã€db.propertiesã€‘</p><ul><li>ç¼–å†™ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼šdb.properties</li></ul><pre><code class="hljs properties"><span class="hljs-attr">driver</span>=<span class="hljs-string">com.mysql.cj.jdbc.Driver</span><span class="hljs-attr">url</span>=<span class="hljs-string">jdbc:mysql://localhost:3306/mybatis?characterEncoding=utf8&amp;useSSL=false&amp;serverTimezone=UTC&amp;rewriteBatchedStatements=true</span><span class="hljs-attr">username</span>=<span class="hljs-string">root</span><span class="hljs-attr">password</span>=<span class="hljs-string">645645aa</span></code></pre><p>éœ€è¦æ³¨æ„ä¸€ç‚¹ï¼Œåœ¨åŸæ¥çš„è¯­å¥ä¸­å¯èƒ½ä½¿ç”¨äº†&amp;çš„è½¬ä¹‰å†™æˆäº†&amp;amp,ä½†æ˜¯å•ç‹¬å®šä¹‰æ—¶ä¸éœ€è¦ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è¿›è¡Œè½¬ä¹‰ã€‚</p><ul><li>åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ç« å¼•å…¥</li></ul><p><strong>åœ¨xmlæ–‡ä»¶ä¸­éƒ½å¿…é¡»è¦æ±‚é¡ºåºï¼ï¼ï¼</strong></p><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--å¼•å…¥å¤–éƒ¨é…ç½®æ–‡ä»¶--&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">properties</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;db.properties&quot;</span>/&gt;</span></code></pre><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">properties</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;db.properties&quot;</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;123&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span></code></pre><ol><li>å¯ä»¥ç›´æ¥å¼•å…¥å¤–éƒ¨æ–‡ä»¶</li><li>å¯ä»¥åœ¨å…¶ä¸­å¢åŠ ä¸€äº›å±æ€§é…ç½®</li><li>è‹¥ä¸¤ä¸ªæ–‡ä»¶ä¸­æœ‰ç›¸åŒçš„å±æ€§å­—æ®µï¼Œä¼˜å…ˆä½¿ç”¨å¤–éƒ¨å±æ€§æ–‡ä»¶çš„ï¼ï¼</li></ol><h3 id="4-4-ç±»å‹åˆ«åï¼ˆtypeAliasesï¼‰"><a href="#4-4-ç±»å‹åˆ«åï¼ˆtypeAliasesï¼‰" class="headerlink" title="4.4 ç±»å‹åˆ«åï¼ˆtypeAliasesï¼‰"></a>4.4 ç±»å‹åˆ«åï¼ˆtypeAliasesï¼‰</h3><p>ç±»å‹åˆ«åå¯ä¸º Java ç±»å‹è®¾ç½®ä¸€ä¸ªç¼©å†™åå­—ã€‚ å®ƒä»…ç”¨äº XML é…ç½®ï¼Œæ„åœ¨é™ä½å†—ä½™çš„å…¨é™å®šç±»åä¹¦å†™ã€‚</p><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">typeAliases</span>&gt;</span>  <span class="hljs-comment">&lt;!--ç»™å®ä½“ç±»èµ·åˆ«å--&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">typeAlias</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;com.wen.pojo.User&quot;</span> <span class="hljs-attr">alias</span>=<span class="hljs-string">&quot;User&quot;</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">typeAliases</span>&gt;</span></code></pre><p>ä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªåŒ…åï¼ŒMyBatis ä¼šåœ¨åŒ…åä¸‹é¢æœç´¢éœ€è¦çš„ Java Beanï¼Œåœ¨æ²¡æœ‰æ³¨è§£çš„æƒ…å†µä¸‹ï¼Œä¼šä½¿ç”¨ Bean çš„é¦–å­—æ¯å°å†™çš„éé™å®šç±»åæ¥ä½œä¸ºå®ƒçš„åˆ«åã€‚</p><p>æ¯”å¦‚ <code>domain.blog.Author</code> çš„åˆ«åä¸º <code>author</code>ï¼›è‹¥æœ‰æ³¨è§£ï¼Œåˆ™åˆ«åä¸ºå…¶æ³¨è§£å€¼ã€‚</p><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">typeAliases</span>&gt;</span>  <span class="hljs-comment">&lt;!--æŒ‡å®šåŒ…å--&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">package</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;com.wen.pojo&quot;</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">typeAliases</span>&gt;</span></code></pre><p>åœ¨å®ä½“ç±»è¾ƒå°‘çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨ç¬¬ä¸€ç§æ–¹å¼ï¼›</p><p>å¦‚æœå®ä½“ç±»ååˆ†å¤šï¼Œå»ºè®®ä½¿ç”¨ç¬¬äºŒç§ã€‚ç¬¬äºŒç§ä¹Ÿå¯ä½¿ç”¨æ³¨è§£ã€‚</p><img src="/images/MyBatis/image-20201112210050180.png" alt="image-20201112210050180" style="zoom:50%;" /><p>ä¸‹é¢æ˜¯ä¸€äº›ä¸ºå¸¸è§çš„ Java ç±»å‹å†…å»ºçš„ç±»å‹åˆ«åã€‚å®ƒä»¬éƒ½æ˜¯ä¸åŒºåˆ†å¤§å°å†™çš„ï¼Œæ³¨æ„ï¼Œä¸ºäº†åº”å¯¹åŸå§‹ç±»å‹çš„å‘½åé‡å¤ï¼Œé‡‡å–äº†ç‰¹æ®Šçš„å‘½åé£æ ¼ã€‚</p><table><thead><tr><th align="left">åˆ«å</th><th align="left">æ˜ å°„çš„ç±»å‹</th></tr></thead><tbody><tr><td align="left">_byte</td><td align="left">byte</td></tr><tr><td align="left">_long</td><td align="left">long</td></tr><tr><td align="left">_short</td><td align="left">short</td></tr><tr><td align="left">_int</td><td align="left">int</td></tr><tr><td align="left">_integer</td><td align="left">int</td></tr><tr><td align="left">_double</td><td align="left">double</td></tr><tr><td align="left">_float</td><td align="left">float</td></tr><tr><td align="left">_boolean</td><td align="left">boolean</td></tr><tr><td align="left">string</td><td align="left">String</td></tr><tr><td align="left">byte</td><td align="left">Byte</td></tr><tr><td align="left">long</td><td align="left">Long</td></tr><tr><td align="left">short</td><td align="left">Short</td></tr><tr><td align="left">int</td><td align="left">Integer</td></tr><tr><td align="left">integer</td><td align="left">Integer</td></tr><tr><td align="left">double</td><td align="left">Double</td></tr><tr><td align="left">float</td><td align="left">Float</td></tr><tr><td align="left">boolean</td><td align="left">Boolean</td></tr><tr><td align="left">date</td><td align="left">Date</td></tr><tr><td align="left">decimal</td><td align="left">BigDecimal</td></tr><tr><td align="left">bigdecimal</td><td align="left">BigDecimal</td></tr><tr><td align="left">object</td><td align="left">Object</td></tr><tr><td align="left">map</td><td align="left">Map</td></tr><tr><td align="left">hashmap</td><td align="left">HashMap</td></tr><tr><td align="left">list</td><td align="left">List</td></tr><tr><td align="left">arraylist</td><td align="left">ArrayList</td></tr><tr><td align="left">collection</td><td align="left">Collection</td></tr><tr><td align="left">iterator</td><td align="left">Iterator</td></tr></tbody></table><h3 id="4-4-è®¾ç½®ï¼ˆsettingsï¼‰"><a href="#4-4-è®¾ç½®ï¼ˆsettingsï¼‰" class="headerlink" title="4.4 è®¾ç½®ï¼ˆsettingsï¼‰"></a>4.4 è®¾ç½®ï¼ˆsettingsï¼‰</h3><p>è¿™æ˜¯ MyBatis ä¸­æä¸ºé‡è¦çš„è°ƒæ•´è®¾ç½®ï¼Œå®ƒä»¬ä¼šæ”¹å˜ MyBatis çš„è¿è¡Œæ—¶è¡Œä¸ºã€‚</p><ul><li>mapUnderscoreToCamelCase</li></ul><p>æ˜¯å¦å¼€å¯é©¼å³°å‘½åè‡ªåŠ¨æ˜ å°„ï¼Œå³ä»ç»å…¸æ•°æ®åº“åˆ—å A_COLUMN æ˜ å°„åˆ°ç»å…¸ Java å±æ€§å aColumnã€‚ ä¾‹å¦‚ï¼šlast_name-&gt;lastName</p><ul><li>logImpl</li></ul><p>æŒ‡å®š MyBatis æ‰€ç”¨æ—¥å¿—çš„å…·ä½“å®ç°ï¼ŒæœªæŒ‡å®šæ—¶å°†è‡ªåŠ¨æŸ¥æ‰¾ã€‚</p><p> SLF4J | LOG4J | LOG4J2 | JDK_LOGGING | COMMONS_LOGGING | STDOUT_LOGGING | NO_LOGGING  æ—¥å¿—å®ç°</p><ul><li>cacheEnabled  ç¼“å­˜</li></ul><p>å…¨å±€æ€§åœ°å¼€å¯æˆ–å…³é—­æ‰€æœ‰æ˜ å°„å™¨é…ç½®æ–‡ä»¶ä¸­å·²é…ç½®çš„ä»»ä½•ç¼“å­˜ã€‚</p><ul><li><p>lazyLoadingEnabled  æ‡’åŠ è½½</p><p>å»¶è¿ŸåŠ è½½çš„å…¨å±€å¼€å…³ã€‚å½“å¼€å¯æ—¶ï¼Œæ‰€æœ‰å…³è”å¯¹è±¡éƒ½ä¼šå»¶è¿ŸåŠ è½½ã€‚ ç‰¹å®šå…³è”å…³ç³»ä¸­å¯é€šè¿‡è®¾ç½® <code>fetchType</code> å±æ€§æ¥è¦†ç›–è¯¥é¡¹çš„å¼€å…³çŠ¶æ€ã€‚</p></li></ul><h3 id="4-5-å…¶ä»–é…ç½®"><a href="#4-5-å…¶ä»–é…ç½®" class="headerlink" title="4.5 å…¶ä»–é…ç½®"></a>4.5 å…¶ä»–é…ç½®</h3><ul><li><a href="https://mybatis.org/mybatis-3/zh/configuration.html#typeHandlers">typeHandlersï¼ˆç±»å‹å¤„ç†å™¨ï¼‰</a></li><li><a href="https://mybatis.org/mybatis-3/zh/configuration.html#objectFactory">objectFactoryï¼ˆå¯¹è±¡å·¥å‚ï¼‰</a></li><li><a href="https://mybatis.org/mybatis-3/zh/configuration.html#plugins">pluginsï¼ˆæ’ä»¶ï¼‰</a><ul><li>MyBatis-Plus</li><li>MyBatis-generator-core</li><li>é€šç”¨mapper</li></ul></li></ul><h3 id="4-6-æ˜ å°„å™¨ï¼ˆmappersï¼‰"><a href="#4-6-æ˜ å°„å™¨ï¼ˆmappersï¼‰" class="headerlink" title="4.6 æ˜ å°„å™¨ï¼ˆmappersï¼‰"></a>4.6 æ˜ å°„å™¨ï¼ˆmappersï¼‰</h3><p>MapperRegistryæ³¨å†Œç»‘å®šæ¥å£æ–‡ä»¶ã€‚</p><img src="/images/MyBatis/image-20201112211421136.png" alt="image-20201112211421136" style="zoom:50%;" /><p>æ–¹å¼ä¸€ï¼š</p><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- ä½¿ç”¨ç›¸å¯¹äºç±»è·¯å¾„çš„èµ„æºå¼•ç”¨ --&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">mappers</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;com/wen/dao/UserMapper.xml&quot;</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">mappers</span>&gt;</span></code></pre><p>æ–¹å¼äºŒï¼šä½¿ç”¨Classæ–‡ä»¶ç»‘å®šæ³¨å†Œ</p><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- ä½¿ç”¨æ˜ å°„å™¨æ¥å£å®ç°ç±»çš„å®Œå…¨é™å®šç±»å --&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">mappers</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.wen.dao.UserMapper&quot;</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">mappers</span>&gt;</span></code></pre><p>æ³¨æ„ï¼š</p><ul><li>æ¥å£å’ŒMapperé…ç½®æ–‡ä»¶å¿…é¡»åŒå</li><li>æ¥å£å’ŒMapperé…ç½®æ–‡ä»¶å¿…é¡»åœ¨ä¸€ä¸ªåŒ…ä¸‹</li></ul><p>æ–¹å¼ä¸‰ï¼šä½¿ç”¨æ‰«æåŒ…è¿›è¡Œæ³¨å…¥ç»‘å®š</p><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- å°†åŒ…å†…çš„æ˜ å°„å™¨æ¥å£å®ç°å…¨éƒ¨æ³¨å†Œä¸ºæ˜ å°„å™¨ --&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">mappers</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">package</span>=<span class="hljs-string">&quot;com.wen.dao&quot;</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">mappers</span>&gt;</span></code></pre><p>æ³¨æ„ï¼š</p><ul><li>æ¥å£å’ŒMapperé…ç½®æ–‡ä»¶å¿…é¡»åŒå</li><li>æ¥å£å’ŒMapperé…ç½®æ–‡ä»¶å¿…é¡»åœ¨ä¸€ä¸ªåŒ…ä¸‹</li></ul><h3 id="4-7-ç”Ÿå‘½å‘¨æœŸå’Œä½œç”¨åŸŸ"><a href="#4-7-ç”Ÿå‘½å‘¨æœŸå’Œä½œç”¨åŸŸ" class="headerlink" title="4.7 ç”Ÿå‘½å‘¨æœŸå’Œä½œç”¨åŸŸ"></a>4.7 ç”Ÿå‘½å‘¨æœŸå’Œä½œç”¨åŸŸ</h3><p>ä¸åŒä½œç”¨åŸŸå’Œç”Ÿå‘½å‘¨æœŸç±»åˆ«æ˜¯è‡³å…³é‡è¦çš„ï¼Œå› ä¸ºé”™è¯¯çš„ä½¿ç”¨ä¼šå¯¼è‡´éå¸¸ä¸¥é‡çš„<strong>å¹¶å‘é—®é¢˜</strong>ã€‚</p><p><img src="/images/MyBatis/image-20201112220538765.png" alt="image-20201112220538765"></p><p>SqlSessionFactoryBuilderï¼š</p><ul><li>ä¸€æ—¦åˆ›å»ºäº†SqlSessionFactoryï¼Œå°±ä¸å†éœ€è¦å®ƒäº†ã€‚</li><li>å±€éƒ¨å˜é‡</li></ul><p>SqlSessionFactoryï¼š</p><ul><li>å¯ä»¥æƒ³è±¡ä¸ºï¼šæ•°æ®åº“è¿æ¥æ± </li><li>SqlSessionFactory ä¸€æ—¦è¢«åˆ›å»ºå°±åº”è¯¥åœ¨åº”ç”¨çš„è¿è¡ŒæœŸé—´ä¸€ç›´å­˜åœ¨ï¼Œæ²¡æœ‰ä»»ä½•ç†ç”±ä¸¢å¼ƒå®ƒæˆ–é‡æ–°åˆ›å»ºå¦ä¸€ä¸ªå®ä¾‹ã€‚</li><li>SqlSessionFactory çš„æœ€ä½³ä½œç”¨åŸŸæ˜¯åº”ç”¨ä½œç”¨åŸŸã€‚</li><li>æœ€ç®€å•çš„å°±æ˜¯ä½¿ç”¨å•ä¾‹æ¨¡å¼æˆ–è€…é™æ€å•ä¾‹æ¨¡å¼ã€‚</li></ul><p>SqlSessionï¼š</p><ul><li>æ¯ä¸ªçº¿ç¨‹éƒ½åº”è¯¥æœ‰å®ƒè‡ªå·±çš„ SqlSession å®ä¾‹ã€‚</li><li>è¿æ¥åˆ°è¿æ¥æ± çš„ä¸€ä¸ªè¯·æ±‚ï¼</li><li>SqlSession çš„å®ä¾‹ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå› æ­¤æ˜¯ä¸èƒ½è¢«å…±äº«çš„ï¼Œæ‰€ä»¥å®ƒçš„æœ€ä½³çš„ä½œç”¨åŸŸæ˜¯è¯·æ±‚æˆ–æ–¹æ³•ä½œç”¨åŸŸã€‚ï¼ˆæ”¾åˆ°æ–¹æ³•ä¸­ï¼‰</li><li>ç”¨å®Œä¹‹åéœ€è¦èµ¶ç´§å…³é—­ï¼Œå¦åˆ™èµ„æºè¢«å ç”¨</li></ul><p><img src="/images/MyBatis/image-20201112232726419.png" alt="image-20201112232726419"></p><p>è¿™é‡Œçš„æ¯ä¸€ä¸ªMapperï¼Œå°±ä»£è¡¨ä¸€ä¸ªä¸šåŠ¡ã€‚</p><h2 id="5-è§£å†³å±æ€§åå’Œå­—æ®µåä¸ä¸€è‡´çš„é—®é¢˜"><a href="#5-è§£å†³å±æ€§åå’Œå­—æ®µåä¸ä¸€è‡´çš„é—®é¢˜" class="headerlink" title="5. è§£å†³å±æ€§åå’Œå­—æ®µåä¸ä¸€è‡´çš„é—®é¢˜"></a>5. è§£å†³å±æ€§åå’Œå­—æ®µåä¸ä¸€è‡´çš„é—®é¢˜</h2><h3 id="5-1-é—®é¢˜"><a href="#5-1-é—®é¢˜" class="headerlink" title="5.1 é—®é¢˜"></a>5.1 é—®é¢˜</h3><p>æ•°æ®åº“ä¸­çš„å­—æ®µï¼š</p><img src="/images/MyBatis/image-20201112233017699.png" alt="image-20201112233017699" style="zoom:50%;" /><p>æ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œæ‹·è´ä¹‹å‰çš„ï¼Œæµ‹è¯•å®ä½“ç±»å­—æ®µä¸ä¸€è‡´çš„æƒ…å†µã€‚</p><p>ä¿®æ”¹å­—æ®µpwd-&gt;password</p><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>&#123;  <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> id;  <span class="hljs-keyword">private</span> String name;  <span class="hljs-keyword">private</span> String password;</code></pre><pre><code class="hljs java"><span class="hljs-meta">@Test</span><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span></span>&#123;  <span class="hljs-comment">//1. è·å–SqlSessionå¯¹è±¡</span>  SqlSession sqlSession = MybatisUtils.getSqlSession();  <span class="hljs-comment">//2. æ‰§è¡Œ</span>  <span class="hljs-comment">//æ–¹å¼ä¸€ï¼šgetMapper</span>  UserMapper userMapper = sqlSession.getMapper(UserMapper.class);  User user = userMapper.getUserById(<span class="hljs-number">2</span>);  System.out.println(user.getName()+<span class="hljs-string">&quot;: &quot;</span> + user.getId() + <span class="hljs-string">&quot;: &quot;</span> + user.getPassword());  <span class="hljs-comment">//å…³é—­sqlSession</span>  sqlSession.close();&#125;</code></pre><p>å‘ç°passwordå­—æ®µä¸ºç©ºï¼šæµ‹è¯•å‡ºç°é—®é¢˜</p><img src="/images/MyBatis/image-20201113071345521.png" alt="image-20201113071345521" style="zoom:50%;" /><pre><code class="hljs java">select * from user where id = #&#123;id&#125;<span class="hljs-comment">//ç±»å‹å¤„ç†å™¨</span>select id,name,pwd from user where id = #&#123;id&#125;</code></pre><p>è§£å†³æ–¹æ³•ï¼šæ–¹æ³•ä¸€</p><pre><code class="hljs java">select id,name,password from user where id = #&#123;id&#125;<span class="hljs-comment">//èµ·åˆ«åå°±å¯</span></code></pre><h3 id="5-2-resultMap"><a href="#5-2-resultMap" class="headerlink" title="5.2 resultMap"></a>5.2 resultMap</h3><p>resultMapï¼šç»“æœé›†æ˜ å°„</p><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--ç»“æœé›†æ˜ å°„--&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;UserMap&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;User&quot;</span>&gt;</span>  <span class="hljs-comment">&lt;!--column:æ•°æ®åº“ä¸­çš„å­—æ®µï¼Œpropertyï¼šå®ä½“ç±»çš„ä¸­çš„å±æ€§--&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;id&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;id&quot;</span>/&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;name&quot;</span>/&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;pwd&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;password&quot;</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getUserById&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;UserMap&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;int&quot;</span>&gt;</span>  select * from user where id = #&#123;id&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></code></pre><ul><li><code>resultMap</code> å…ƒç´ æ˜¯ MyBatis ä¸­æœ€é‡è¦æœ€å¼ºå¤§çš„å…ƒç´ ã€‚</li><li>ResultMap çš„è®¾è®¡æ€æƒ³æ˜¯ï¼Œå¯¹ç®€å•çš„è¯­å¥åšåˆ°é›¶é…ç½®ï¼Œå¯¹äºå¤æ‚ä¸€ç‚¹çš„è¯­å¥ï¼Œåªéœ€è¦æè¿°è¯­å¥ä¹‹é—´çš„å…³ç³»å°±è¡Œäº†ã€‚</li><li><code>ResultMap</code> çš„ä¼˜ç§€ä¹‹å¤„â€”â€”ä½ å®Œå…¨å¯ä»¥ä¸ç”¨æ˜¾å¼åœ°é…ç½®å®ƒä»¬ã€‚**(åªéœ€è¦é…ç½®ä¸åŒçš„å­—æ®µå³å¯)**</li></ul><p><strong>ä½¿ç”¨æ–¹æ³•ï¼š</strong></p><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userResultMap&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;User&quot;</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;id&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;user_id&quot;</span> /&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;user_name&quot;</span>/&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;hashed_password&quot;</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span></code></pre><p>ç„¶ååœ¨å¼•ç”¨å®ƒçš„è¯­å¥ä¸­è®¾ç½® <code>resultMap</code> å±æ€§å°±è¡Œäº†ï¼ˆæ³¨æ„æˆ‘ä»¬å»æ‰äº† <code>resultType</code> å±æ€§ï¼‰ã€‚æ¯”å¦‚:</p><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;selectUsers&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;userResultMap&quot;</span>&gt;</span>  select user_id, user_name, hashed_password  from some_table  where id = #&#123;id&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></code></pre><p>å¦‚æœä¸–ç•Œå°±è¿™ä¹ˆç®€å•å°±å¥½äº†ï¼ï¼<img src="/images/MyBatis/image-20201113073217197.png" alt="image-20201113073217197"></p><h2 id="6-æ—¥å¿—"><a href="#6-æ—¥å¿—" class="headerlink" title="6. æ—¥å¿—"></a>6. æ—¥å¿—</h2><h3 id="6-1-æ—¥å¿—å·¥å‚"><a href="#6-1-æ—¥å¿—å·¥å‚" class="headerlink" title="6.1 æ—¥å¿—å·¥å‚"></a>6.1 æ—¥å¿—å·¥å‚</h3><p>å¦‚æœä¸€ä¸ªæ•°æ®åº“æ“ä½œå‡ºç°å¼‚å¸¸ï¼Œæˆ‘ä»¬éœ€è¦æ’é”™ï¼Œæ—¥å¿—å°±æ˜¯æœ€å¥½çš„åŠ©æ‰‹ã€‚</p><p>æ›¾ç»ï¼šsout debug</p><p>ç°åœ¨ï¼šæ—¥å¿—å·¥å‚</p><p>logImpl</p><p>æŒ‡å®š MyBatis æ‰€ç”¨æ—¥å¿—çš„å…·ä½“å®ç°ï¼ŒæœªæŒ‡å®šæ—¶å°†è‡ªåŠ¨æŸ¥æ‰¾ã€‚</p><ul><li> SLF4J </li><li>LOG4J ã€æŒæ¡ã€‘</li><li>LOG4J2 </li><li>JDK_LOGGING </li><li>COMMONS_LOGGING </li><li>STDOUT_LOGGING ã€æŒæ¡ã€‘</li><li>NO_LOGGING </li></ul><p>åœ¨MyBatisä¸­å…·ä½“ä½¿ç”¨å“ªä¸€ä¸ªæ—¥å¿—å®ç°ï¼Œåœ¨è®¾ç½®ä¸­è®¾å®šã€‚</p><p><strong>STDOUT_LOGGINGï¼šæ ‡å‡†æ—¥å¿—è¾“å‡º</strong></p><p>åœ¨MyBatisæ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­ï¼Œé…ç½®æˆ‘ä»¬çš„æ—¥å¿—ï¼</p><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">settings</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">setting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;logImpl&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;STDOUT_LOGGING&quot;</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">settings</span>&gt;</span></code></pre><img src="/images/MyBatis/image-20201113075212076.png" alt="image-20201113075212076" style="zoom:50%;" /><h3 id="6-2-LOG4J"><a href="#6-2-LOG4J" class="headerlink" title="6.2 LOG4J"></a><strong>6.2 LOG4J</strong></h3><ul><li>Log4jæ˜¯<a href="https://baike.baidu.com/item/Apache/8512995">Apache</a>çš„ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œé€šè¿‡ä½¿ç”¨Log4jï¼Œæˆ‘ä»¬å¯ä»¥æ§åˆ¶æ—¥å¿—ä¿¡æ¯è¾“é€çš„ç›®çš„åœ°æ˜¯<a href="https://baike.baidu.com/item/%E6%8E%A7%E5%88%B6%E5%8F%B0/2438626">æ§åˆ¶å°</a>ã€æ–‡ä»¶ã€<a href="https://baike.baidu.com/item/GUI">GUI</a>ç»„ä»¶ã€‚</li><li>æˆ‘ä»¬å¯ä»¥æ§åˆ¶æ¯ä¸€æ¡æ—¥å¿—çš„è¾“å‡ºæ ¼å¼</li><li>é€šè¿‡å®šä¹‰æ¯ä¸€æ¡æ—¥å¿—ä¿¡æ¯çš„çº§åˆ«ï¼Œæˆ‘ä»¬èƒ½å¤Ÿæ›´åŠ ç»†è‡´åœ°æ§åˆ¶æ—¥å¿—çš„ç”Ÿæˆè¿‡ç¨‹ã€‚</li><li>é€šè¿‡ä¸€ä¸ª<a href="https://baike.baidu.com/item/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/286550">é…ç½®æ–‡ä»¶</a>æ¥çµæ´»åœ°è¿›è¡Œé…ç½®ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹åº”ç”¨çš„ä»£ç ã€‚</li></ul><ol><li>éœ€è¦å¯¼åŒ…</li></ol><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- https://mvnrepository.com/artifact/log4j/log4j --&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>log4j<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>log4j<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2.17<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre><ol start="2"><li>log4j.properties</li></ol><pre><code class="hljs properties"><span class="hljs-comment">### é…ç½®æ ¹ ç›®çš„åœ°###</span><span class="hljs-meta">log4j.rootLogger</span> = <span class="hljs-string">debug,console,fileAppender</span><span class="hljs-comment">### æ—¥å¿—è¾“å‡ºçº§åˆ« ###</span><span class="hljs-meta">log4j.logger.org.mybatis</span>=<span class="hljs-string">debug</span><span class="hljs-meta">log4j.logger.java.sql</span>=<span class="hljs-string">debug</span><span class="hljs-meta">log4j.logger.java.sql.Statement</span>=<span class="hljs-string">debug</span><span class="hljs-meta">log4j.logger.java.sql.PreparedStatement</span>=<span class="hljs-string">debug</span><span class="hljs-meta">log4j.logger.java.sql.ResultSet</span>=<span class="hljs-string">debug</span><span class="hljs-comment">### é…ç½®è¾“å‡ºåˆ°æ§åˆ¶å° ###</span><span class="hljs-meta">log4j.appender.console</span> = <span class="hljs-string">org.apache.log4j.ConsoleAppender</span><span class="hljs-meta">log4j.appender.console.Target</span> = <span class="hljs-string">System.out</span><span class="hljs-meta">log4j.appender.console.Threshold</span> = <span class="hljs-string">debug</span><span class="hljs-meta">log4j.appender.console.layout</span> = <span class="hljs-string">org.apache.log4j.PatternLayout</span><span class="hljs-meta">log4j.appender.console.layout.ConversionPattern</span> =  <span class="hljs-string">%d&#123;ABSOLUTE&#125; %5p %c&#123;1&#125;:%L - %m%n</span><span class="hljs-comment">### é…ç½®è¾“å‡ºåˆ°æ–‡ä»¶ ###</span><span class="hljs-meta">log4j.appender.fileAppender</span> = <span class="hljs-string">org.apache.log4j.FileAppender</span><span class="hljs-meta">log4j.appender.fileAppender.File</span> = <span class="hljs-string">logs/log.log</span><span class="hljs-meta">log4j.appender.fileAppender.Append</span> = <span class="hljs-string">true</span><span class="hljs-meta">log4j.appender.fileAppender.Threshold</span> = <span class="hljs-string">DEBUG</span><span class="hljs-meta">log4j.appender.fileAppender.layout</span> = <span class="hljs-string">org.apache.log4j.PatternLayout</span><span class="hljs-meta">log4j.appender.fileAppender.layout.ConversionPattern</span> = <span class="hljs-string">%-d&#123;yyyy-MM-dd HH:mm:ss&#125;[%t:%r]-[%p]%m%n</span><span class="hljs-comment">### é…ç½®è¾“å‡ºåˆ°æ–‡ä»¶ï¼Œå¹¶ä¸”æ¯å¤©éƒ½åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ ###</span><span class="hljs-meta">log4j.appender.dailyRollingFile</span> = <span class="hljs-string">org.apache.log4j.DailyRollingFileAppender</span><span class="hljs-meta">log4j.appender.dailyRollingFile.File</span> = <span class="hljs-string">logs/log.log</span><span class="hljs-meta">log4j.appender.dailyRollingFile.Append</span> = <span class="hljs-string">true</span><span class="hljs-meta">log4j.appender.dailyRollingFile.Threshold</span> = <span class="hljs-string">DEBUG</span><span class="hljs-meta">log4j.appender.dailyRollingFile.layout</span> = <span class="hljs-string">org.apache.log4j.PatternLayout</span><span class="hljs-meta">log4j.appender.dailyRollingFile.layout.ConversionPattern</span> = <span class="hljs-string">%-d&#123;yyyy-MM-dd HH:mm:ss&#125;  [ %t:%r ] - [ %p ]  %m%n### é…ç½®è¾“å‡ºåˆ°æ–‡ä»¶ï¼Œä¸”å¤§å°åˆ°è¾¾æŒ‡å®šå°ºå¯¸çš„æ—¶å€™äº§ç”Ÿä¸€ä¸ªæ–°çš„æ–‡ä»¶ ###log4j.appender.ROLLING_FILE=org.apache.log4j.RollingFileAppender log4j.appender.ROLLING_FILE.Threshold=ERROR log4j.appender.ROLLING_FILE.File=rolling.log log4j.appender.ROLLING_FILE.Append=true log4j.appender.ROLLING_FILE.MaxFileSize=10KB log4j.appender.ROLLING_FILE.MaxBackupIndex=1 log4j.appender.ROLLING_FILE.layout=org.apache.log4j.PatternLayout log4j.appender.ROLLING_FILE.layout.ConversionPattern=[framework] %d - %c -%-4r [%t] %-5p %c %x - %m%n</span></code></pre><ol start="3"><li>é…ç½®log4jä¸ºæ—¥å¿—å®ç°</li></ol><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">settings</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">setting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;logImpl&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;LOG4J&quot;</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">settings</span>&gt;</span></code></pre><ol start="4"><li>log4jçš„ä½¿ç”¨ï¼ç›´æ¥æµ‹è¯•è¿è¡Œåˆšæ‰çš„æŸ¥è¯¢</li></ol><img src="/images/MyBatis/image-20201113081623597.png" alt="image-20201113081623597" style="zoom:50%;" /><p><strong>ç®€å•ä½¿ç”¨</strong></p><ol><li>åœ¨è¦ä½¿ç”¨log4jçš„ç±»ä¸­ï¼Œå¯¼å…¥åŒ…import org.apache.log4j.Logger;</li><li>æ—¥å¿—å¯¹è±¡ï¼Œå‚æ•°ä¸ºå½“å‰ç±»çš„class </li></ol><pre><code class="hljs java"><span class="hljs-keyword">static</span> Logger logger = Logger.getLogger(UserMapperTest.class);</code></pre><ol start="3"><li>æµ‹è¯•æ–¹æ³•</li></ol><pre><code class="hljs java"><span class="hljs-meta">@Test</span><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testLog4j</span><span class="hljs-params">()</span></span>&#123;  logger.info(<span class="hljs-string">&quot;info:è¿›å…¥äº†testLog4j&quot;</span>);  logger.debug(<span class="hljs-string">&quot;debug:è¿›å…¥äº†testLog4j&quot;</span>);  logger.error(<span class="hljs-string">&quot;error:è¿›å…¥äº†testLog4j&quot;</span>);&#125;</code></pre><p>ä¹‹åå¦‚æœæƒ³æ‰“å°ä¸€äº›ä¿¡æ¯ï¼Œä¹‹å‰ä¼šç»å¸¸ç”¨System.out.println()ï¼Œç°åœ¨å¯ä»¥ç›´æ¥ç”¨logger.info()ã€logger.error()ã€logger.debug()æ¥è¿›è¡Œè¾“å‡ºã€‚</p><ol start="4"><li>æ—¥å¿—çº§åˆ«</li></ol><pre><code class="hljs java">logger.info(<span class="hljs-string">&quot;info:è¿›å…¥äº†testLog4j&quot;</span>);logger.debug(<span class="hljs-string">&quot;debug:è¿›å…¥äº†testLog4j&quot;</span>);logger.error(<span class="hljs-string">&quot;error:è¿›å…¥äº†testLog4j&quot;</span>);</code></pre><p><strong>logæ—¥å¿—æ–‡ä»¶æ‰“ä¸å¼€ï¼Ÿï¼</strong></p><img src="/images/MyBatis/image-20201113082531661.png" alt="image-20201113082531661" style="zoom:50%;" /><p>è§£å†³æ–¹æ³•ï¼š</p><p><strong>æ–¹æ¡ˆä¸€ï¼š</strong></p><p>mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­ä¸è¦ä½¿ç”¨æˆ–ä¸­ä½¿ç”¨packageæ¥æŒ‡å®šè¦æ‰«æçš„åŒ…ï¼ï¼</p><p>åŸå› ï¼šä½¿ç”¨packageæŒ‡å®šè¦æ‰«æçš„åŒ…ï¼Œä¼šäº§ç”Ÿä¹±ç ï¼Œç”Ÿæˆçš„logæ–‡ä»¶ï¼ŒIDEAæ‰“ä¸å¼€ã€‚</p><img src="/images/MyBatis/image-20201113082831359.png" alt="image-20201113082831359" style="zoom:50%;" /><p>åˆ é™¤æ‰«æåŒ…é…ç½®ä¹‹å</p><img src="/images/MyBatis/image-20201113082716048.png" alt="image-20201113082716048" style="zoom:50%;" /><p><strong>æ–¹æ¡ˆäºŒï¼š</strong></p><img src="/images/MyBatis/image-20201113083027304.png" alt="image-20201113083027304" style="zoom:50%;" /><img src="/images/MyBatis/image-20201113083402249.png" alt="image-20201113083402249" style="zoom:50%;" /><p>è¿™æ—¶å¯ä»¥æŸ¥çœ‹æ–‡ä»¶äº†ï¼ï¼ˆè™½ç„¶å­˜åœ¨ä¹±ç ï¼Œä¾ç„¶å¯ä»¥æ‰“å¼€æŸ¥çœ‹ï¼‰</p><img src="/images/MyBatis/image-20201113083435007.png" alt="image-20201113083435007" style="zoom:50%;" /><h2 id="7-åˆ†é¡µ"><a href="#7-åˆ†é¡µ" class="headerlink" title="7. åˆ†é¡µ"></a>7. åˆ†é¡µ</h2><p><strong>ä¸ºä»€ä¹ˆéœ€è¦åˆ†é¡µï¼Ÿ</strong></p><img src="/images/MyBatis/image-20201113084732912.png" alt="image-20201113084732912" style="zoom: 25%;" /><ul><li>å‡å°‘æ•°æ®çš„å¤„ç†é‡</li></ul><h3 id="7-1-åˆ©ç”¨Limitåˆ†é¡µ"><a href="#7-1-åˆ©ç”¨Limitåˆ†é¡µ" class="headerlink" title="7.1 åˆ©ç”¨Limitåˆ†é¡µ"></a><strong>7.1 åˆ©ç”¨Limitåˆ†é¡µ</strong></h3><p>select * from user limit 0,2;  ä»0å¼€å§‹ï¼Œåˆ†ä¸¤ä¸ª</p><p>select * from user limit 2ï¼›ä»0å¼€å§‹ï¼Œé•¿åº¦ä¸º2</p><p>ä½¿ç”¨MyBatiså®ç°åˆ†é¡µï¼Œæ ¸å¿ƒæ˜¯SQL</p><ol><li>æ¥å£</li></ol><pre><code class="hljs java">UserMapper.java  <span class="hljs-function">List&lt;User&gt; <span class="hljs-title">getUserByLimit</span><span class="hljs-params">(Map&lt;String,Integer&gt; map)</span></span>;</code></pre><ol start="2"><li>Mapper</li></ol><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--åˆ†é¡µ--&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getUserByLimit&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;map&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;UserMap&quot;</span>&gt;</span>  select * from user limit #&#123;startIndex&#125;,#&#123;pageSize&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></code></pre><ol start="3"><li>æµ‹è¯•</li></ol><pre><code class="hljs java"><span class="hljs-meta">@Test</span><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testLimit</span><span class="hljs-params">()</span></span>&#123;  SqlSession sqlSession = MybatisUtils.getSqlSession();  UserMapper userMapper = sqlSession.getMapper(UserMapper.class);  Map&lt;String,Integer&gt; map = <span class="hljs-keyword">new</span> HashMap&lt;String, Integer&gt;();  map.put(<span class="hljs-string">&quot;startIndex&quot;</span>,<span class="hljs-number">0</span>);  map.put(<span class="hljs-string">&quot;pageSize&quot;</span>,<span class="hljs-number">2</span>);  List&lt;User&gt; userByLimit = userMapper.getUserByLimit(map);  <span class="hljs-keyword">for</span> (User user : userByLimit) &#123;    System.out.println(user.getName()+<span class="hljs-string">&quot;: &quot;</span> + user.getPassword());  &#125;  sqlSession.close();&#125;</code></pre><img src="/images/MyBatis/image-20201113092408125.png" alt="image-20201113092408125" style="zoom:50%;" /><h3 id="7-2-RowBoundsåˆ†é¡µ"><a href="#7-2-RowBoundsåˆ†é¡µ" class="headerlink" title="7.2 RowBoundsåˆ†é¡µ"></a>7.2 RowBoundsåˆ†é¡µ</h3><p>ä¸å»ºè®®å¼€å‘ä½¿ç”¨ï¼é‚£å°±ç®€å•å†™å†™ï¼Œç§‘æ™®ä¸€ä¸‹ï¼<img src="/images/MyBatis/image-20201113092625610.png" alt="image-20201113092625610"></p><p>RowBoundsï¼šä¸ä½¿ç”¨SQLå®ç°ï¼Œåœ¨Javaå±‚é¢å®ç°ï¼</p><ol><li>æ¥å£</li></ol><pre><code class="hljs java"><span class="hljs-function">List&lt;User&gt; <span class="hljs-title">getUserByRowBounds</span><span class="hljs-params">()</span></span>;</code></pre><ol start="2"><li>Mapper.xml</li></ol><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--    RowBounds--&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getUserByRowBounds&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;UserMap&quot;</span>&gt;</span>  select * from user<span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></code></pre><ol start="3"><li>æµ‹è¯•ç±»</li></ol><pre><code class="hljs java"><span class="hljs-meta">@Test</span><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testRowBounds</span><span class="hljs-params">()</span></span>&#123;  SqlSession sqlSession = MybatisUtils.getSqlSession();  <span class="hljs-comment">//RowBoundså®ç°</span>  RowBounds rowBounds = <span class="hljs-keyword">new</span> RowBounds(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>);  <span class="hljs-comment">//é€šè¿‡javaä»£ç å±‚é¢å®ç°åˆ†é¡µ</span>  List&lt;User&gt; userList = sqlSession.selectList(<span class="hljs-string">&quot;com.wen.dao.UserMapper.getUserByRowBounds&quot;</span>,<span class="hljs-keyword">null</span>,rowBounds);  <span class="hljs-keyword">for</span> (User user : userList) &#123;    System.out.println(user.getName() + <span class="hljs-string">&quot;: &quot;</span> + user.getPassword());  &#125;  sqlSession.close();&#125;</code></pre><img src="/images/MyBatis/image-20201113093633848.png" alt="image-20201113093633848" style="zoom:50%;" /><h3 id="7-3-åˆ†é¡µæ’ä»¶"><a href="#7-3-åˆ†é¡µæ’ä»¶" class="headerlink" title="7.3 åˆ†é¡µæ’ä»¶"></a>7.3 åˆ†é¡µæ’ä»¶</h3><img src="/images/MyBatis/image-20201113093918975.png" alt="image-20201113093918975" style="zoom:50%;" /><p>äº†è§£å³å¯ï¼Œä¸‡ä¸€ä¹‹åç”¨åˆ°å¯ä»¥ä½¿ç”¨ï¼<img src="/images/MyBatis/image-20201113094152149.png" alt="image-20201113094152149"></p><h2 id="8-ä½¿ç”¨æ³¨è§£å¼€å‘"><a href="#8-ä½¿ç”¨æ³¨è§£å¼€å‘" class="headerlink" title="8. ä½¿ç”¨æ³¨è§£å¼€å‘"></a>8. ä½¿ç”¨æ³¨è§£å¼€å‘</h2><p>é™¤äº†MyBatisä¸€èˆ¬éƒ½ä¼šä½¿ç”¨æ³¨è§£å¼€å‘ï¼<img src="/images/MyBatis/image-20201113094325233.png" alt="image-20201113094325233"></p><h3 id="8-1-é¢å‘æ¥å£ç¼–ç¨‹"><a href="#8-1-é¢å‘æ¥å£ç¼–ç¨‹" class="headerlink" title="8.1 é¢å‘æ¥å£ç¼–ç¨‹"></a>8.1 é¢å‘æ¥å£ç¼–ç¨‹</h3><p>æˆ‘ä»¬éƒ½å­¦è¿‡é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œä¹Ÿå­¦ä¹ è¿‡æ¥å£ï¼Œä½†æ˜¯åœ¨çœŸæ­£çš„å¼€å‘ä¸­ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬ä¼šé€‰æ‹©é¢å‘å¯¹è±¡ç¼–ç¨‹ã€‚</p><p><strong>æ ¹æœ¬åŸå› ï¼š==è§£è€¦==ã€å¯æ‰©å±•ã€æé«˜å¤ç”¨ï¼Œåˆ†å±‚å¼€å‘ä¸­ï¼Œä¸Šå±‚ä¸ç”¨ç®¡å…·ä½“çš„å®ç°ï¼Œå¤§å®¶éƒ½éµå®ˆå…±åŒçš„æ ‡å‡†ï¼Œä½¿å¾—å¼€å‘å˜å¾—å®¹æ˜“ï¼Œè§„èŒƒæ€§æ›´å¥½ã€‚</strong></p><p>å…³äºæ¥å£çš„ç†è§£ï¼š</p><ul><li><p>æ¥å£ä»æ›´æ·±å±‚æ¬¡çš„ç†è§£ï¼Œåº”æ˜¯å®šä¹‰ï¼ˆè§„èŒƒã€çº¦æŸï¼‰ä¸å®ç°ï¼ˆåå®åˆ†ç¦»çš„åŸåˆ™ï¼‰çš„åˆ†ç¦»</p></li><li><p>æ¥å£çš„æœ¬èº«ååº”äº†ç³»ç»Ÿäººå‘˜å¯¹ç³»ç»Ÿçš„æŠ½è±¡ç†è§£ã€‚</p></li><li><p>æ¥å£æœ‰ä¸¤ç±»</p><p>-ç¬¬ä¸€ç±»ï¼šå¯¹ä¸€ä¸ªä¸ªä½“çš„æŠ½è±¡ï¼Œå®ƒå¯å¯¹åº”ä¸€ä¸ªæŠ½è±¡ä½“ï¼ˆabstract classï¼‰</p><p>-ç¬¬äºŒç±»ï¼šå¯¹ä¸€ä¸ªä¸ªä½“æŸæ–¹é¢çš„æŠ½è±¡ï¼Œå³å½¢æˆä¸€ä¸ªæŠ½è±¡é¢ï¼ˆinterfaceï¼‰</p></li><li><p>ä¸€ä¸ªä¸ªä½“å¯èƒ½æœ‰å¤šä¸ªæŠ½è±¡é¢ã€‚æŠ½è±¡ä½“å’ŒæŠ½è±¡é¢æ˜¯æœ‰åŒºåˆ«çš„ã€‚</p></li></ul><p>ä¸‰ä¸ªé¢å‘çš„åŒºåˆ«ï¼š</p><ul><li>é¢å‘å¯¹è±¡ï¼šæˆ‘ä»¬è€ƒè™‘é—®é¢˜æ—¶ï¼Œä»¥å¯¹è±¡ä¸ºå•ä½ï¼Œè€ƒè™‘å®ƒçš„å±æ€§å’Œæ–¹æ³•ã€‚</li><li>é¢å‘è¿‡ç¨‹ï¼šæˆ‘ä»¬è€ƒè™‘é—®é¢˜æ—¶ï¼Œä»¥ä¸€ä¸ªå…·ä½“çš„æµç¨‹ï¼ˆäº‹åŠ¡è¿‡ç¨‹ï¼‰ä¸ºå•ä½ï¼Œè€ƒè™‘å®ƒçš„å®ç°ã€‚</li><li>æ¥å£è®¾è®¡ä¸éæ¥å£è®¾è®¡æ˜¯é’ˆå¯¹å¤ç”¨æŠ€æœ¯è€Œè¨€çš„ï¼Œä¸é¢å‘å¯¹è±¡ï¼ˆ/è¿‡ç¨‹ï¼‰ä¸æ˜¯ä¸€ä¸ªé—®é¢˜ï¼Œæ›´å¤šçš„ä½“ç°æ˜¯å¯¹ç³»ç»Ÿæ•´ä½“çš„æ¶æ„ã€‚</li></ul><h3 id="8-2-ä½¿ç”¨æ³¨è§£å¼€å‘"><a href="#8-2-ä½¿ç”¨æ³¨è§£å¼€å‘" class="headerlink" title="8.2 ä½¿ç”¨æ³¨è§£å¼€å‘"></a>8.2 ä½¿ç”¨æ³¨è§£å¼€å‘</h3><ol><li>åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ç»‘å®šæ¥å£</li></ol><pre><code class="hljs java">mybatis-config.xml&lt;!--ç»‘å®šæ¥å£--&gt;&lt;mappers&gt;  &lt;mapper <span class="hljs-class"><span class="hljs-keyword">class</span></span>=<span class="hljs-string">&quot;com.wen.dao.UserMapper&quot;</span>/&gt;&lt;/mappers&gt;</code></pre><ol start="2"><li>æ³¨è§£åœ¨æ¥å£ä¸Šå®ç°</li></ol><pre><code class="hljs java">UserMapper.java  <span class="hljs-meta">@Select(&quot;select id,name,pwd as password from user&quot;)</span>    <span class="hljs-function">List&lt;User&gt; <span class="hljs-title">getUsers</span><span class="hljs-params">()</span></span>;</code></pre><p>ä¸€æ—¦å­—æ®µæ”¹å˜ï¼Œæ³¨è§£çš„æ–¹å¼å°±æ˜¾å¾—éå¸¸çš„éº»çƒ¦ã€‚å½“sqlè¯­å¥æ›´å¤æ‚çš„æ—¶å€™ï¼Œä¹Ÿä¸å¤ªå¥½ç”¨ã€‚</p><p>æœ¬è´¨ï¼šåå°„æœºåˆ¶å®ç°</p><p>åº•å±‚ï¼šåŠ¨æ€ä»£ç†</p><h4 id="MyBatisè¯¦ç»†æµç¨‹"><a href="#MyBatisè¯¦ç»†æµç¨‹" class="headerlink" title="MyBatisè¯¦ç»†æµç¨‹"></a><strong>MyBatisè¯¦ç»†æµç¨‹</strong></h4><img src="/images/MyBatis/image-20201113110717482.png" alt="image-20201113110717482" style="zoom:50%;" /><p>Bravoï¼ï¼<img src="/images/MyBatis/image-20201113110753787.png" alt="image-20201113110753787"></p><h3 id="8-3-CRUD"><a href="#8-3-CRUD" class="headerlink" title="8.3 CRUD"></a>8.3 CRUD</h3><p><strong>è‡ªåŠ¨æäº¤äº‹åŠ¡</strong></p><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SqlSession <span class="hljs-title">getSqlSession</span><span class="hljs-params">()</span></span>&#123;  <span class="hljs-keyword">return</span> sqlSessionFactory.openSession(<span class="hljs-keyword">true</span>);&#125;</code></pre><p>å¤šä¸ªå‚æ•°å¯ä»¥ç”¨@Param(â€œâ€)æ³¨è§£ï¼Œä½†å¿…é¡»æ˜¯åŸºæœ¬ç±»å‹ã€‚</p><pre><code class="hljs java"><span class="hljs-comment">//æ–¹æ³•å­˜åœ¨å¤šä¸ªå‚æ•°ï¼Œæ‰€æœ‰çš„å‚æ•°å‰é¢å¿…é¡»åŠ ä¸Š@Paramæ³¨è§£</span>    <span class="hljs-meta">@Select(&quot;select * from where id = #&#123;id&#125; and name = #&#123;name&#125;&quot;)</span>    <span class="hljs-function">User <span class="hljs-title">getUserById</span><span class="hljs-params">(<span class="hljs-meta">@Param(&quot;id&quot;)</span> <span class="hljs-keyword">int</span> id, <span class="hljs-meta">@Param(&quot;name&quot;)</span> String name)</span></span>;</code></pre><img src="/images/MyBatis/image-20201113121441254.png" alt="image-20201113121441254" style="zoom:50%;" /><p><strong>idæ˜¯ä»æ³¨è§£ä¸­çš„åç§°è·å–çš„ï¼ï¼</strong></p><p><strong>å¢åŠ ï¼š</strong></p><pre><code class="hljs java"><span class="hljs-meta">@Insert(&quot;insert into user(id, name, pwd) values(#&#123;id&#125;, #&#123;name&#125;, #&#123;pwd&#125;)&quot;)</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">addUser</span><span class="hljs-params">(User user)</span></span>;</code></pre><pre><code class="hljs java">MyBatisUtils.java:<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SqlSession <span class="hljs-title">getSqlSession</span><span class="hljs-params">()</span></span>&#123;  <span class="hljs-keyword">return</span> sqlSessionFactory.openSession(<span class="hljs-keyword">true</span>);&#125;<span class="hljs-comment">//true:ä»£è¡¨è‡ªåŠ¨æäº¤äº‹åŠ¡</span></code></pre><p><strong>æŸ¥æ‰¾ï¼š</strong></p><pre><code class="hljs java">UserMapper.java:<span class="hljs-comment">//æ–¹æ³•å­˜åœ¨å¤šä¸ªå‚æ•°ï¼Œæ‰€æœ‰çš„å‚æ•°å‰é¢å¿…é¡»åŠ ä¸Š@Paramæ³¨è§£</span><span class="hljs-meta">@Select(&quot;select * from user where id = #&#123;id&#125; and name = #&#123;name&#125;&quot;)</span><span class="hljs-function">User <span class="hljs-title">getUserById</span><span class="hljs-params">(<span class="hljs-meta">@Param(&quot;id&quot;)</span> <span class="hljs-keyword">int</span> id2, <span class="hljs-meta">@Param(&quot;name&quot;)</span> String name)</span></span>;Test:<span class="hljs-meta">@Test</span><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span></span>&#123;  <span class="hljs-comment">//1. è·å–SqlSessionå¯¹è±¡</span>  SqlSession sqlSession = MybatisUtils.getSqlSession();  <span class="hljs-comment">//2. æ‰§è¡Œ</span>  <span class="hljs-comment">//æ–¹å¼ä¸€ï¼šgetMapper</span>  UserMapper userMapper = sqlSession.getMapper(UserMapper.class);  User user = userMapper.getUserById(<span class="hljs-number">5</span>,<span class="hljs-string">&quot;5555&quot;</span>);  System.out.println(user.getName());  <span class="hljs-comment">//å…³é—­sqlSession</span>  sqlSession.close();&#125;</code></pre><p><strong>ä¿®æ”¹ï¼š</strong></p><pre><code class="hljs java">UserMapper.java:<span class="hljs-meta">@Update(&quot;update user set name=#&#123;name&#125;,pwd=#&#123;password&#125; where id=#&#123;id&#125;&quot;)</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">updateUser</span><span class="hljs-params">(User user)</span></span>;<span class="hljs-meta">@Test</span><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span></span>&#123;  <span class="hljs-comment">//1. è·å–SqlSessionå¯¹è±¡</span>  SqlSession sqlSession = MybatisUtils.getSqlSession();  <span class="hljs-comment">//2. æ‰§è¡Œ</span>  <span class="hljs-comment">//æ–¹å¼ä¸€ï¼šgetMapper</span>  UserMapper userMapper = sqlSession.getMapper(UserMapper.class);  userMapper.updateUser(<span class="hljs-keyword">new</span> User(<span class="hljs-number">5</span>, <span class="hljs-string">&quot;777&quot;</span>, <span class="hljs-string">&quot;777&quot;</span>));  <span class="hljs-comment">//å…³é—­sqlSession</span>  sqlSession.close();&#125;</code></pre><p><strong>åˆ é™¤ï¼š</strong></p><pre><code class="hljs java">UserMapper.java:<span class="hljs-meta">@Delete(&quot;delete from user where id=#&#123;id&#125;&quot;)</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">deleteUser</span><span class="hljs-params">(<span class="hljs-meta">@Param(&quot;id&quot;)</span> <span class="hljs-keyword">int</span> id)</span></span>;<span class="hljs-meta">@Test</span><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span></span>&#123;  <span class="hljs-comment">//1. è·å–SqlSessionå¯¹è±¡</span>  SqlSession sqlSession = MybatisUtils.getSqlSession();  <span class="hljs-comment">//2. æ‰§è¡Œ</span>  <span class="hljs-comment">//æ–¹å¼ä¸€ï¼šgetMapper</span>  UserMapper userMapper = sqlSession.getMapper(UserMapper.class);  userMapper.deleteUser(<span class="hljs-number">2</span>);  <span class="hljs-comment">//å…³é—­sqlSession</span>  sqlSession.close();&#125;</code></pre><pre><code class="hljs java"><span class="hljs-meta">@Select(&quot;select id,name,pwd as password from user&quot;)</span><span class="hljs-function">List&lt;User&gt; <span class="hljs-title">getUsers</span><span class="hljs-params">()</span></span>;<span class="hljs-comment">//æ–¹æ³•å­˜åœ¨å¤šä¸ªå‚æ•°ï¼Œæ‰€æœ‰çš„å‚æ•°å‰é¢å¿…é¡»åŠ ä¸Š@Paramæ³¨è§£</span><span class="hljs-meta">@Select(&quot;select * from user where id = #&#123;id&#125; and name = #&#123;name&#125;&quot;)</span><span class="hljs-function">User <span class="hljs-title">getUserById</span><span class="hljs-params">(<span class="hljs-meta">@Param(&quot;id&quot;)</span> <span class="hljs-keyword">int</span> id2, <span class="hljs-meta">@Param(&quot;name&quot;)</span> String name)</span></span>;<span class="hljs-meta">@Insert(&quot;insert into user(id, name, pwd) values(#&#123;id&#125;, #&#123;name&#125;, #&#123;password&#125;)&quot;)</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">addUser</span><span class="hljs-params">(User user)</span></span>;<span class="hljs-meta">@Update(&quot;update user set name=#&#123;name&#125;,pwd=#&#123;password&#125; where id=#&#123;id&#125;&quot;)</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">updateUser</span><span class="hljs-params">(User user)</span></span>;<span class="hljs-meta">@Delete(&quot;delete from user where id=#&#123;id&#125;&quot;)</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">deleteUser</span><span class="hljs-params">(<span class="hljs-meta">@Param(&quot;id&quot;)</span> <span class="hljs-keyword">int</span> id)</span></span>;</code></pre><p><strong>å…³äº@Param()æ³¨è§£</strong></p><ul><li>åŸºæœ¬ç±»å‹çš„å‚æ•°æˆ–è€…Stringç±»å‹ï¼Œéœ€è¦åŠ ä¸Šã€‚</li><li>å¼•ç”¨ç±»å‹ä¸éœ€è¦åŠ ã€‚</li><li>å¦‚æœåªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œå¯ä»¥å¿½ç•¥ï¼Œä½†æ˜¯å»ºè®®åŠ ä¸Šã€‚</li><li>æˆ‘ä»¬åœ¨SQLä¸­å¼•ç”¨çš„å°±æ˜¯æˆ‘ä»¬è¿™é‡Œçš„@Param()ä¸­è®¾å®šçš„å±æ€§åã€‚</li></ul><p><strong>å…³äº${}å’Œ#{}çš„åŒºåˆ«</strong></p><ul><li>#{}èƒ½å¤Ÿå¾ˆå¤§ç¨‹åº¦ä¸Šé˜²æ­¢sqlæ³¨å…¥ï¼Œè€Œ${}æ— æ³•é˜²æ­¢sqlæ³¨å…¥ã€‚</li><li>èƒ½ç”¨#{}å°½é‡ä½¿ç”¨#{}</li></ul><h2 id="9-Lombok"><a href="#9-Lombok" class="headerlink" title="9. Lombok"></a>9. Lombok</h2><p>ç¬¬ä¸‰æ–¹å·¥å…·</p><p>Project Lombok is a java library that automatically plugs into your editor and build tools, spicing up your java.</p><p>Never write another getter or equals method again, with one <strong>annotation</strong> your class has a fully featured builder, Automate your logging variables, and much more.</p><p>Lombok æ˜¯ä¸€ç§ Javaâ„¢ å®ç”¨å·¥å…·ï¼Œå¯ç”¨æ¥å¸®åŠ©å¼€å‘äººå‘˜æ¶ˆé™¤ Java çš„å†—é•¿ï¼Œå°¤å…¶æ˜¯å¯¹äºç®€å•çš„ Java å¯¹è±¡ï¼ˆPOJOï¼‰ã€‚å®ƒé€šè¿‡æ³¨è§£å®ç°è¿™ä¸€ç›®çš„ã€‚</p><ol><li><p>åœ¨IDEAä¸­å®‰è£…Lombokæ’ä»¶</p></li><li><p>å¼•å…¥Lombokä¾èµ–</p><hr><dependency>    <groupId>org.projectlombok</groupId>    <artifactId>lombok</artifactId>    <version>1.18.12</version>    <scope>provided</scope></dependency><hr></li></ol><ol start="3"><li>åœ¨å®ä½“ç±»ä¸ŠåŠ æ³¨è§£å³å¯</li></ol><p><strong>å¸¸ç”¨çš„æ³¨è§£ï¼š</strong></p><ul><li>@Getter and @Getter</li><li>@ToString</li><li>@EqualsAndHashCode</li><li>@AllArgsConstructor</li><li>@NoArgsConstructor</li><li>@Data</li><li>@Accessors</li></ul><hr><p>@Dataç­‰ä»·äºä¸Šé¢çš„@Setterã€@Getterã€@RequiredArgsConstructorã€@ToStringã€@EqualsAndHashCode</p><hr><img src="/images/MyBatis/image-20201113193152340.png" alt="image-20201113193152340" style="zoom:50%;" /><p>ä¼˜ç‚¹ï¼š</p><ul><li>æé«˜å¼€å‘æ•ˆç‡</li><li>ä»£ç ç®€æ´</li></ul><p>ç¼ºç‚¹ï¼š</p><ul><li>ä¸æ”¯æŒå¤šç§å‚æ•°æ„é€ å™¨çš„é‡è½½ã€‚</li><li>è™½ç„¶çœå»äº†æ‰‹åŠ¨åˆ›å»ºgetter/setteræ–¹æ³•çš„éº»çƒ¦ï¼Œä½†æ˜¯å¤§å¤§é™ä½äº†æºä»£ç çš„å¯è¯»æ€§å’Œå®Œæ•´æ€§ï¼Œé™ä½äº†é˜…è¯»æºä»£ç çš„èˆ’é€‚åº¦ã€‚</li></ul><h2 id="10-å¤æ‚æŸ¥è¯¢"><a href="#10-å¤æ‚æŸ¥è¯¢" class="headerlink" title="10. å¤æ‚æŸ¥è¯¢"></a>10. å¤æ‚æŸ¥è¯¢</h2><ul><li>å¤šå¯¹ä¸€ï¼šå…³è”</li><li>ä¸€å¯¹å¤šï¼šé›†åˆ</li></ul><h3 id="10-1-å¤šå¯¹ä¸€å¤„ç†"><a href="#10-1-å¤šå¯¹ä¸€å¤„ç†" class="headerlink" title="10.1 å¤šå¯¹ä¸€å¤„ç†"></a>10.1 å¤šå¯¹ä¸€å¤„ç†</h3><img src="/images/MyBatis/image-20201113201018723.png" alt="image-20201113201018723" style="zoom:50%;" /><img src="/images/MyBatis/image-20201113201147828.png" alt="image-20201113201147828" style="zoom:50%;" /><p><img src="/images/MyBatis/image-20201113201222165.png" alt="image-20201113201222165"></p><p>æ³¨æ„ï¼š</p><p>åˆ›å»ºç›¸åŒçš„ç›®å½•ç»“æ„</p><img src="/images/MyBatis/image-20201113203832658.png" alt="image-20201113203832658" style="zoom:50%;" /><p>javaç›®å½•ä¸‹ï¼šä½¿ç”¨com.wen.daoåˆ›å»ºï¼Œè€Œresourcesä¸‹ä½¿ç”¨com/wen/daoåˆ›å»ºã€‚</p><img src="/images/MyBatis/image-20201113203920130.png" alt="image-20201113203920130" style="zoom:50%;" /><p>åˆ›å»ºæµ‹è¯•ç¯å¢ƒï¼š</p><ul><li>æ ¸å¿ƒé…ç½®æ–‡ä»¶mybatis-config.xmlå’ŒMyBatisUtilså·¥å…·ç±»</li><li>åˆ›å»ºè¡¨ student teacher</li><li>åˆ›å»ºå®ä½“ç±» Student Teacher</li><li><strong>ç¼–å†™Daoã€Mapper</strong>  åµŒå¥—å¤„ç†</li></ul><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">StudentMapper</span> </span>&#123;    <span class="hljs-comment">//æŸ¥è¯¢æ‰€æœ‰çš„å­¦ç”Ÿï¼Œä»¥åŠè€å¸ˆçš„ä¿¡æ¯ï¼ˆæ¶‰åŠå¤šè¡¨æŸ¥è¯¢ï¼‰</span>    <span class="hljs-function">List&lt;Student&gt; <span class="hljs-title">getStudents</span><span class="hljs-params">()</span></span>;    <span class="hljs-function">Student <span class="hljs-title">getStudentById</span><span class="hljs-params">(<span class="hljs-meta">@Param(&quot;sid&quot;)</span> <span class="hljs-keyword">int</span> id)</span></span>;&#125;</code></pre><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getStudents&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;Student_Teacher&quot;</span>&gt;</span>  select * from student<span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;Student_Teacher&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;Student&quot;</span>&gt;</span>  <span class="hljs-comment">&lt;!--</span><span class="hljs-comment">            å¤æ‚çš„å±æ€§:æˆ‘ä»¬éœ€è¦å•ç‹¬å¤„ç†</span><span class="hljs-comment">            association ï¼š å¯¹è±¡</span><span class="hljs-comment">            collection ï¼š é›†åˆ</span><span class="hljs-comment">        --&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">association</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;teacher&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;tid&quot;</span> <span class="hljs-attr">javaType</span>=<span class="hljs-string">&quot;Teacher&quot;</span> <span class="hljs-attr">select</span>=<span class="hljs-string">&quot;getTeacher&quot;</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getTeacher&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;Teacher&quot;</span>&gt;</span>  select * from teacher where id = #&#123;id&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><span class="hljs-comment">&lt;!--ä¸Šé¢çš„è¯­å¥æ”¹æˆid=#&#123;tid&#125;ä¹Ÿä¸€æ ·ï¼Œå¥½åƒä¸å½±å“ä¼ å€¼--&gt;</span></code></pre><ul><li>æµ‹è¯•</li></ul><img src="/images/MyBatis/image-20201113210441811.png" alt="image-20201113210441811" style="zoom:50%;" /><h4 id="æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç†"><a href="#æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç†" class="headerlink" title="æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç†"></a>æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç†</h4><p>ç±»ä¼¼ï¼šå­æŸ¥è¯¢</p><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getStudents&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;Student_Teacher&quot;</span>&gt;</span>  select * from student<span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;Student_Teacher&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;Student&quot;</span>&gt;</span>  <span class="hljs-comment">&lt;!--</span><span class="hljs-comment">            å¤æ‚çš„å±æ€§:æˆ‘ä»¬éœ€è¦å•ç‹¬å¤„ç†</span><span class="hljs-comment">            association ï¼š å¯¹è±¡</span><span class="hljs-comment">            collection ï¼š é›†åˆ</span><span class="hljs-comment">        --&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">association</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;teacher&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;tid&quot;</span> <span class="hljs-attr">javaType</span>=<span class="hljs-string">&quot;Teacher&quot;</span> <span class="hljs-attr">select</span>=<span class="hljs-string">&quot;getTeacher&quot;</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getTeacher&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;Teacher&quot;</span>&gt;</span>  select * from teacher where id = #&#123;id&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><span class="hljs-comment">&lt;!--ä¸Šé¢çš„è¯­å¥æ”¹æˆid=#&#123;tid&#125;ä¹Ÿä¸€æ ·ï¼Œå¥½åƒä¸å½±å“ä¼ å€¼--&gt;</span></code></pre><img src="/images/MyBatis/image-20201113212309019.png" alt="image-20201113212309019" style="zoom:50%;" /><p><strong>ä¸‹é¢çš„è™½ç„¶å¯ä»¥æ›¿æ¢æˆåˆ«çš„ï¼Œä½†æ˜¯æœ€å¥½å’Œä¸Šé¢çš„ä¿æŒä¸€è‡´ï¼ï¼<img src="/images/MyBatis/image-20201113212424872.png" alt="image-20201113212424872"></strong></p><h4 id="æŒ‰ç…§ç»“æœæŸ¥è¯¢å¤„ç†"><a href="#æŒ‰ç…§ç»“æœæŸ¥è¯¢å¤„ç†" class="headerlink" title="æŒ‰ç…§ç»“æœæŸ¥è¯¢å¤„ç†"></a>æŒ‰ç…§ç»“æœæŸ¥è¯¢å¤„ç†</h4><p>ç±»ä¼¼ï¼šè¿è¡¨æŸ¥è¯¢</p><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--æŒ‰ç…§ç»“æœåµŒå¥—å¤„ç†--&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getStudents2&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;Student_Teacher2&quot;</span>&gt;</span>  select student.id sid,student.name sname,teacher.name tname  from student,teacher  where student.tid = teacher.id<span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;Student_Teacher2&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;Student&quot;</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;id&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;sid&quot;</span>/&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;sname&quot;</span>/&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">association</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;teacher&quot;</span> <span class="hljs-attr">javaType</span>=<span class="hljs-string">&quot;Teacher&quot;</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;tname&quot;</span>/&gt;</span>  <span class="hljs-tag">&lt;/<span class="hljs-name">association</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span></code></pre><img src="/images/MyBatis/image-20201113212534960.png" alt="image-20201113212534960" style="zoom:50%;" /><h3 id="10-2-ä¸€å¯¹å¤šå¤„ç†"><a href="#10-2-ä¸€å¯¹å¤šå¤„ç†" class="headerlink" title="10.2 ä¸€å¯¹å¤šå¤„ç†"></a>10.2 ä¸€å¯¹å¤šå¤„ç†</h3><img src="/images/MyBatis/image-20201113212823953.png" alt="image-20201113212823953" style="zoom:50%;" /><pre><code class="hljs java"><span class="hljs-meta">@Data</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Teacher</span> </span>&#123;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> id;    <span class="hljs-keyword">private</span> String name;    <span class="hljs-comment">//ä¸€å¯¹å¤š</span>    <span class="hljs-keyword">private</span> List&lt;Student&gt; students;&#125;<span class="hljs-meta">@Data</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Student</span> </span>&#123;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> id;    <span class="hljs-keyword">private</span> String name;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> tid;&#125;</code></pre><pre><code class="hljs java">TeacherMapper.java<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">TeacherMapper</span> </span>&#123;    <span class="hljs-comment">//è·å–ä¸€ä¸ªæŒ‡å®šè€å¸ˆä¸‹çš„æ‰€æœ‰å­¦ç”ŸåŠè€å¸ˆçš„ä¿¡æ¯</span>    <span class="hljs-function">Teacher <span class="hljs-title">getTeacher</span><span class="hljs-params">(<span class="hljs-meta">@Param(&quot;tid&quot;)</span> <span class="hljs-keyword">int</span> id)</span></span>;&#125;</code></pre><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getTeacher&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;Teacher_Student&quot;</span>&gt;</span>  select student.id sid, student.name sname, teacher.name tname, teacher.id tid  from student,teacher  where student.tid = teacher.id<span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;Teacher_Student&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;Teacher&quot;</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;id&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;tid&quot;</span>/&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;tname&quot;</span>/&gt;</span>  <span class="hljs-comment">&lt;!--é›†åˆä¸­çš„æ³›å‹ä¿¡æ¯ï¼Œæˆ‘ä»¬ä½¿ç”¨ofType--&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">collection</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;studentList&quot;</span> <span class="hljs-attr">ofType</span>=<span class="hljs-string">&quot;Student&quot;</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;id&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;sid&quot;</span>/&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;sname&quot;</span>/&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;tid&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;tid&quot;</span>/&gt;</span>  <span class="hljs-tag">&lt;/<span class="hljs-name">collection</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span></code></pre><img src="/images/MyBatis/image-20201113222454568.png" alt="image-20201113222454568" style="zoom:50%;" /><p>//æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç†å°±ä¸ç¼–ç äº†ï¼Œå¤ªéº»çƒ¦äº†ï¼ï¼<img src="/images/MyBatis/image-20201113222953722.png" alt="image-20201113222953722"></p><h3 id="10-3-å°ç»“"><a href="#10-3-å°ç»“" class="headerlink" title="10.3 å°ç»“"></a>10.3 å°ç»“</h3><ol><li>å…³è” - association  ã€å¤šå¯¹ä¸€ã€‘</li><li>é›†åˆ - collection ã€ä¸€å¯¹å¤šã€‘</li><li>javaType  &amp;&amp; ofType<ol><li>javaTypeç”¨æ¥æŒ‡å®šå®ä½“ç±»ä¸­çš„å±æ€§çš„ç±»å‹</li><li>ofType ç”¨æ¥æŒ‡å®šæ˜ å°„åˆ°Listæˆ–è€…é›†åˆä¸­çš„pojoç±»å‹ï¼Œæ³›å‹ä¸­çº¦æŸç±»å‹ï¼</li></ol></li></ol><p><strong>æ³¨æ„ç‚¹ï¼š</strong></p><ul><li>ä¿è¯SQLçš„å¯è¯»æ€§ï¼Œé€šä¿—æ˜“æ‡‚</li><li>æ³¨æ„ä¸€å¯¹å¤šã€å¤šå¯¹ä¸€ä¸­ï¼Œå±æ€§åå’Œå­—æ®µçš„é—®é¢˜</li><li>å¦‚æœé—®é¢˜ä¸å¥½æ’æŸ¥é”™è¯¯ï¼Œå¯ä»¥ä½¿ç”¨æ—¥å¿—ï¼Œå»ºè®®ä½¿ç”¨Log4j</li></ul><p><strong>é¢è¯•é«˜é¢‘ï¼š</strong></p><ul><li>MySqlå¼•æ“</li><li>InnoDBåº•å±‚åŸç†</li><li>ç´¢å¼•</li><li>ç´¢å¼•ä¼˜åŒ–</li></ul><h2 id="11-åŠ¨æ€SQL"><a href="#11-åŠ¨æ€SQL" class="headerlink" title="11. åŠ¨æ€SQL"></a>11. åŠ¨æ€SQL</h2><p><strong>åŠ¨æ€SQLï¼šæ ¹æ®ä¸åŒçš„æ¡ä»¶ç”Ÿæˆä¸åŒçš„SQLè¯­å¥ã€‚</strong></p><p>åŠ¨æ€ SQL æ˜¯ MyBatis çš„å¼ºå¤§ç‰¹æ€§ä¹‹ä¸€ã€‚å¦‚æœä½ ä½¿ç”¨è¿‡ JDBC æˆ–å…¶å®ƒç±»ä¼¼çš„æ¡†æ¶ï¼Œä½ åº”è¯¥èƒ½ç†è§£æ ¹æ®ä¸åŒæ¡ä»¶æ‹¼æ¥ SQL è¯­å¥æœ‰å¤šç—›è‹¦ï¼Œä¾‹å¦‚æ‹¼æ¥æ—¶è¦ç¡®ä¿ä¸èƒ½å¿˜è®°æ·»åŠ å¿…è¦çš„ç©ºæ ¼ï¼Œè¿˜è¦æ³¨æ„å»æ‰åˆ—è¡¨æœ€åä¸€ä¸ªåˆ—åçš„é€—å·ã€‚åˆ©ç”¨åŠ¨æ€ SQLï¼Œå¯ä»¥å½»åº•æ‘†è„±è¿™ç§ç—›è‹¦ã€‚</p><p>ä½¿ç”¨åŠ¨æ€ SQL å¹¶éä¸€ä»¶æ˜“äº‹ï¼Œä½†å€ŸåŠ©å¯ç”¨äºä»»ä½• SQL æ˜ å°„è¯­å¥ä¸­çš„å¼ºå¤§çš„åŠ¨æ€ SQL è¯­è¨€ï¼ŒMyBatis æ˜¾è‘—åœ°æå‡äº†è¿™ä¸€ç‰¹æ€§çš„æ˜“ç”¨æ€§ã€‚</p><p>å¦‚æœä½ ä¹‹å‰ç”¨è¿‡ JSTL æˆ–ä»»ä½•åŸºäºç±» XML è¯­è¨€çš„æ–‡æœ¬å¤„ç†å™¨ï¼Œä½ å¯¹åŠ¨æ€ SQL å…ƒç´ å¯èƒ½ä¼šæ„Ÿè§‰ä¼¼æ›¾ç›¸è¯†ã€‚åœ¨ MyBatis ä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼Œéœ€è¦èŠ±æ—¶é—´äº†è§£å¤§é‡çš„å…ƒç´ ã€‚å€ŸåŠ©åŠŸèƒ½å¼ºå¤§çš„åŸºäº OGNL çš„è¡¨è¾¾å¼ï¼ŒMyBatis 3 æ›¿æ¢äº†ä¹‹å‰çš„å¤§éƒ¨åˆ†å…ƒç´ ï¼Œå¤§å¤§ç²¾ç®€äº†å…ƒç´ ç§ç±»ï¼Œç°åœ¨è¦å­¦ä¹ çš„å…ƒç´ ç§ç±»æ¯”åŸæ¥çš„ä¸€åŠè¿˜è¦å°‘ã€‚</p><ul><li>if</li><li>choose (when, otherwise)</li><li>trim (where, set)</li><li>foreachï¼ˆæœ€ç—›è‹¦ï¼‰</li></ul><h3 id="11-1-ç¯å¢ƒæ­å»º"><a href="#11-1-ç¯å¢ƒæ­å»º" class="headerlink" title="11.1 ç¯å¢ƒæ­å»º"></a>11.1 ç¯å¢ƒæ­å»º</h3><p><strong>åˆ›å»ºblogè¡¨</strong></p><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> blog(    <span class="hljs-keyword">id</span> <span class="hljs-built_in">varchar</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">not</span> <span class="hljs-literal">null</span> <span class="hljs-keyword">comment</span> <span class="hljs-string">&#x27;åšå®¢id&#x27;</span>,    title <span class="hljs-built_in">varchar</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">not</span> <span class="hljs-literal">null</span> <span class="hljs-keyword">comment</span> <span class="hljs-string">&#x27;åšå®¢æ ‡é¢˜&#x27;</span>,    author <span class="hljs-built_in">varchar</span>(<span class="hljs-number">30</span>) <span class="hljs-keyword">not</span> <span class="hljs-literal">null</span> <span class="hljs-keyword">comment</span> <span class="hljs-string">&#x27;åšå®¢ä½œè€…&#x27;</span>,    create_time datetime <span class="hljs-keyword">not</span> <span class="hljs-literal">null</span> <span class="hljs-keyword">comment</span> <span class="hljs-string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,    views <span class="hljs-built_in">int</span>(<span class="hljs-number">30</span>) <span class="hljs-keyword">not</span> <span class="hljs-literal">null</span> <span class="hljs-keyword">comment</span> <span class="hljs-string">&#x27;æµè§ˆé‡&#x27;</span>)<span class="hljs-keyword">engine</span> = <span class="hljs-keyword">innodb</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">charset</span> = utf8</code></pre><p>åˆ›å»ºä¸€ä¸ªåŸºç¡€å·¥ç¨‹</p><ol><li>å¯¼åŒ…</li><li>ç¼–å†™é…ç½®æ–‡ä»¶</li><li>ç¼–å†™å®ä½“ç±»</li></ol><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Blog</span> </span>&#123;    <span class="hljs-keyword">private</span> String id;    <span class="hljs-keyword">private</span> String title;    <span class="hljs-keyword">private</span> String author;    <span class="hljs-keyword">private</span> Date createTime;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> views;&#125;</code></pre><ol start="4"><li>ç¼–å†™å®ä½“ç±»å¯¹åº”çš„æ¥å£åŠMapperæ–‡ä»¶</li></ol><h3 id="11-2-ifè¯­å¥"><a href="#11-2-ifè¯­å¥" class="headerlink" title="11.2 ifè¯­å¥"></a>11.2 ifè¯­å¥</h3><pre><code class="hljs java"><span class="hljs-comment">/*</span><span class="hljs-comment">* å¦‚æœmapä¸­ä¼ é€’çš„æ˜¯titleï¼Œåˆ™æŸ¥æ‰¾å‡ºæ‰€æœ‰titleçš„ä¹¦ç±</span><span class="hljs-comment">* å¦‚æœä¼ é€’çš„æ˜¯authorï¼Œåˆ™æŸ¥æ‰¾å‡ºæ‰€æœ‰authorçš„ä¹¦ç±</span><span class="hljs-comment">* å¦åˆ™æŸ¥æ‰¾æ‰€æœ‰ä¹¦ç±*/</span><span class="hljs-function">List&lt;Blog&gt; <span class="hljs-title">queryBlogIF</span><span class="hljs-params">(Map map)</span></span>;</code></pre><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;queryBlogIF&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;com.wen.pojo.Blog&quot;</span>&gt;</span>  select * from blog  <span class="hljs-tag">&lt;<span class="hljs-name">where</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;title != null&quot;</span>&gt;</span>      title = #&#123;title&#125;    <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;author != null&quot;</span>&gt;</span>      and author = #&#123;author&#125;    <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span>  <span class="hljs-tag">&lt;/<span class="hljs-name">where</span>&gt;</span></code></pre><p><em>where</em> å…ƒç´ åªä¼šåœ¨å­å…ƒç´ è¿”å›ä»»ä½•å†…å®¹çš„æƒ…å†µä¸‹æ‰æ’å…¥ â€œWHEREâ€ å­å¥ã€‚è€Œä¸”ï¼Œè‹¥å­å¥çš„å¼€å¤´ä¸º â€œANDâ€ æˆ– â€œORâ€ï¼Œ<em>where</em> å…ƒç´ ä¹Ÿä¼šå°†å®ƒä»¬å»é™¤ã€‚</p><p>è¯´ç™½äº†ï¼Œ<em>where</em>å¯ä»¥æ™ºèƒ½åŒ–ä¿è¯<em>sql</em>è¯­å¥çš„æ­£ç¡®ï¼ï¼<img src="/images/MyBatis/image-20201114084842350.png" alt="image-20201114084842350" style="zoom:50%;" /></p><pre><code class="hljs java"><span class="hljs-meta">@Test</span><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span></span>&#123;    SqlSession sqlSession = MybatisUtils.getSqlSession();    BlogMapper mapper = sqlSession.getMapper(BlogMapper.class);    HashMap map = <span class="hljs-keyword">new</span> HashMap();    map.put(<span class="hljs-string">&quot;author&quot;</span>,<span class="hljs-string">&quot;é‡è§ç‹‚ç¥è¯´&quot;</span>);    List&lt;Blog&gt; blogs = mapper.queryBlogIF(map);    <span class="hljs-keyword">for</span> (Blog blog : blogs) &#123;        System.out.println(blog.getTitle());    &#125;    sqlSession.close();&#125;</code></pre><h3 id="11-3-å¸¸ç”¨æ ‡ç­¾"><a href="#11-3-å¸¸ç”¨æ ‡ç­¾" class="headerlink" title="11.3 å¸¸ç”¨æ ‡ç­¾"></a>11.3 å¸¸ç”¨æ ‡ç­¾</h3><p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬ä¸æƒ³ä½¿ç”¨æ‰€æœ‰çš„æ¡ä»¶ï¼Œè€Œåªæ˜¯æƒ³ä»å¤šä¸ªæ¡ä»¶ä¸­é€‰æ‹©ä¸€ä¸ªä½¿ç”¨ã€‚é’ˆå¯¹è¿™ç§æƒ…å†µï¼Œ<em>MyBatis</em> æä¾›äº† choose å…ƒç´ ï¼Œå®ƒæœ‰ç‚¹åƒ Java ä¸­çš„ switch è¯­å¥ã€‚</p><h4 id="choose-when-otherwise"><a href="#choose-when-otherwise" class="headerlink" title="choose  when otherwise"></a><strong><em>choose  when otherwise</em></strong></h4><pre><code class="hljs xml">    <span class="hljs-comment">&lt;!--</span><span class="hljs-comment">    æŒ‰é¡ºåºæ‰§è¡Œç¬¬ä¸€ä¸ªç¬¦åˆçš„æ¡ä»¶</span><span class="hljs-comment">    --&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;queryBlogIF&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;com.wen.pojo.Blog&quot;</span>&gt;</span>  select * from blog  <span class="hljs-tag">&lt;<span class="hljs-name">where</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">choose</span>&gt;</span>      <span class="hljs-tag">&lt;<span class="hljs-name">when</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;title != null&quot;</span>&gt;</span>        title = #&#123;title&#125;      <span class="hljs-tag">&lt;/<span class="hljs-name">when</span>&gt;</span>      <span class="hljs-tag">&lt;<span class="hljs-name">when</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;author != null&quot;</span>&gt;</span>        and author = #&#123;author&#125;/*è¿™ä¸ªandä¸åŠ å¥½åƒä¹Ÿå¯ä»¥ï¼Œä½†æ˜¯æœ€å¥½è§„èŒƒå†™ä»£ç ï¼ŒåŠ ä¸Šandæœ€å¥½*/      <span class="hljs-tag">&lt;/<span class="hljs-name">when</span>&gt;</span>      <span class="hljs-tag">&lt;<span class="hljs-name">otherwise</span>&gt;</span>        and views &gt; #&#123;views&#125;      <span class="hljs-tag">&lt;/<span class="hljs-name">otherwise</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">choose</span>&gt;</span>  <span class="hljs-tag">&lt;/<span class="hljs-name">where</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></code></pre><h4 id="set"><a href="#set" class="headerlink" title="set"></a><strong><em>set</em></strong></h4><p><em>set</em> å…ƒç´ ä¼šåŠ¨æ€åœ°åœ¨è¡Œé¦–æ’å…¥ SET å…³é”®å­—ï¼Œå¹¶ä¼šåˆ æ‰é¢å¤–çš„é€—å·ï¼ˆè¿™äº›é€—å·æ˜¯åœ¨ä½¿ç”¨æ¡ä»¶è¯­å¥ç»™åˆ—èµ‹å€¼æ—¶å¼•å…¥çš„ï¼‰</p><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">update</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;updateBlogSet&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;map&quot;</span>&gt;</span>  update mybatis.blog  <span class="hljs-tag">&lt;<span class="hljs-name">set</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;title != null&quot;</span>&gt;</span> title = #&#123;title&#125;,<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;author != null&quot;</span>&gt;</span> author = #&#123;author&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span>  <span class="hljs-tag">&lt;/<span class="hljs-name">set</span>&gt;</span>  where id = #&#123;id&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">update</span>&gt;</span></code></pre><p><strong>ç¬¬ä¸€å¥ä¸­çš„if é€—å·,å¿…é¡»åŠ ä¸Šï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼ï¼</strong></p><img src="/images/MyBatis/image-20201114090943589.png" alt="image-20201114090943589" style="zoom:50%;" /><p><strong>ä¸Šè¿°æƒ…å†µä¼šæŠ¥é”™ï¼å› ä¸ºupdateæ˜¯ä¸èƒ½æ²¡æœ‰setè¯­å¥çš„ï¼ï¼</strong></p><p>æ‰€è°“çš„åŠ¨æ€SQLï¼Œæœ¬è´¨è¿˜æ˜¯SQLè¯­å¥ï¼Œåªæ˜¯æˆ‘ä»¬å¯ä»¥åœ¨SQLå±‚é¢å»æ‰§è¡Œä¸€ä¸ªé€»è¾‘ä»£ç ã€‚</p><p><em>if where set choose otherwise when</em></p><h3 id="11-4-SQLç‰‡æ®µ-å¤ç”¨"><a href="#11-4-SQLç‰‡æ®µ-å¤ç”¨" class="headerlink" title="11.4 SQLç‰‡æ®µ-å¤ç”¨"></a>11.4 SQLç‰‡æ®µ-å¤ç”¨</h3><p>æœ‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šå°†ä¸€äº›å…¬å…±çš„éƒ¨åˆ†æŠ½å–å‡ºæ¥ï¼Œæ–¹ä¾¿å¤ç”¨ï¼</p><img src="/images/MyBatis/image-20201114102501988.png" alt="image-20201114102501988" style="zoom:50%;" /><img src="/images/MyBatis/image-20201114102529314.png" alt="image-20201114102529314" style="zoom:50%;" /><ul><li>ä½¿ç”¨sqlæ ‡ç­¾æŠ½å–å…¬å…±éƒ¨åˆ†</li><li>åœ¨éœ€è¦çš„åœ°æ–¹ä½¿ç”¨includeæ ‡ç­¾å¼•å…¥</li></ul><p>æ³¨æ„ï¼š</p><ul><li>æœ€å¥½åŸºäºå•è¡¨æ¥å®šä¹‰sqlç‰‡æ®µ</li><li>ä¸è¦å­˜åœ¨whereæ ‡ç­¾</li></ul><h3 id="11-5-foreachè¯­å¥"><a href="#11-5-foreachè¯­å¥" class="headerlink" title="11.5 foreachè¯­å¥"></a>11.5 foreachè¯­å¥</h3><p>åŠ¨æ€ SQL çš„å¦ä¸€ä¸ªå¸¸è§ä½¿ç”¨åœºæ™¯æ˜¯å¯¹é›†åˆè¿›è¡Œéå†ï¼ˆå°¤å…¶æ˜¯åœ¨æ„å»º IN æ¡ä»¶è¯­å¥çš„æ—¶å€™ï¼‰</p><img src="/images/MyBatis/image-20201114102950034.png" alt="image-20201114102950034" style="zoom:50%;" /><p>e.g.(æºäºæ‹‰ä¸æ–‡ï¼Œæ˜¯for exampleçš„ç®€å†™)</p><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--æˆ‘ä»¬ä¼ é€’ä¸€ä¸ªmap,mapä¸­å¯ä»¥å­˜åœ¨ä¸€ä¸ªé›†åˆ</span><span class="hljs-comment">        select * from blog where (id=1 or id=2)</span><span class="hljs-comment">    --&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;queryBogForEach&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;com.wen.pojo.Blog&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;map&quot;</span>&gt;</span>  select * from mybatis.blog  <span class="hljs-tag">&lt;<span class="hljs-name">where</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">foreach</span> <span class="hljs-attr">collection</span>=<span class="hljs-string">&quot;ids&quot;</span> <span class="hljs-attr">item</span>=<span class="hljs-string">&quot;id&quot;</span> <span class="hljs-attr">open</span>=<span class="hljs-string">&quot;(&quot;</span> <span class="hljs-attr">separator</span>=<span class="hljs-string">&quot;or&quot;</span> <span class="hljs-attr">close</span>=<span class="hljs-string">&quot;)&quot;</span>&gt;</span>      id = #&#123;id&#125;    <span class="hljs-tag">&lt;/<span class="hljs-name">foreach</span>&gt;</span>  <span class="hljs-tag">&lt;/<span class="hljs-name">where</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></code></pre><p>æµ‹è¯•ï¼š</p><pre><code class="hljs java"><span class="hljs-meta">@Test</span><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span></span>&#123;  SqlSession sqlSession = MybatisUtils.getSqlSession();  BlogMapper mapper = sqlSession.getMapper(BlogMapper.class);  HashMap map = <span class="hljs-keyword">new</span> HashMap();  ArrayList&lt;String&gt; ids = <span class="hljs-keyword">new</span> ArrayList&lt;String&gt;();  ids.add(<span class="hljs-string">&quot;1&quot;</span>);  ids.add(<span class="hljs-string">&quot;2&quot;</span>);  map.put(<span class="hljs-string">&quot;ids&quot;</span>, ids);  List&lt;Blog&gt; blogs = mapper.queryBogForEach(map);  <span class="hljs-keyword">for</span> (Blog blog : blogs) &#123;    System.out.println(blog.getTitle());  &#125;  sqlSession.close();&#125;</code></pre><p>==åŠ¨æ€SQLå°±æ˜¯åœ¨æ‹¼æ¥SQLè¯­å¥ï¼Œæˆ‘ä»¬åªéœ€è¦ä¿è¯SQLçš„æ­£ç¡®æ€§ï¼ŒæŒ‰ç…§SQLçš„æ ¼å¼ï¼Œå»æ’åˆ—ç»„åˆå°±å¯ä»¥äº†ï¼==</p><p>å»ºè®®ï¼š</p><ul><li>å…ˆåœ¨mysqlä¸­å†™å‡ºå®Œæ•´çš„SQLï¼Œæµ‹è¯•æˆåŠŸåï¼Œå†å¯¹åº”çš„å»ä¿®æ”¹æˆä¸ºæˆ‘ä»¬çš„åŠ¨æ€SQLå®ç°é€šç”¨ã€‚</li></ul><h2 id="12-ç¼“å­˜"><a href="#12-ç¼“å­˜" class="headerlink" title="12. ç¼“å­˜"></a>12. ç¼“å­˜</h2><h3 id="12-1-ç®€ä»‹"><a href="#12-1-ç®€ä»‹" class="headerlink" title="12.1 ç®€ä»‹"></a>12.1 ç®€ä»‹</h3><p>æŸ¥è¯¢ï¼šè¿æ¥æ•°æ®åº“-&gt;æ¶ˆè€—èµ„æºï¼ï¼</p><p>è§£å†³ï¼šä¸€æ¬¡æŸ¥è¯¢çš„ç»“æœå¯ä»¥æš‚å­˜åœ¨ä¸€ä¸ªå¯ä»¥ç›´æ¥å–åˆ°çš„åœ°æ–¹-&gt;æ”¾å…¥å†…å­˜</p><p>å†æ¬¡æŸ¥è¯¢æ—¶ï¼Œç›´æ¥èµ°ç¼“å­˜ï¼Œå°±ä¸éœ€è¦èµ°æ•°æ®åº“ã€‚</p><ol><li><p><strong>ä»€ä¹ˆæ˜¯ç¼“å­˜[cache]ï¼Ÿ</strong></p><p>-å­˜åœ¨å†…å­˜ä¸­çš„ä¸´æ—¶æ•°æ®</p><p>-å°†ç”¨æˆ·ç»å¸¸æŸ¥è¯¢çš„æ•°æ®æ”¾åœ¨ç¼“å­˜ï¼ˆå†…å­˜ï¼‰ä¸­ï¼Œç”¨æˆ·å»æŸ¥è¯¢æ•°æ®å°±ä¸ç”¨ä»ç£ç›˜ä¸Šï¼ˆå…³ç³»å‹æ•°æ®åº“æ•°æ®æ–‡ä»¶ï¼‰æŸ¥è¯¢ï¼Œä»ç¼“å­˜ä¸­æŸ¥è¯¢ï¼Œä»è€Œæé«˜æŸ¥è¯¢æ•ˆç‡ï¼Œè§£å†³äº†é«˜å¹¶å‘ç³»ç»Ÿçš„æ€§èƒ½é—®é¢˜ã€‚</p></li><li><p>ä¸ºä»€ä¹ˆä½¿ç”¨ç¼“å­˜ï¼Ÿ</p><p>å‡å°‘å’Œæ•°æ®åº“çš„äº¤æ¢æ¬¡æ•°ï¼Œå‡å°‘ç³»ç»Ÿå¼€é”€ï¼Œæé«˜ç³»ç»Ÿæ•ˆç‡</p></li><li><p><strong>ä»€ä¹ˆæ ·çš„æ•°æ®èƒ½ä½¿ç”¨ç¼“å­˜ï¼Ÿ</strong></p><p>ç»å¸¸æŸ¥è¯¢å¹¶ä¸”ä¸ç»å¸¸æ”¹å˜çš„æ•°æ®ã€‚</p></li></ol><h3 id="12-2-MyBatisç¼“å­˜"><a href="#12-2-MyBatisç¼“å­˜" class="headerlink" title="12.2 MyBatisç¼“å­˜"></a>12.2 MyBatisç¼“å­˜</h3><ul><li><p>MyBatisåŒ…å«ä¸€ä¸ªéå¸¸å¼ºå¤§çš„æŸ¥è¯¢ç¼“å­˜ç‰¹æ€§ï¼Œä»–å¯ä»¥éå¸¸æ–¹ä¾¿åœ°å®šåˆ¶å’Œé…ç½®ç¼“å­˜ã€‚ç¼“å­˜å¯ä»¥æå¤§çš„æå‡æŸ¥è¯¢æ•ˆç‡</p></li><li><p>MyBatisç³»ç»Ÿä¸­é»˜è®¤å®šä¹‰äº†ä¸¤çº§ç¼“å­˜ï¼š<strong>ä¸€çº§ç¼“å­˜</strong>å’Œ<strong>äºŒçº§ç¼“å­˜</strong>ã€‚</p><ul><li><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œåªæœ‰ä¸€çº§ç¼“å­˜å¼€å¯ã€‚ï¼ˆSqlSessionçº§åˆ«çš„ç¼“å­˜ï¼Œä¹Ÿç§°ä¸ºæœ¬åœ°ç¼“å­˜ï¼‰</p></li><li><p>äºŒçº§ç¼“å­˜éœ€è¦<strong>æ‰‹åŠ¨</strong>å¼€å¯å’Œé…ç½®ï¼Œå®ƒæ˜¯åŸºäºnamespaceçº§åˆ«çš„ç¼“å­˜ã€‚</p></li><li><p>ä¸ºäº†æé«˜æ‰©å±•æ€§ï¼ŒMyBatiså®šä¹‰äº†ç¼“å­˜æ¥å£Cacheã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å®ç°Cacheæ¥å£æ¥å®šä¹‰äºŒçº§ç¼“å­˜ã€‚</p></li></ul></li></ul><p>  Cacheæ˜¯ä¸€ä¸ªæ¥å£interface,</p><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Cache</span> </span>&#123;    <span class="hljs-function">String <span class="hljs-title">getId</span><span class="hljs-params">()</span></span>;    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">putObject</span><span class="hljs-params">(Object var1, Object var2)</span></span>;    <span class="hljs-function">Object <span class="hljs-title">getObject</span><span class="hljs-params">(Object var1)</span></span>;    <span class="hljs-function">Object <span class="hljs-title">removeObject</span><span class="hljs-params">(Object var1)</span></span>;    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">clear</span><span class="hljs-params">()</span></span>;    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">getSize</span><span class="hljs-params">()</span></span>;    <span class="hljs-function"><span class="hljs-keyword">default</span> ReadWriteLock <span class="hljs-title">getReadWriteLock</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;    &#125;&#125;</code></pre><h3 id="12-3ä¸€çº§ç¼“å­˜"><a href="#12-3ä¸€çº§ç¼“å­˜" class="headerlink" title="12.3ä¸€çº§ç¼“å­˜"></a>12.3ä¸€çº§ç¼“å­˜</h3><img src="/images/MyBatis/image-20201114124103438.png" alt="image-20201114124103438" style="zoom:50%;" /><p>ç¼“å­˜å¤±æ•ˆçš„æƒ…å†µï¼š</p><ul><li>æ˜ å°„è¯­å¥æ–‡ä»¶ä¸­çš„æ‰€æœ‰ select è¯­å¥çš„ç»“æœå°†ä¼šè¢«ç¼“å­˜ã€‚</li><li>æ˜ å°„è¯­å¥æ–‡ä»¶ä¸­çš„æ‰€æœ‰ insertã€update å’Œ delete è¯­å¥ä¼šåˆ·æ–°ç¼“å­˜ã€‚å› ä¸ºå¢åˆ æ”¹æ“ä½œæœ‰å¯èƒ½ä¼šæ”¹å˜æ•°æ®åº“çš„æ•°æ®ã€‚</li><li>æŸ¥è¯¢ä¸åŒçš„Mapper.xmlã€‚</li><li>æ‰‹åŠ¨æ¸…ç†ç¼“å­˜ï¼</li></ul><pre><code class="hljs java">sqlSession.clearCache();</code></pre><p><strong>å°ç»“ï¼š</strong></p><p>ä¸€çº§ç¼“å­˜é»˜è®¤æ˜¯å¼€å¯çš„ï¼Œåªåœ¨ä¸€æ¬¡SqlSessionä¸­æœ‰æ•ˆï¼Œä¹Ÿå°±æ˜¯åœ¨è¿æ¥-&gt;å…³é—­è¿æ¥è¿™ä¸ªæ—¶é—´æ®µã€‚</p><p>ä¸€çº§ç¼“å­˜å°±æ˜¯ä¸€ä¸ªMapã€‚ï¼ˆä¸€çº§ç¼“å­˜åˆç§°æœ¬åœ°çš„ä¼šè¯ç¼“å­˜ã€‚ï¼‰</p><h3 id="12-4-äºŒçº§ç¼“å­˜"><a href="#12-4-äºŒçº§ç¼“å­˜" class="headerlink" title="12.4 äºŒçº§ç¼“å­˜"></a>12.4 äºŒçº§ç¼“å­˜</h3><ul><li>äºŒçº§ç¼“å­˜ä¹Ÿå°±å…¨å±€ç¼“å­˜ï¼Œä¸€çº§ç¼“å­˜ä½œç”¨åŸŸå¤ªä½äº†ï¼Œæ‰€ä»¥è¯ç”Ÿäº†äºŒçº§ç¼“å­˜ã€‚</li><li>åŸºäºnamespaceçº§åˆ«çš„ç¼“å­˜ï¼Œä¸€ä¸ªå‘½åç©ºé—´ï¼Œå¯¹åº”ä¸€ä¸ªäºŒçº§ç¼“å­˜ã€‚</li><li>å·¥ä½œæœºåˆ¶<ul><li>ä¸€ä¸ªä¼šè¯æŸ¥è¯¢ä¸€æ¡æ•°æ®æ—¶ï¼Œè¿™ä¸ªæ•°æ®å°±ä¼šè¢«æ”¾åœ¨å½“å‰ä¼šè¯çš„ä¸€çº§ç¼“å­˜ä¸­ï¼›</li><li>å¦‚æœå½“å‰ä¼šè¯å…³é—­äº†ï¼Œè¿™ä¸ªä¼šè¯å¯¹åº”çš„ä¸€çº§ç¼“å­˜å°±æ²¡äº†ï¼Œä½†æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ˜¯(äºŒçº§ç¼“å­˜çš„æœºåˆ¶)ï¼Œä¸€çº§ç¼“å­˜ä¼šè¯å…³é—­äº†ï¼Œä¸€çº§ç¼“å­˜ä¸­çš„æ•°æ®è¢«ä¿å­˜åˆ°äºŒçº§ç¼“å­˜ä¸­ï¼›</li><li>æ–°çš„ä¼šè¯æŸ¥è¯¢ä¿¡æ¯ï¼Œå°±å¯ä»¥ä»äºŒçº§ç¼“å­˜ä¸­è·å–å†…å®¹ï¼›</li><li>ä¸åŒçš„mapperæŸ¥å‡ºçš„æ•°æ®ä¼šæ”¾åœ¨è‡ªå·±å¯¹åº”çš„ç¼“å­˜mapä¸­ã€‚</li></ul></li></ul><p>æ­¥éª¤ï¼š</p><ol><li>å¼€å¯å…¨å±€ç¼“å­˜</li></ol><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--æ˜¾ç¤ºçš„è®¾ç½®å…¨å±€ç¼“å­˜--&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">setting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;cacheEnabled&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;true&quot;</span>/&gt;</span></code></pre><ol start="2"><li>åœ¨è¦ä½¿ç”¨äºŒçº§ç¼“å­˜çš„mapperæ–‡ä»¶ä¸­å¼€å¯ï¼</li></ol><p><img src="/images/MyBatis/image-20201114162610558.png" alt="image-20201114162610558"></p><p>ä¹Ÿå¯ä»¥è‡ªå®šå‚æ•°ï¼š</p><pre><code class="hljs xml">&lt;cache  eviction=&quot;FIFO&quot;  flushInterval=&quot;60000&quot;  size=&quot;512&quot;  readOnly=&quot;true&quot;/&gt;</code></pre><p>å¯ç”¨çš„æ¸…é™¤ç­–ç•¥æœ‰ï¼š</p><ul><li><code>LRU</code> â€“ æœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼šç§»é™¤æœ€é•¿æ—¶é—´ä¸è¢«ä½¿ç”¨çš„å¯¹è±¡ã€‚</li><li><code>FIFO</code> â€“ å…ˆè¿›å…ˆå‡ºï¼šæŒ‰å¯¹è±¡è¿›å…¥ç¼“å­˜çš„é¡ºåºæ¥ç§»é™¤å®ƒä»¬ã€‚</li><li><code>SOFT</code> â€“ è½¯å¼•ç”¨ï¼šåŸºäºåƒåœ¾å›æ”¶å™¨çŠ¶æ€å’Œè½¯å¼•ç”¨è§„åˆ™ç§»é™¤å¯¹è±¡ã€‚</li><li><code>WEAK</code> â€“ å¼±å¼•ç”¨ï¼šæ›´ç§¯æåœ°åŸºäºåƒåœ¾æ”¶é›†å™¨çŠ¶æ€å’Œå¼±å¼•ç”¨è§„åˆ™ç§»é™¤å¯¹è±¡ã€‚</li></ul><p>é»˜è®¤çš„æ¸…é™¤ç­–ç•¥æ˜¯ LRUã€‚</p><p>flushIntervalï¼ˆåˆ·æ–°é—´éš”ï¼‰å±æ€§å¯ä»¥è¢«è®¾ç½®ä¸ºä»»æ„çš„æ­£æ•´æ•°ï¼Œè®¾ç½®çš„å€¼åº”è¯¥æ˜¯ä¸€ä¸ªä»¥æ¯«ç§’ä¸ºå•ä½çš„åˆç†æ—¶é—´é‡ã€‚ é»˜è®¤æƒ…å†µæ˜¯ä¸è®¾ç½®ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰åˆ·æ–°é—´éš”ï¼Œç¼“å­˜ä»…ä»…ä¼šåœ¨è°ƒç”¨è¯­å¥æ—¶åˆ·æ–°ã€‚</p><p>sizeï¼ˆå¼•ç”¨æ•°ç›®ï¼‰å±æ€§å¯ä»¥è¢«è®¾ç½®ä¸ºä»»æ„æ­£æ•´æ•°ï¼Œè¦æ³¨æ„æ¬²ç¼“å­˜å¯¹è±¡çš„å¤§å°å’Œè¿è¡Œç¯å¢ƒä¸­å¯ç”¨çš„å†…å­˜èµ„æºã€‚é»˜è®¤å€¼æ˜¯ 1024ã€‚</p><p>readOnlyï¼ˆåªè¯»ï¼‰å±æ€§å¯ä»¥è¢«è®¾ç½®ä¸º true æˆ– falseã€‚åªè¯»çš„ç¼“å­˜ä¼šç»™æ‰€æœ‰è°ƒç”¨è€…è¿”å›ç¼“å­˜å¯¹è±¡çš„ç›¸åŒå®ä¾‹ã€‚ å› æ­¤è¿™äº›å¯¹è±¡ä¸èƒ½è¢«ä¿®æ”¹ã€‚è¿™å°±æä¾›äº†å¯è§‚çš„æ€§èƒ½æå‡ã€‚è€Œå¯è¯»å†™çš„ç¼“å­˜ä¼šï¼ˆé€šè¿‡åºåˆ—åŒ–ï¼‰è¿”å›ç¼“å­˜å¯¹è±¡çš„æ‹·è´ã€‚ é€Ÿåº¦ä¸Šä¼šæ…¢ä¸€äº›ï¼Œä½†æ˜¯æ›´å®‰å…¨ï¼Œå› æ­¤é»˜è®¤å€¼æ˜¯ falseã€‚</p><ol start="3"><li>æµ‹è¯•</li></ol><img src="/images/MyBatis/image-20201114163546331.png" alt="image-20201114163546331" style="zoom:50%;" /><img src="/images/MyBatis/image-20201114163531437.png" alt="image-20201114163531437" style="zoom:50%;" /><p><strong>é—®é¢˜ï¼š</strong></p><p>æˆ‘ä»¬éœ€è¦å°†å®ä½“ç±»åºåˆ—åŒ–ï¼å¦åˆ™ä¼šæŠ¥é”™ï¼(ç¼“å­˜ã€é€šä¿¡éƒ½æœ€å¥½å°†å¯¹è±¡è¿›è¡Œåºåˆ—åŒ–)</p><p>Error serializing object.  Cause: java.io.NotSerializableException: com.wen.pojo.User</p><p><strong>å°ç»“ï¼š</strong></p><ul><li>åªè¦å¼€å¯äº†äºŒçº§ç¼“å­˜ï¼Œåœ¨åŒä¸€ä¸ªMapperä¸‹å°±æœ‰æ•ˆã€‚</li><li>æ‰€æœ‰çš„æ•°æ®éƒ½ä¼šå…ˆæ”¾åœ¨ä¸€çº§ç¼“å­˜ä¸­</li><li>åªæœ‰å½“ä¼šè¯æäº¤ï¼Œæˆ–è€…å…³é—­çš„æ—¶å€™ï¼Œæ‰ä¼šæäº¤åˆ°äºŒçº§ç¼“å­˜ä¸­</li></ul><h3 id="12-5-ç¼“å­˜åŸç†"><a href="#12-5-ç¼“å­˜åŸç†" class="headerlink" title="12.5 ç¼“å­˜åŸç†"></a>12.5 ç¼“å­˜åŸç†</h3><img src="/images/MyBatis/image-20201114165527710.png" alt="image-20201114165527710" style="zoom:50%;" /><h3 id="12-6-è‡ªå®šä¹‰ç¼“å­˜-Ehcache"><a href="#12-6-è‡ªå®šä¹‰ç¼“å­˜-Ehcache" class="headerlink" title="12.6 è‡ªå®šä¹‰ç¼“å­˜-Ehcache"></a>12.6 è‡ªå®šä¹‰ç¼“å­˜-Ehcache</h3><p>Ehcacheæ˜¯ä¸€ç§å¹¿æ³›ä½¿ç”¨çš„å¼€æºJavaåˆ†å¸ƒå¼ç¼“å­˜ã€‚ä¸»è¦é¢å‘é€šç”¨ç¼“å­˜,Java EEå’Œè½»é‡çº§å®¹å™¨ã€‚</p><p>ä½†æ˜¯ï¼Œæ²¡äººç”¨å•Šå“ˆå“ˆå“ˆå“ˆ~<img src="/images/MyBatis/image-20201114170513447.png" alt="image-20201114170513447"></p><img src="/images/MyBatis/image-20201114170535832.png" alt="image-20201114170535832" style="zoom:50%;" /><p>æ—¢ç„¶è¿™æ ·ï¼Œé‚£æˆ‘å°±ä¸å­¦äº†ï¼ï¼</p><p>Redisæ•°æ®åº“ï¼ˆéå…³ç³»å‹æ•°æ®åº“ï¼‰æ¥åšç¼“å­˜ï¼K-V</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2020/11/27/hello-world/"/>
    <url>/2020/11/27/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
